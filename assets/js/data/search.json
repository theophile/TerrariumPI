[{"title": "Early TerrariumPI version","url": "/TerrariumPI/posts/2014/08/28/early-terrariumpi-version/","categories": "Website, News","tags": "release","date": "2014-08-28 12:00:00 +0200","snippet" : "Release 0.3I found an old screenshot of a very early version of TerrariumPI. The screenshot above is from version 0.3. The date of the screenshot is from august 2014. The gui did had already editing settings, but I think a lot of settings was still in .cfg files. Which was manual editing and restarting the software after every change.WeatherOn the screenshot you can see various weather information. The data was coming from Yr.no. But they changed their API, and now we use OpenWeatherData. But the used data is still the same.The two suns on the left and right side show the sun rise and sun set values. This is real weather data based on a geo position. Ths sun in between shows how far the day is done. So the small sun in the middle will go from left to right during the day.And one temperature indicator is used to show the current weather temperature.System statusOn the left side there are some small system indicators. They show if the different part of the system are running correctly. This is only a status view.RelaysIn the middle we have four relays, of which two are toggled on. We used â€˜old-shoolâ€™ look relays on the page. The names are embossed on the right side in the relay.When a relay is toggled on, the lightbulb will be on. This looked pretty nice.SensorsWe had two types of sensors. Temperatures and humidity sensors. Other sensors where not supported. It looks clear what is what type of sensors. With warning/error indicators.EnvironmentAnd finally on the right side we have the configured environment. You can see the lights setup, with a heater and sprayer setup.The green check marks shows that an area is active.The small light bulbs show if the relays are on or not.The small timer icon you could set timer settings.And finally, all the icons in the middle are animated. The big light bulb goes on and off when the relays are on or off. The heater flames are animating when the heater was active."},{"title": "TerrariumPI version 2.5","url": "/TerrariumPI/posts/2017/06/28/terrariumpi-version-2-5/","categories": "Website, News","tags": "release","date": "2017-06-28 12:00:00 +0200","snippet" : "Release 2.5I found an old screenshot of TerrariumPI. The screenshot above is from version 2.5. The date of the screenshot is from july 2017. This GUI was build with AdminLTE admin template design."},{"title": "TerrariumPI on Reddit","url": "/TerrariumPI/posts/2017/10/25/terrariumpi-on-reddit/","categories": "Website, News","tags": "publication","date": "2017-10-25 12:00:00 +0200","snippet" : "Website: Reddit.comPublication date: 25 october 2017"},{"title": "TerrariumPI on Hack a Day","url": "/TerrariumPI/posts/2017/11/21/terrariumpi-on-hack-a-day/","categories": "Website, News","tags": "publication","date": "2017-11-21 11:00:00 +0100","snippet" : "Website: Hackaday.comPublication date: 21 november 2017"},{"title": "TerrariumPI on Raspberry PI Weekly Newsletter","url": "/TerrariumPI/posts/2017/11/24/terrariumpi-on-raspberry-pi-weekly-newsletter/","categories": "Website, News","tags": "publication","date": "2017-11-24 11:00:00 +0100","snippet" : "Website: Raspberrypi.orgPublication date: 24 november 2017"},{"title": "TerrariumPI on Reptile Haven","url": "/TerrariumPI/posts/2019/12/31/terrariumpi-on-reptile-haven/","categories": "Website, News","tags": "publication","date": "2019-12-31 12:00:00 +0100","snippet" : "Website: Reptile HavenPublication date: 31 december 2019"},{"title": "TerrariumPI on The blog of Cody Deluisio","url": "/TerrariumPI/posts/2020/05/30/terrariumpi-on-the-blog-of-cody-deluisio/","categories": "Website, News","tags": "publication","date": "2020-05-30 12:00:00 +0200","snippet" : "Website: https://deluisio.com/Publication date: 30 may 2020"},{"title": "Welcome","url": "/TerrariumPI/posts/2021/05/05/welcome/","categories": "Website, News","tags": "welcome","date": "2021-05-05 12:00:00 +0200","snippet" : "New websiteWelcome on the new website for TerrariumPI. The software to control your reptile terrarium or any other enclosed area.This website will give all the information that is needed in order to work with this software and setup your areas.ScreenshotsTerrariumPI DashboardTerrariumPI SensorsTerrariumPI Relays"},{"title": "Release TerrariumPI v 4.0.0","url": "/TerrariumPI/posts/2021/08/30/release-terrariumpi-v-4-0-0/","categories": "Website, News","tags": "release, 4.0.0","date": "2021-08-30 12:00:00 +0200","snippet" : "Release 4.0.0After more then a year there is a new version. It took so much time as it is almost a complete rewrite. That was not planned, but it did happen.The idea was to create a better REST API so that it would be easier to integrate. Unfortunately that did not succeed, so we have lost about 6 months testing and creating all kinds of code. So for now, the API is changed, but the documentation is not. So that did not succeed.But the biggest improvement is that we now can support multiple enclosures with multiple areas. So that means that you do not need a Raspberry PI per enclosure anymore. And that you can have now two or three heating areaâ€™s with their own configuration.And the timing for the lights is updated and more clear how to setup.So, go the installation page in order to install Terrarium PI version 4."},{"title": "Release TerrariumPI v 4.1.0","url": "/TerrariumPI/posts/2021/12/10/release-terrariumpi-v-4-1-0/","categories": "Website, News","tags": "release, 4.1.0","date": "2021-12-10 22:00:00 +0100","snippet" : "Release 4.1.0A new release after just for the end of the year. So this is the Christmas release! With this release we have a lot of new features, new hardware support and some bugfixes. Get the new version here.Here are some highlights of this release.Climate mirroringIt is now possible to mirror temperature and humidity from a given weather location. This will means that the temperatures will be changed during the day based on the previous day on the selected location. And if you have dimmers running some heaters, they will increase and decrease nicely during the day.This is all based on the selected weather location in the weather settings. Using the variation tab on an area, you can select weather as a variation source.Area sensor variationsLike the climate mirroring it is also possible to change the sensor values according to a specified schema. So if you want to have a certain temperatures at 10:00, at 14:00 and 20:00, you can now set this up in the variation tab.Area dependenciesAnother big feature is the ability to let area depending on each other. This way, you can prevent a sprayer system to run dry if the water tank is getting low on volume. If you select the water tank as depending area in the sprayer/humidity area, the sprayer will only operate when it needs based on the selected rules, and when the depending water tank has no alarm. As soon the water tank is on low volume, and the alarm is shown, the sprayer will not operate anymore.This can be done with almost any area. Disable water heaters when the water tank is empty is now also possible.Docker supportAlso with this new version, there is docker support. This should make it easier to upgrade and install the software. As this is still new, it could be that there are some bugs. If you found one, please report. Thanks to @alec-pinson!This also means that you can run TerrariumPI on a newer Debian (Bullseye). Natively you still need Debian buster.New hardwareIn this release we also have some new hardware that we support. Those are the Qwiic Relay and newer relay cards of Sequent MicrosystemsSo, go the installation page in order to install Terrarium PI version 4."},{"title": "Release TerrariumPI v 4.2.0","url": "/TerrariumPI/posts/2022/02/13/release-terrariumpi-v-4-2-0/","categories": "Website, News","tags": "release, 4.2.0","date": "2022-02-13 12:00:00 +0100","snippet" : "Release 4.2.0This release has a lot of small fixes and the main goal was to speedup the software. Also this release will support more hardware. Get the new version here.Here are some highlights of this release.Speed improvementsWith this release the GUI now supports compressed javascript and css files. During the installation the .gz files are created and the webserver will serve the gzipped files when the browser asked for a compressed file. This should save about 40% of bandwidth during the loading of the GUI.Also there are some changed in the code so there is less database usage, which should also make the GUI a bit more responsive.New hardwareIn this release we also have some new hardware that we support. This is a new bluetooth sensor called LYWSD03MMC which is a look a like of the MiTemp sensors. Thanks to Charles NelsonNotificationIn the notification settings we have support for LCD and OLED displays. And updated the message parsing to support number rounding.So, go the installation page in order to install Terrarium PI version 4."},{"title": "Release TerrariumPI v 4.3.0","url": "/TerrariumPI/posts/2022/04/11/release-terrariumpi-v-4-3-0/","categories": "Website, News","tags": "release, 4.3.0","date": "2022-04-11 13:00:00 +0200","snippet" : "Release 4.3.0This release has a lot of small fixes. Also this release will support more hardware. Get the new version here.Here are some highlights of this release.IO ExpanderThere is now support for two IO expander boards. This way, you could add more buttons and GPIO relays though I2C bus. This expander boards can only toggle ports on or off. It is not possible to use it for sensors.Area updatesThere were some bugs in the area setting of an enclosure. Those are fixed and there is a new feature. You can now ignore alarm values per area if needed. So for the low alarm tab, you can now ignore the low alarm, and only use the high alarm value for toggling relays.Also there is a better check for depending areas. So when the area you depend on turns in an alarm state, it will also shutdown the area that depends on it.HardwareWe now support SHT4X and BME680 sensors and RTSP based webcams.Also we support hardware PWM again like the old legacy way in TP3.So, go the installation page in order to install Terrarium PI version 4."},{"title": "Release TerrariumPI v 4.3.1 and 4.3.2","url": "/TerrariumPI/posts/2022/05/05/release-terrariumpi-v-4-3-1-and-4-3-2/","categories": "Website, News","tags": "release, 4.3.1, 4.3.2","date": "2022-05-05 10:00:00 +0200","snippet" : "Release 4.3.1 and 4.3.2The release 4.3.1 is a small update which will fix some small bugs and updates some libraries. This will also add the SHT3XD sensor as a new sensor. It appears this sensor works a bit different than all the other SHTXX sensors.And there is a nasty bug fixed with the pca9685 dimmer when running in Docker.In release 4.3.2 we fixed a FFMPEG issue. This was a result of missing OS libraries, and this will need to update your docker-compose.yaml file. The path /opt/vc/bin is changed to /opt/vc so we can also use the lib folder which is needed for FFMPEG.This release has a lot of small fixes. Also this release will support more hardware. Get the new version here.Here are some highlights of this release.GUIThe GUI is updated with the latest AdminLTE template. And we have reduced the amount of plugins. All plugins that are not used are now removed from the source, resulting a lower size in Docker and on disk.Also the LeafletJS is updated.HardwareWe now support SHT3XD sensor.So, go the installation page in order to install Terrarium PI version 4."},{"title": "Release TerrariumPI v 4.3.3","url": "/TerrariumPI/posts/2022/05/17/release-terrariumpi-v-4-3-3/","categories": "Website, News","tags": "release, 4.3.3","date": "2022-05-17 11:00:00 +0200","snippet" : "Release 4.3.3This is again a small update which fixes some annoying bugs. Starting/stopping of MQTT servers should work now without a restart of TerrariumPI. Fixed total water cost indication. There was a calculation error on the dashboard.Get the new version here.So, go the installation page in order to install Terrarium PI version 4."},{"title": "Release TerrariumPI v 4.4.0","url": "/TerrariumPI/posts/2022/08/04/release-terrariumpi-v-4-4-0/","categories": "Website, News","tags": "release, 4.4.0","date": "2022-08-04 13:00:00 +0200","snippet" : "Release 4.4.0This is release witch contains new hardware, code improvements and hopefully a bit speed improvement. Also there are translation updates and we have a new language Catalan. Get the new version here.Or, go the installation page in order to install Terrarium PI version 4.Here are some highlights of this release.I2C MultiplexerTerrariumPI is tested with an I2C multiplexer in order to add more I2C buses to the Raspberry PI and the ability to add fixed address sensors/relays on different buses. And this support is just in the Raspberry PI OS. Just connect it to the first I2C bus and add a single line to the file /boot/config. More can be found here.HardwareThere is now support for 2 new dimmers. The first dimmer is the I2C 4 channel LED AC dimmer. This is a dimmer that can control up to 4 electrical devices.The other dimmer is the LED-Warrior18 dimmer. This is a DC dimmer that can control 2 electrical devices.And we should be able to support majority of the AtlasScientific sensors.Bug fixesThe following bugs are fixed: A nasty time table bug when using the climate mirror mode. This mostly happens when the difference in timezones was around 10-12 hours. Fixed BrightPI support. Try to improve the overall speed. It looks it is a bit faster, but it is also depending on the used hardware and Raspberry Pi version."},{"title": "Release TerrariumPI v 4.5.0","url": "/TerrariumPI/posts/2022/10/29/release-terrariumpi-v-4-5-0/","categories": "Website, News","tags": "release, 4.5.0","date": "2022-10-29 13:00:00 +0200","snippet" : "Release 4.5.0With this new release we have upgraded the weather logic in order to support multiple versions of the OpenWeatherMap API. Fixed a nasty bug rotation if log file gets rather big. Multiple database updates and fixes in order to improve crash recovery. Also there are translation updates. Get the new version here.Or, go the installation page in order to install Terrarium PI version 4.Here are some highlights of this release.OpenWeatherMap API 3.0OpenWeatherMap introduced the One Call API 3.0 which means that the old 2.5 version is not active available for new users. This means not that when you make an account at OpenWeatherMap you will only get the free data. Which is lacking history data for climate mirroring. But when you add an API 3.0 subscription, which is still free, but needs some credit card info, you will get all the needed weather data again. More information here.For existing OpenWeatherMap users they can still use the 2.5 version of the API.TerrariumPI will auto detect which version of the API you have and can use.Log rotationWhen the log file is getting big, more then 100 MB, it could take to much time to rotate and compress that the TerrariumPI is forced to restart by the OS. Because there is no update within the 2 minutes system check. This has been fixed to do the log rotation in a new thread, which is not blocking the main engine thread anymore. Still it takes some time and CPU and disk time, but it should not cause a timeout which will trigger a restart.Database tuningIn order to speedup the software the database is not crash resistance. It can cover restarts, but power outages could corrupt the database. Now there is a tunning setting to change the way the database preforms. This will slow down the software a bit, but it should not get corrupted when there is a power outage. More information can be found hereIf the database does get corrupted, then there is now also a small script which can fix the database. Make sure that you have enough disk space left as there will be made a full copy of the database. Read this FAQ how to fix.Bug fixesThe following bugs are fixed: Better check if notification services are enabled during startup. Fix daylight detection when main lights are disabled. Codacy suggested code updates."},{"title": "Release TerrariumPI v 4.6.0","url": "/TerrariumPI/posts/2022/12/11/release-terrariumpi-v-4-6-0/","categories": "Website, News","tags": "release, 4.6.0, gui, svelte","date": "2022-12-11 12:00:00 +0100","snippet" : "Release 4.6.0 - Early christmas presentWith this release we have rewritten the complete GUI. We added some new hardware and some other hardware has been tested, fixed and confirmed to be working. Also the Docker build has been reduced to only 10 minutes and the size has been reduced by 33%. And we made some code updates to improve stability.Get the new version here.Or, go the installation page in order to install Terrarium PI version 4.Here are some highlights of this release.New GUI build with SvelteThe GUI is completely rewritten using Svelte reactive javascript framework. This is a new reactive framework which works very easy and very fast. In the old GUI we used a lot of jQuery which is not always the best way to do it. Also with Svelte there is a better memory management and better timer control on reloading data. The GUI itself looks almost the same, but some forms will be smaller and only showing fields that are needed based on choices. With this new GUI we hope that the interface feels a bit more like an app and less sluggish.Translation changesWith the new GUI, we had to change the translations. Now there are two parts. There is a backend part, which is used by the daemon that is doing all the updates and running the code on the Raspberry PI. The GUI part, is like the name says, the GUI or front-end. This has been separated because there are two different ways of translating. And therefore, we need to have two translation parts.We have tried to merge the old translations into the new parts. But some translations could be lost. And all missing translations are now translated with Google translate. And therefore, also some translations could be wrong. Please feel free to update it here.New and fixed hardwareWe do now support remote buttons through remote JSON data. In order not to overwhelm the remote server, you can specify how often it will update the button state. This will make the option to add remote doors in TerrariumPI.The Atlas Scientific sensors are now tested and working. So all available sensors can be used.Docker optimizationsWith the new GUI we had to look at the Docker build setup. And it turned out we could improve it a lot. The first Docker build was not very optimized. Now we have downgraded the Python version to the same version as on the Raspberry PIs. That way we can use the Piwheels python package builds and speed up the build enormously. And looking into the installed packages we could remove some which made the image also a lot smaller.There is one change in the Docker-compose.yml file which should be updated with this release. You should remove the mount volume /opt/vc as this now build on the image it self. Look for an up to date example here."},{"title": "Release TerrariumPI v 4.6.1","url": "/TerrariumPI/posts/2022/12/30/release-terrariumpi-v-4-6-1/","categories": "Website, News","tags": "release, 4.6.1","date": "2022-12-30 12:00:00 +0100","snippet" : "Release 4.6.1 - Happy new year !!This is a release which fixes a lot of the new GUI issues. Apparently christmas came to early ;). But with this release, all the annoying bugs are hopefully fixed. Even when you are now running 4.6.0 without issues, it is wise to upgrade to 4.6.1. Most issues arises when you start to edit areas or hardware in the GUi.Get the new version here.Or, go the installation page in order to install Terrarium PI version 4."},{"title": "Release TerrariumPI v 4.6.2","url": "/TerrariumPI/posts/2023/03/25/release-terrariumpi-v-4-6-2/","categories": "Website, News","tags": "release, 4.6.2","date": "2023-03-25 12:00:00 +0100","snippet" : "Release 4.6.2 - Spring releaseThis is a maintenance release which fixes a lot of audio player and playlist issues. So tht should now work again.Than we have fixed the IO expanders pcf857(4/5). The used library is not that stable, and has some bugs. So we had to work around that. And now it should all work correctly. This will also fix the support for HD30A 4 Channel Electromagnetic I2C Relay 12V 30A.Get the new version here.Or, go the installation page in order to install Terrarium PI version 4.New hardwareWe do now support Shelly relays.And HD30A 4 Channel Electromagnetic I2C Relay 12V 30A are now fully tested and working based on the IO expanders pcf857(4/5).FixesOther fixes are better webcam retry logic. The camera should try three times before going in offline mode. That was broken, and the offline mode kicked in after 1 error. This is now fixed."},{"title": "Release TerrariumPI v 4.6.3","url": "/TerrariumPI/posts/2023/06/02/release-terrariumpi-v-4-6-3/","categories": "Website, News","tags": "release, 4.6.3","date": "2023-06-02 13:00:00 +0200","snippet" : "Release 4.6.3 - Summer is here releaseA new, sort of maintenance, release. But it contains just a bit more ðŸ˜‰The major update is a feature request from may 2019 that should now be added. You can add a threshold value per light sensor. Also you can use LDR buttons as feedback sensor. And in the lights area you can select the sensors which are used to check if the light is above the threshold.Updated some documentation about notification setup and messages. You can read it here.Updated translations GUI and Python to the latest library versions. And cleanup some unused files.Get the new version here.Or, go the installation page in order to install Terrarium PI version 4.New hardwareYou can now live stream a USB webcam. This will disable the Raspberry PI cam streaming. As it uses the same GPU hardware.Full support of buttons through an IO expander.FixesDimming to 0% in steps. Some dimmers will not go fully off when going to 0% value. This has to do that the last change is to small. So solve this, we do a small ramp up to 5% and than to 0%. This way, there is a 5% change, which will fully power off the dimmer.We fixed the 404 error page. So now you will get a nice 404 error page to see when you try to open a page that does not exists.Fixed offline live webcam error handling."},{"title": "Release TerrariumPI v 4.7.0","url": "/TerrariumPI/posts/2023/09/10/release-terrariumpi-v-4-7-0/","categories": "Website, News","tags": "release, 4.7.0","date": "2023-09-10 13:00:00 +0200","snippet" : "Release 4.7.0 - Finalizing the softwareWith this new release we have added some new features, fixed some nasty small bugs, and finished some left over code and functionality.We also bump the version to 4.7 as with this release all functionality should be rewritten and available to use. These are: Replacing hardware modal at a relay Restarting TerrariumPI in a Docker setup and disabling the reboot and restart Pi menu options on DockerAnd we have some new interesting logic feature. Relay dependencyAnd there is a way to use a single relay in multiple areas. A much asked feature. Read more about it in the FAQ.The translations English, German, Dutch are updated.Updated some documentation about different dependency options. And updated a lot of other documentation pages. Including upgrading the Chirpy template. And found a very early version of TerrariumPI.Update NodeJS and Python libraries to the latest versions.Get the new version here.Or, go the installation page in order to install Terrarium PI version 4.Relay dependencyThis is a new feature. You can now select in an area other relays of which this are depends on. And that depending on can be like all other relays needs to be on, or at least on needs to on. This allows some â€˜relay sharingâ€™ logic.GUI updatesWe have updated the GUI to use Svelte 4. It should produce smaller code and therefore the GUI should load a bit faster.On the dashboard there was a nasty bug. Areas running on a timer mode did on show the current begin and end time, and not the operating window begin and end time. This has been fixed.We also added an indicator at the light sensors when there is a light threshold calibrated. It will lit up when the threshold is reached.We have now a loading modal when loading the webcam archive. As this can take some time when there a lot of pictures, we have now a nice waiting notification with a counter.Changed the alarm icon on the dashboard. It will now only turn red when the alarm does trigger a relay. When there is an alarm, but no relays to toggle, the icon stays gray. Indicating an alarm triggered but no relays to act on.New hardwareYou can now live stream a RTSP webcam. This will disable the Raspberry PI cam streaming. As it uses the same GPU hardware.FixesWe increased the system watchdog timeout to 3 minutes. This will give some more time to start TerrariumPI up with faulty hardware. At least the GUI should be able to start now when there are some errors.Better closing I2C connections when a sensor is failing. Else you could get system error messages about to may open files. Which will case system crashes and/or reboots.The Python code is now formatted according to the Black rules.And the code has been more cleaned up. And we have a code quality of A at Codacy. Fixed Pi Zero installation script. TerrariumPI should now install correctly on a Pi Zero. Thanks to @Awakawaka. Still Pi Zero is not actively supported, but it should be able to run the software."},{"title": "Archives","url": "/TerrariumPI/archives/","categories": "","tags": "","date": "2021-04-10 23:44:51 +0200","snippet" : ""},{"title": "Features","url": "/TerrariumPI/features/","categories": "","tags": "","date": "2021-05-05 10:07:10 +0200","snippet" : "Here are some features that TerrariumPI has.Local weather and climate mirroringUsing local weather data, you can use sunrise and sunset as timers for your lights or other relays. This way you get automatically seasons following the season outside. Moreâ€¦It is also possible to mirror the temperature and humidity of the weather at the given location. This can be set on every temperature or humidity controlled area. And per area you can even select an offset, so you can create shade area and a full sun area based on the same climate. Look at the variation tab to set this up.But you can even enter an external JSON source for climate mirroring. Look How to use remote data FAQ how to add the correct url.MultilingualThe software is translated to multiple languages. This will also select the correct currency, number and date formatting. If you language is not available or is not complete, go to the translation page to see how to update it.Multiple enclosures and multi areasIt is possible to control multiple enclosures with a single Raspberry PI. As long you can hook up enough sensors and relays, you can create unlimited enclosures and areas.In every enclosure you can create multiple areas, even of the same type, to setup your enclosure. So you can create a sun spot area and a shading spot area that have their own settings and logic in the same enclosure.Costs indicationBased on the entered power and water usage per relay and with the power and water price in the settings page, we can make an estimate of the running costs of your terrarium. Keep in mind this is an estimate, and does not handle big price fluctuations.Data encryptionSome data is sensitive like the authentication password or the cloud credentials. This data is stored encrypted in the TerrariumPI database. That means when you database is lost, your passwords will not be compromised directly.There is a difference in how the data is encrypted.Admin passwordThe admin password is encrypted one way in a hash, and that hash is checked with the entered login credentials. This password cannot be reverted back to plain text if you loose it. But you can reset itFor encryption we use bcrypt.Other sensitive dataCloud credentials are stored with symmetric encryption. This means that the data can be reverted back to plain text. This is needed to able to login to the cloud providers. TerrariumPI is logging as â€˜youâ€™.For encryption we use Fernet encryption with the CPU serial as salt. As every CPU has itâ€™s own serial, the salt is unique and locked to your Raspberry PI.DockerYou can also install a Docker image to make the installation easier. More information can be found at installation page"},{"title": "Hardware","url": "/TerrariumPI/hardware/","categories": "","tags": "","date": "2021-05-05 10:07:10 +0200","snippet" : "GPIOAll the hardware that is connected through GPIO pins needs to use the physical pin number as address. This means a number from 1 - 40.Power savingSome GPIO sensors can benefit from using power saving. A good example is the analog/digital moisture sensor YTXXPower management works that you connect the red (power) wire of the sensor to a GPIO pin, which will be put to high so that the sensor get powered. After 1.0 sec a measurement is taken, and afterwards the power to the sensor is shutdown.When you want to enable power saving just enter an extra GPIO pin number, where the RED power cable is connected to, to the address separated by a comma.Ex: [GPIO Readout pin],[GPIO power saving pin]remark: Not all sensors will work with power management.Analog sensorsIt is possible to add analog sensors to TerrariumPI. But as TerrariumPI only has digital GPIO ports, an extra add-on is needed to add analog ports. For now the RaspIO Analog Zero is known to work. But any MCP3008 based board should work. The downside is that you will miss some GPIO pins for other use.I2C busBy default there is only 1 I2C bus available. But it is possible to add more I2C busses to your Raspberry PI. To select a different I2C bus then 1, use the following address notation:&amp;lt;I2C Address&amp;gt;,[I2C Bus number]&amp;lt;I2C Address&amp;gt; is mandatory and you can use the number shown in the i2cdetect. Adding â€˜0xâ€™ in front is allowed. So either 3c, 3c,1, 0x3c and 0x3c,1 are valid and the same I2C addresses.The [I2C Bus number] is optional and can be omitted. The default value is 1.Run the command i2cdetect -y 1 in order to see what is connected to your I2C bus. A correct working I2C bus should produce the following outcome:123456789 0 1 2 3 4 5 6 7 8 9 a b c d e f00: -- -- -- -- -- -- -- -- -- -- -- -- --10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --20: -- -- -- -- -- -- -- 27 -- -- -- -- -- -- -- --30: -- -- -- -- -- -- -- -- -- -- -- -- 3c -- -- --40: 40 -- -- -- -- -- -- -- -- -- -- -- -- -- -- --50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --60: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --70: 70 -- -- -- -- -- -- --I2C MultiplexerWith an I2C multiplexer you can add more I2C busses to TerrariumPI. Support for I2C multiplexers depends on the support in the OS. For now there is support for pca9542 (2 channel), pca9545 (4 channel), and pca9548 (8 channel) muxes.I2C IO ExpanderThere is support for two I2C IO Expanders so you can have extra GPIO relays or GPIO buttons if needed. This will update the GPIO address to:pcf857&amp;lt;4/5&amp;gt;-&amp;lt;IO expander port&amp;gt;,&amp;lt;I2C Address&amp;gt;,[I2C Bus number]Either use pcf8574 or pcf8575 to select the used IO expander.&amp;lt;IO expander port&amp;gt; is mandatory and is a number from 0 till max ports - 1.&amp;lt;I2C Address&amp;gt; is mandatory and specified here.RelaysWe currently support 30 types of relays. Relays which has a dial icon after their name are dimmers. Bright-PI DC Dimmer Denkovi V2 Energenie LAN Energenie RF Energenie USB FTDI GPIO HD30A 4 Channel Electromagnetic I2C Relay 12V 30A I2C 4Channels LED AC dimmer IRF520 Dimmer Kasa Smart LED-Warrior18 Meross power switches NextEVO Universal AC MAINS Dimmer (MPDMv4.1) PCA9685 dimmer Qwiic Relay Remote dimmer Remote relay Script dimmer Script relay Sequent Microsystems 4 Relay Card Sequent Microsystems 4 Relay Card Ver. 4 Sequent Microsystems 8 Relay Card Ver. 1 - 2 Sequent Microsystems 8 Relay Card Ver. 3 Sequent Microsystems 8 Relay Card Ver. 4 Shelly Sonoff (Tasmota) Sonoff D1 Dimmer (Tasmota) WEMO Smart plug SensorsWe currently support 37 hardware types of sensors, measuring altitude, co2, conductivity, distance, fertility, humidity, light, moisture, ph, pressure, temperature, uva, uvb, uvi: 1-Wire sensor humidity, temperature AM2302 Sensor humidity, temperature AM2320 Sensor humidity, temperature AMG8833 Grid-Eye IR Thermometer sensor temperature AtlasScientific I2C sensor co2, conductivity, humidity, ph, pressure, temperature BH1750 LUX light sensor light BME280 sensor altitude, humidity, pressure, temperature BME680 sensor altitude, humidity, pressure, temperature CCS811 Air Quality sensor co2 Chirp sensor moisture, temperature COZIR CO2 sensor co2, humidity, temperature DHT11 sensor humidity, temperature DHT22 sensor humidity, temperature HC-SR04 ultrasonic ranging sensor distance HC-SR04P ultrasonic ranging sensor distance Honeywell HumidIcon HIH8000 sensor humidity, temperature HTU21D sensor humidity, temperature JSN-SR04T ultrasonic ranging sensor distance K30 CO2 sensor co2 LYWSD03MMC bluetooth sensor humidity, temperature Meross MS100 humidity, temperature MH-Z19 CO2 sensor co2, temperature MH-Z19b CO2 sensor co2, temperature MiFlora bluetooth sensor fertility, light, moisture, temperature MiTemperature bluetooth sensor humidity, temperature MLX90614 IR Thermometer sensor temperature One-Wire File System (OWFS) humidity, temperature Remote Sensor altitude, co2, distance, fertility, humidity, light, moisture, ph, pressure, temperature, uva, uvb, uvi Script Sensor altitude, co2, distance, fertility, humidity, light, moisture, ph, pressure, temperature, uva, uvb, uvi SEN0161 PH Probe sensor (analog) ph Sensirion SHT2X sensor humidity, temperature Sensirion SHT3X sensor humidity, temperature Sensirion SHT3XD sensor humidity, temperature Sensirion SHT4X sensor humidity, temperature SI7021 sensor humidity, temperature VEML6075 UVA and UVB light sensor uva, uvb, uvi YL-69 sensor (digital) moistureButtonsWe currently support 5 types of buttons. IO Expander Light sensor Magnetic (door) button Motion sensor Remote Button WebcamsWe currently support 9 types of webcams. Live HLS Stream Live streaming Live Raspberry PI camera Live streaming Live RTSP camera Live streaming Live USB camera Live streaming Local file webcam Still picture Raspberry PI camera Still picture Remote file webcam Still picture RTSP camera Still picture USB camera Still picture"},{"title": "Install","url": "/TerrariumPI/install/","categories": "","tags": "","date": "2021-05-05 10:07:10 +0200","snippet" : "Here we will install Raspberry PI and TerrariumPI software step by step.Raspberry PIIn order to run TerrariumPI you first need a working Raspberry PI with the â€˜Raspberry Pi OS Lite (Legacy)â€™ image. Make sure you are using the Legacy version! This is Debian Buster.This is very important, as the Desktop and/or the new OS version will not work well with the GPIO pins and Raspberry PI cameras.Also 64bit is not supported due to missing mmal code which is needed for the webcams.Creating SD CardDownload and instal the Raspberry Pi Imager to prepare your SD card. Make sure you have a SD card of at least 4GB of size. Bigger is better :) Make sure you select Raspberry Pi OS Lite (legacy) from the other Raspberry Pi OS images.In order to enable SSH, Wifi and other settings, click on the settings icon in the lower right corner. Here you enter your Wifi settings, pi password etc. Use this to install the Raspberry PI headless. Add the SD card in the Raspberry PI and withing a minute you should have a running Raspberry PI.TerrariumPIWhen the Raspberry PI is up and running, you should be able to SSH to it. On Linux and Mac you can use the terminal. For Windows, you can use Putty.1ssh pi@[raspberrypi]Disclaimer: If you have TerrariumPI 3 running on this Raspberry PI, then you can read here how to stop and make a backup.DockerAs from version 4.1 there is a Docker image that can be used to run TerrariumPI. When you run it in Docker, you can skip the rest of the page. Only the migration could be followed if you want to restore your current relay history.Install docker according to: https://docs.docker.com/engine/install/debian/ Just follow the installation steps. And to run the docker commands as a normal user, follow these stepsThen you need to setup a docker-compose.yaml file. There is an example docker-compose.yaml.example in the contrib folder which can be used as a starting point:12345678910111213141516171819202122232425262728293031version: &quot;3.7&quot;services: terrariumpi: image: theyosh/terrariumpi:latest # Or use a specific version volumes: - /opt/terrariumpi/logs:/TerrariumPI/log - /opt/terrariumpi/data:/TerrariumPI/data - /opt/terrariumpi/media:/TerrariumPI/media - /opt/terrariumpi/scripts:/TerrariumPI/scripts - /opt/terrariumpi/webcam-archive:/TerrariumPI/webcam/archive - /opt/terrariumpi/DenkoviRelayCommandLineTool:/TerrariumPI/3rdparty/DenkoviRelayCommandLineTool - /boot/config.txt:/boot/config.txt - /boot/cmdline.txt:/boot/cmdline.txt - /etc/modules:/etc/modules - /dev:/dev network_mode: host restart: unless-stopped privileged: true cap_add: - NET_ADMIN stop_grace_period: 1m stop_signal: SIGINT init: true environment: TZ: &quot;Europe/Amsterdam&quot; # timezone list can be found here https://en.wikipedia.org/wiki/List_of_tz_database_time_zones ENABLE_I2C: &quot;true&quot; ENABLE_1_WIRE: &quot;true&quot; ENABLE_CAMERA: &quot;true&quot; ENABLE_SERIAL: &quot;true&quot; ENABLE_CO2_SENSORS: &quot;true&quot; AUTO_REBOOT: &quot;true&quot;The only real setting is the TZ value. Make sure it is set to your local/home time zone. A valid list can be found here.We run the container with privileged enabled. This is less secure, but needed in order to be able to handle all the hardware that is connected to the Raspberry PI.The network mode needs to be at host. Else bluetooth with not work, and you canâ€™t use bluetooth sensors.then you can run docker compose up -d to start the docker image. It could be that it needs a reboot. After that, you should be able to access TerrariumPI on the url http://[raspberrypi]:8090. Continue with the setupManualPrerequisitesFirst we need to install Git. This is used to download the software from Github.com1sudo apt -y install gitDownloadAfter Git is installed, we can download the TerrariumPI source code. We will only download the latest version.If you want to do some development or testing, omit the part --depth 1. Then you will get the full repository with all the branches.1git clone --branch main --depth 1 https://github.com/theyosh/TerrariumPI.gitInstallationAnd the final step is to start the installer. This will guide you through the installation process.The first time you run the installer, it will also update the Raspberry PI OS to the latest version. This can take some more time.Make sure you select the correct timezone. This is your home timezone. If you do not select the correct timezone during installation, you could get strange time schedules when running TerrariumPI.12cd TerrariumPIsudo ./install.sh After the installation is done, reboot once and you should be able to access TerrariumPI on the url http://[raspberrypi]:8090. Continue with the setupMigration from V3 to V4There is no real migration from version 3 to version 4. The changes are to big. So that means you have to install TerrariumPI v4 as it was a new PI. These migrations steps will only copy the existing relay history data from V3 to V4 so that the total power and water usages is still there. And the total costs are still correct. This is all what will be migrated.If you do not care about your relay history, you can just skip this migration. This is the only data that will be migrated!BackupSo make sure you have stopped the old TerrariumPI. And rename the folder TerrariumPI to TerrariumPI.old. This way you have a backup of your existing working setup. Stop TerrariumPI 3. Wiki Make a backup of existing version. mv /home/pi/TerrariumPI /home/pi/TerrariumPI.old First setupNow, install TerrariumPI v4 as described here. And then you need to set it up as you want. So that means adding at least all the relays you want to use/migrate. When that is done, shutdown TerrariumPI 4 and continue with the last migrations step.Migrate First make sure you have an backup of files of the old V3 version: settings.cfg history.db Stop the TerrariumPI service before start migrating. sudo service terrariumpi stop Enter the new TerrariumPI V4 directory. cd /home/pi/TerrariumPI Enter the Python3 virtual environment. source venv/bin/activate Enter the contrib folder where the file copy_relay_history.py is located. Run the script copy_relay_history.py with the following parameters in this order: full path to OLD config (settings.cfg) full path to OLD database (history.db) full path to NEW database (terrariumpi.db) Answer the questions asked by the script. This should match your old and new relays, in order to copy the historical data.123456789101112131415Found 7 out of 8 are found. Below is a summary of the founded relays that can converted.Relay &#39;Waterton verwarming&#39; of type &#39;ftdi&#39; at address &#39;4,A500WMST&#39;. Old ID: 7506c0e9ca0288be148b9617d959e7a6 =&amp;gt; New ID: 91e8236ba878587c218b5a9a941a1d48Relay &#39;Mister&#39; of type &#39;eg-pm-lan&#39; at address &#39;http://cvaVMnTiMYS35Be@192.168.5.150#2&#39;. Old ID: 30f7595d5a055dc5b2a31127c93c9606 =&amp;gt; New ID: 75588e78194b941b937b404db134422eRelay &#39;Verwarmingmat&#39; of type &#39;ftdi&#39; at address &#39;1,A500WMST&#39;. Old ID: 137488ac23a2b0b516daa315641a178c =&amp;gt; New ID: 477dd5dad0da139f8b48225acd3901d3Relay &#39;UV Lamp&#39; of type &#39;ftdi&#39; at address &#39;2,A500WMST&#39;. Old ID: 4a2151d5834fe888820c831e9a6d8e8b =&amp;gt; New ID: 97c45c98476b1807a4bfa7bb4d249b14Relay &#39;Sproeier&#39; of type &#39;ftdi&#39; at address &#39;3,A500WMST&#39;. Old ID: 01ec0c8f3c4fd952c1b2aef8a4e9ec0d =&amp;gt; New ID: beb111bdacda89f8bf13cc749ecd26c0Relay &#39;Dripper plant&#39; of type &#39;eg-pm-lan&#39; at address &#39;http://cvaVMnTiMYS35Be@192.168.5.150#1&#39;. Old ID: c867377cd5b6e1d4be580c1fa865ee82 =&amp;gt; New ID: f53904eaedfac445e6cdae611612441fRelay &#39;Heat lamp&#39; of type &#39;nextevo-dimmer&#39; at address &#39;32&#39;. Old ID: 574e22d2b2d6e54ecd5a3db8e6bb50b9 =&amp;gt; New ID: 0e0cf978ca6bdb8eb994c186434a628eThe following relays could not be found:Relay &#39;wemotest&#39; of type &#39;wemo&#39; at address &#39;192.168.5.55&#39;.If you are happy with this setup, you can continue with the conversion. This will take a lot of time....Enter &#39;yes&#39; to continue. Anything else will abort.:Enter yes and wait. After the migration is done, you will see a message and you can then start the TerrariumPI service. sudo service terrariumpi start"},{"title": "Setup","url": "/TerrariumPI/setup/","categories": "","tags": "","date": "2021-05-05 10:07:10 +0200","snippet" : "Here you can find how you can setup various parts that works together as a single enclosure. You can even setup multiple enclosures. But make sure that relays and areas are not shared in multiple enclosures or areas.A simple rule to remember: A relay can only be used once.LoginAfter the installation, you need to setup TerrariumPI. In order to do that, login with a browser at http://[raspberry_pi]:8090 and click on the Login link on the left side menu. The default login should be admin / password (FAQ)HelpOn every form popup you have a small question mark next to the form title. Click on it to get more information about the form fields.Required fieldsAll fields with a red star (*) are required to fill out. Some fields can be come required based on selected options.SettingsSettings form with four partsThe settings is split up in multiple parts. Each group contains settings that are related to each other.SystemIn the system group you setup the minimal settings to get TerrariumPI running. Pi power usage Enter the amount of total power in watts used by the Raspberry PI including attached USB devices. IP number Enter the IP to listen for connections. Default 0.0.0.0 Port number Enter the port number to listen for connections. Default 8090 Authentication mode There are 3 authentication options. Full authentication: For all actions you need to be logged in. Only for changes: Only adding and updating needs authentication. No authentication: No authentication at all. Be very careful with this! User name Enter the user name for authentication. Default admin New password Enter a new password for authentication. Encrypted Confirm new password Confirm the new password for authentication. Excluded ids List of IDs that are excluded. If you mis a sensor or relay, remove it from this list, and it will be used again.LocaleIn the locale group you can setup your locales that are custom to. Language Select the interface language. This will also change number and currency formatting. Temperature type Select the temperature indicator. Only affects the current values. Distance type Select the distance indicator. Only affects the current values. Liquid volume type Select the water volume indicator. Only affects the current values. Wind speed type Select the wind speed indicator. Only affects the current values. Power price Enter the price per kWh. Water price Enter the price per L/Gallon.GuiIn the Gui group you can tune the web interface. Title Enter a custom title. If it contains the letters PI, it will turn red on the MOTD Profile image Upload a small image. That is used in the left menu. Graph smoothing If the graph is spiky, you can enter a value which is the amount of measurements that are averaged. Auto dark mode Tun dark mode on based on weather sun rise and set Show min and max values in gauge graphs Add the minimum and maximum value that is measured in the last 24 hours on the gauge graph. Hide enclosures on dashboard Only show the average graphs on the dashboard. All gauges on a single page Add an extra menu option to show all the sensors on a single page.CloudIn the cloud group you can enter credentials for different cloud integrationsMerossWith the Meross cloud you can use all the relays and sensors that are connected to your account. Meross username The username to login to your Meross cloud account. Encrypted Meross password The password to login to your Meross cloud account. EncryptedWeatherPopup form adding/updating the weather sourceWith the weather data you can schedule your light system based on the sun rise and sun set. This can either be at your home location, or any other location. The sun rise and set times will be shifted to your home location times. So when it is day at 08:00 at the given location, TerrariumPI will thread that as 08:00 local time. This way, you can have seasons with shorter and longer days, based on day of the year.Other weather data is just for show. Does not have a function.SetupIn order to use the weather system, you need to create a free account at OpenWeatherMap.As from October 2022 they changed the conditions to a free account. Which means that we have fewer data to work with. This also means no history data for climate mirroring out of the box. If you have created an account before that date, you should still be able to use the One call API 2.5 which does hold all the needed information. With One call API 3.0, you need an extra (free) subscription which needs credit card data.For everybody that is registed with OpenWeatherMap after October, will have less data or you have to subscribe for the One call API 3.0The url format needs to be https://api.openweathermap.org/data/2.5/weather?q=[City],[Country]&amp;amp;appid=[API_KEY]. Do not add the &amp;amp;metric= part in the url.TerrariumPI does about 6-10 calls on the One call API per day, what would result in 300 calls max per month. And it can detect which API is available with your OpenWeatherMap account.RelaysPopup form for adding and updating relays - Calibration is only available for dimmersAdding and changing relays is done with the above relay form. Hardware The hardware type of the relay. A full list of supported relays Address Enter the address of the relay. This is specific for each relay. Name The name of the relay. Use an easy to remember name. Wattage The amount of power that is used when on or at full power (dimmer) Water flow The amount of water that is used when on or at full power (dimmer) in Liter/Gallon per minute Current The current state of the relay. Value 0 is off, 100 is full on, or a value between 0 - 100 (dimmer)CalibrationThis is only available for dimmers. Dimmer frequency in Hz The frequency of witch the dimmer is working on. The default depends on the selected dimmer type. Max power in % The max power the dimmer is allowed to use. Default 100 Dimmer offset in % An offset value that is reduced from the actual value. Default 0 Dimmer max dim Legacy dimming like TP3. Enter the technical max dim value. When this value is greater then 0, then the dimmer will use the RPI PWM hardware for dimming. This only works on GPIO pin 12, 32, 33 and 35SensorsPopup form adding/updating the sensorsAdding and changing sensors is done with the above sensor form. Hardware The hardware type of the sensor. A full list of supported sensors Type Select what kind of sensor it is. Address Enter the address of the sensor. This is specific for each sensor. Name The name of the sensor. Use an easy to remember name. Alarm min The lower alarm value. When the sensor gets below this value, the low alarm will be triggered Alarm max The high alarm value. When the sensor gets higher then this value, the hight alarm will be triggered Limit min The minimum value that is valid for this sensor. Values measured below this value will be ignored. Limit max The maximum value that is valid for this sensor. Values measured higher then this value will be ignored. Max diff The maximum difference between two measurements that is valid. Enter 0 to disable. Exclude average Exclude this sensor from the average calculation and graphs on the dashboard.Calibration Offset Enter a value to correct the output reading. This can be a positive or negative value. Minimum moist value Only available for Chirp sensors. More information at Chirp sensor Maximum moist value Only available for Chirp sensors. More information at Chirp sensorDoors / buttonsPopup form for adding and updating buttons - Calibration is only available for light sensorsAdding and changing buttons is done with the above button form. Hardware The hardware type of the button. A full list of supported buttons Address Enter the address of the button. This is specific for each button. Name The name of the button. Use an easy to remember name. Current The current state of the button. Value 1 is active, value 0 is not activeCalibrationThis is only available for light sensors. Capacitor value in ÂµF Enter the value of the capacitorWebcamsPopup form for adding and updating webcamsAdding and changing webcams is done with the above button form. Hardware The hardware type of the webcam. A full list of supported webcams Address Enter the address of the webcam. This is specific for each webcam. Name The name of the webcam. Use an easy to remember name. Resolution Enter the maximum resolution of the webcam in width x height pixels. Rotation Select the rotation of the webcam. White balance Select the white balance correction option. Archiving Select the archiving type. This can either be motion or time based. Archive light state Select the state of the lights for making archive images. In order to use this, make sure this webcam is selected at the correct enclosure Archive door state Select the state of the doors for making archive images. In order to use this, make sure this webcam is selected at the correct enclosure Flash Select relays that act as a flasher. When updating the webcam image, these relays will be toggled on just before taking a picture.Motion detectionThis is only available when motion is selected at Archiving. Show motion boxes Show the area where the motion took place. Motion delta threshold How much change is needed in order to detect motion. Default value of 25 works well Motion minimum area The amount of square pixels to look in to detect motion. Default value of 500 works well. Motion comparison frame Select which frame to use for motion detection. Either the latest updated image (last frame), or the latest archived image (when there was motion).MarkersIt is possible to add markers on the webcam image to show realtime sensor information. Click on the icon in the preview window to drop a marker and select the sensors you want to show.In order to update or delete an existing marker, double click the marker.PlaylistsPopup form for adding and updating playlistsAdding and changing playlists is done with the above button form. Name The name of the playlist. Use an easy to remember name. Volume The volume of the complete playlist. Shuffle Shuffle the playlist every time it is (re)started. Repeat Repeat the playlist. If shuffle is enabled, it will be shuffled every repeat action. Audio files List of audio files. The order of adding is order or playing.EnclosuresPopup form for adding and updating enclosuresAdding and changing enclosures is done with the above button form. Name The name of the enclosure. Use an easy to remember name. Image An image that is used for background image on the dashboard. Description A free field where you can enter some information about your animals/plants. You can even add images here. Doors The door sensors that are used for this enclosure. Magnetic sensors. Webcams One or more webcams that are used in this enclosure. Webcams selected here can use the archive light state and archive door state option at the webcam settings.AreasAdding and changing areas is done here. But as areas have a but more functionality, they are discussed per area type. The most important is that there is an area configured as main lights as this will influence the timing of other areas if they depend on the timing of the main lights. Without this, the system will not work.Also make sure that the light area has relays configured at the Day settings tab.Depending on the combination of Type and Mode some fields are disabled and not used. The values that are shown will be ignored during the operating of the software.Three fields are always required and shared in all the area types: Enclosure Select the enclosure to which this area belongs. Type Select the type of area. Depending on the type, new/different options are available. Name The name of the area. Use an easy to remember name.Main LightsPopup form for adding and updating areas Mode Select the operating mode of this area. Use timer for custom on and off times. Weather is using your configured weather data Minimum hours Enter the minimum hours that the lights should be on. If the day based on the weather data is shorter, the lights will stay on for at least this amount of time. Maximum hours Enter the maximum hours that the lights should be on. Reverse of minimum hours. Hours shift Shift the time that the lights should go on based on the weather sun rise. Can be a positive or negative decimal value (ex: -1.3) Main lights Toggle this if the lights are the main lights on the enclosure. This is used for other areas that depend on this light area. Make sure at least one light area has the toggle main lights setThen you need to setup at least the Day settings tab else the software will not work. Do not use the same relay in the day and night settings. That does not work. A relay configured in the day settings part, will be off during the night period.In the day and night setting tab you can configure the following: Begin time Depending on the selected mode you can enter the start time when the relay(s) should go on. End time Depending on the selected mode you can enter the end time when the relay(s) should go off. The duration between begin and end time we call the operating window On duration Depending on the selected mode you can fine tune the time that the relay(s) should on in minutes time. Enter a value of 0 to put the relays on for the complete operating window time. Off duration Depending on the selected mode you can enter the amount of minutes the relay(s) should be off during the operating window. Enter 0 to disable.Timer functionality: When you have an operating window of 10 hours, and selected 45 min on duration and 15 min off duration, you will get a that the relays will toggle on at the start, run for 45 minutes, and go off for 15 minutes. As this is in total 1 hour, this will be repeated 10 times during the operating window time. Relays Here you select the relay(s) that needs to be controlled. When you select a relay, depending on the type, you will get extra tabs where you can either set the on/off dimming duration or relay delay when the relay(s) are toggled on or off.Simulate sun rise/set: When you select a dimmer and a normal relay, you could setup the dimmer to go on in 30 minutes, and delay the normal relay for 30 minutes, so that when the dimmer is at full power, the other light is toggled on. This will give a nice sun rise effect.Other areasThere are multiple types of areas that can be used. Almost all types have the same logic, but the type of area is of influence on the used sensors. In the screenshot below you see the Humidity type area. But for CO2, Conductivity, Cooling, Heating, Moisture, Fertility, PH this is all the same. Only audio and watertank are special areas which have their own setup.The system uses the sensors alarm values to determine the right conditions you want. For example, using an area with a heater relay and temperature sensors will try to get the temperature in the middle of the minimum and maximum sensor values. Either by using a dimmer or by just toggling on and off. By changing the sensor alarm values, you can raise or lower the wanted temperature. This is the basic logic we use.Popup form for adding and updating areas Depends on Here you can select other areas on which this area depends on. If the depending area is in an alarm state, this area will not toggle on, or if already on, toggle off. For example you have a water tank area and a humidity area where you use a sprayer. When the water tank is (near) empty the low alarm of the water tank will go on, and this humidity area will then not toggle on. Protect against dry running the water sprayer. Mode Same as lights area Sensors Select the sensors you want to use with this type of area. The area will use the average values of the current, min and max alarm values. Day/night difference Enter the a value that the sensors should raise or lower when it become night. Enter a negative value for lowering the temperature. When it become day again, the sensor values will go the opposite direction and return to normal.Leave it 0 if you are planning to use the variation tab Day/night source Select the day and night source. This can either be the main lights or weather. This is used for light settings later on the day or night tabs.Next you can configure either the Low alarm or High alarm tab. This is optional. When you do not select at least 1 relay in these tabs, you will only get a summary for that area with no actions. The Variation tab is described separately.Make sure you do not select a relay more then once in these tabs and areas! Begin time Depending on the selected mode you can enter the start time when the relay(s) should go on. End time Depending on the selected mode you can enter the end time when the relay(s) should go off. The duration between begin and end time we call the operating window On duration Here you can fine tune the time that the relay(s) should on in minutes time. Enter a value of 0 to put the relays on for the complete operating window time. Off duration Here you can e enter the amount of minutes the relay(s) should be off during the operating window. Enter 0 to disable. Power on time Here you can even more fine tine the on duration. The value here is in seconds. When this value is higher then 0 the relay will on for this amount of seconds and will then toggle down. Settle time The time between two relay actions. This is a value in seconds. This means that when the relay goes off, it will wait this amount of time before it will toggle on again. This value is also affective between the Low alarm and High alarm. Light status Select the state of the lights. If the light state is not in the selected state here, the relays will not toggle and power down. This depends on the option Day/night source you have selected earlier. Door status Select the state of the doors. If the door state is not in the selected state here, the relays will not toggle and power down. Alarm threshold The amount of errors that have to pass before the relays toggles on. Relays Select the relays that you want to use for this area. Make sure a relay is only used once!VariationWith the variation tab, you can fine tune the alarms of the sensors during the day so that you can have for example different temperatures during the day. Or you can even mirror a remote climate setting the source on Using current weather.Area variation tab Source Select the variation type. Depending on this option, some fields will hide and other shows up. Period/duration Depending on the source, you fill in a time or a duration in minutes. Value Depending on the source, the new value that should be set at the selected time External source url This is only available with the source option Use json source and Use script Offset This is only available with the source option Using current weather, Use json source and Use script. This is a value that will be added to the wanted current value.AudioPopup form for adding and updating audio areas Mode Same as lights area Sound card Select the sound card you want to use to play the audio. Playlists Select all the playlists you want to use. Make sure that the playlist with repeat option is selected as last.Water tankPopup form for adding and updating water tank areasThe water tank area is a bit special. This can be used to measure your water levels in a tank. This is done by using HC-SR04 ultrasonic ranging sensor. Mode Same as lights area Sensors Select the sensors you want to use with this type of area. Only distance sensors can be used here. Water volume Enter the total amount of water that the tank can hold in litres Height Enter the height of the water tank in centimeters Offset Enter the distance between the sensor and the top of the water level in centimetersOther options are the same the other areas. You can use water pumps to fill your water tank based on the alarm values."},{"title": "Scenarios","url": "/TerrariumPI/scenarios/","categories": "","tags": "","date": "2021-05-05 10:07:10 +0200","snippet" : "On this page you can find various information on how to setup areas and create scenarios.Timer wizardUsing the weather or timer mode in an area, you can set the following 6 fields. The minimal fields that needs to be entered are the begin and end time field. All other fields are optional. Using a value of &#39;&#39; or 0 will ignore the setting. Change some values in the form to see the outcome of the timer schedule.The graph area in red is the time the relay(s) are toggled onAnd when you have selected sensors, used light state or door state, then the relay will only go on when that state is met during the on period in the red are of the graph. Operating window Begin time * End time * Enter the begin and end time off the operating window in which the relay(s) may operate Timer periods On duration Off duration Enter a duration in minutes where the relay(s) are toggled on and off. This will create timer(s) Fine tuning Running time Settle time Enter a duration in seconds which the relay(s) are on and the settle timeout DependenciesThere are multiple dependencies levels. Here we describe all the different dependencies that are possible to use.General dependenciesThere are 2 basic dependencies. When you choose something other than Ignore, then the selected option will be enforced. These are:Light statusOnOffIgnoreDoor statusClosedOpenIgnoreIn the above example we have a raining area setup which will toggle the relays &#39;Mister&#39; and &#39;Sprayer&#39; when the humidity is to low. But, there are 2 dependencies selected and active.- In this case, the main lights needs to be on, so it is day, and the water of the sprayer can vaporize.- And the door needs to be closed. So you are sure that when you are working in the terrarium, and the door is open, you will not get wet.Area dependencyHere you can select other areas on which this area depends on. If the depending area is in an alarm state, this area will not toggle on, or if already on, toggle off.For example you have a water tank area and a humidity area where you use a sprayer. When the water tank is (near) empty the low alarm of the water tank will go on, and this humidity area will then not toggle on.This will protect the water sprayer against running hot/dry when there is no water.Relay dependencyWith relay dependencies you can make extra complex logic. A possibility is to &#39;share&#39; a relay between two areas. As the basic rule is that a relay can only be used once. In order to &#39;share&#39; a relay between the areas you need to create a new third area. In the third area you can select a timer window to toggle the &#39;shared&#39; relay on. And select the relays used in the other two areas as dependening relays. And choice that at least one on dependency mode.This way the relay in the third area will only go on when one of the selected relays of other areas are on.When you select depending relays, you also need to select the dependency mode.There are 3 dependency modes:All onAt least one onNone onIn the example above we have selected an area which is controlling a fan. This will clear the air in the terrarium and should be running when there is either the rain relay is toggled on or the mister relay is toggled on. In this case, those relays are in different areas with different logic.The fan should be on based on a timer from 08:00 till 20:00 hours. This is a 12 hour on time.But with the selected dependency relays, this area will only go on when on of the two selected relays is on. And when there is no depending relay is on, the power of this area will also shut down. So the fan will only be running when either the mister is running, or the sprayer is running.You can also use the &#39;Power on time&#39; and &#39;Settle time&#39; values to fine tune."},{"title": "Notifications","url": "/TerrariumPI/notifications/","categories": "","tags": "","date": "2023-05-14 11:42:47 +0200","snippet" : "The notification system is divided in two parts. There is a notification system service which can be email, push over, or http API calls. And there are notification actions. Like sensor alarms, door openings.Rate limitsBoth the service as the message has a rate limit setting which controls the amount of message per minute are send. If you set a rate limit in the service setting, than that rate limit will count for all messages send through that service.For a single message you can rate limit it for only that message. So an update message can be rate limited to 3 a minute while other messages are not rate limited.Use the value 0 for unlimited amount of message, no rate limit.ServicesThere are multiple services available which can be used multiple times. So you can have configured three email addresses to send messages to. But you can also add email and push over and sent alarms through push over and other through email.Rate limiting is explained here.BuzzerWith the buzzer you can play some songs when there is a warning. You can only play the songs that are shown in the list. Make sure you copy and past the song name and put it in the subject of the message.Connect the buzzer to a GPIO pin and enter the physical pin number as address.DisplayWe support multiple types of displays. There are 2 and 4 lines LCD displays as small OLED displays. When a display is used, it will show a summery after every update run.For address enter the I2C address.EmailHere you can setup the receiving email address and the account details for sending the email. It needs the server address and port together with a username and password to be able to send out emails. It will auto detect TLS/SSL connection options to use.The receiver email address does not has to be te same as the used account for sending emails.MQTTYou can use a MQTT service to send messages and act on based on the content or topic with other clients. It will auto detect TLS/SSL connection options to use.Enter the server address, port number, username and password in the form to connect to a MQTT server. It will connect with a client id: TerrariumPI {version}. It will start the full topic location with terrariumpi. From there you will get sub topics based on the message type. If there is an ID in the data (from a sensor), than this ID will also used as a subtopic. This way you can subscribe to sensor warnings for a single sensor.Subscribe, for example, for a topic: terrariumpi/sensor/warning/1234567/ to get only sensor warnings for sensor id 1234567. You can use wildcards * in the topic path.The contents is in JSON and contains all the data that is available as a place holder and some extra fields:123456{ &quot;uuid&quot; : &quot;&quot;, &quot;topic&quot; : &quot;&quot;, &quot;subject&quot; : &quot;&quot;, &quot;message&quot; : &quot;&quot;}And expect all the place holder fields that are available for the specific message type. The field uuid contains a unique ID so you can track if the message has been processed by logging this ID somewhere.It will not send files, as that will make the messages to big.Pushover For push over you need to enter the API token and user key in order to make a connection. These can be found/created in your account at Pushover.You can then receive messages with the subject and message you entered in a notification message.When you selected the system_error message type, you should get a siren sound when you receive a system error message for extra attention.Traffic lightThe traffic light works a bit different. It will only work on system warnings and errors. So if you select this for a different message type, it will not react.It uses three GPIO address for the different colors/lights.When there is a system warning, the amber light will be lit for 5 minutes. When there is an error, the red light will be turned on for 15 minutes. If there is no warning or error message after the timeout, the lights will go off and only the green light will be on.Web-hookEnter a full url where the data is posted to. The data is in JSON format. The will contain the following data:123456789101112{ &quot;message&quot; : &quot;&quot;, &quot;subject&quot; : &quot;&quot;, &quot;uuid&quot; : &quot;&quot;, &quot;type&quot; : &quot;&quot;, &quot;files&quot; : [ { &quot;name&quot; : &quot;&quot;, &quot;data&quot; : &quot;&quot; } ]}The files are optional. So check if it is in the JSON data. The data of the file is in base64. This can be used to send webcam images.The field uuid contains a unique ID so you can track if the message has been processed by logging this ID somewhere.MessagesThere are several messages types you can use. Select one from the message type options. When selecting for example for sensor changes, you will get a message for each sensor that is changing. At this point it is not possible to have a single message for a single sensor or relay.Rate limiting is explained here.Place holdersIn the subject and message field you can use place holders for actual data in the messages. Use the format ${name} will use the name of the sensor or relay in the message. Where name is the place holder name that is available in the list of place holders on the right side of the form. Use ${now} for the current date and time when the message is created.For example based on the screen shot above. We can create a subject with the value Button ${name} is pressed. And for the message you can enter something like:123456The button ${name}(${id}) is pressed on ${now}The current state is ${value}Kind regardsTerrariumPIYou can also use ${now:%d-%m-%Y %H:%M} for a custom date format.For number formatting you can use the following place holder code: ${value:.2f} will show the current number value with 2 decimals accuracy.More information about (python) text formatting can be found here.Destination servicesAll the services you have setup will show up as an icon which you can click on to enable or disable to send the message through that service. So make sure you have setup your services first."},{"title": "Translations","url": "/TerrariumPI/translations/","categories": "","tags": "","date": "2021-05-05 10:07:10 +0200","snippet" : "Available languagesThe software is currently available in multiple languages.available languagesIf you want to add a new translation or update an existing translation, click here.LocalizationThe selected language will also take care for the number, currency, date and time format. It will not change the temperature indicator. The system will by default use celsius as default."},{"title": "API","url": "/TerrariumPI/api/","categories": "","tags": "","date": "2021-10-09 02:54:55 +0200","snippet" : "Here you can find information about the TerrariumPI REST API. An interactive version can be found at your own TerrariumPI at http://[raspberrypi]:8090/api/swagger/ /api/areas/types/ GET Get available area types Responses 200 Zero or more area types with supported sensor types. Name Located in Description Type type body Area type ID String name body Area type readable name String sensors body List of sensor types that can be used by this area type Array of /api/areas/ GET Get existing areas Responses 200 Zero or more areas Name Located in Description Type id body Auto generated ID String enclosure body The ID of the enclosure of which this area belongs to String name body Name of the area String type body Area type from the AreaType list String mode body Operating mode String setup body JSON setup data String Default: {} state body JSON state data String Default: {} POST Add a new area to an enclosure {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type enclosure body The ID of the enclosure of which this area belongs to String name body Name of the area String type body Area type from the AreaType list String mode body Operating mode String setup body JSON setup data String Default: {} Responses 200 A new created area Name Located in Description Type id body Auto generated ID String enclosure body The ID of the enclosure of which this area belongs to String name body Name of the area String type body Area type from the AreaType list String mode body Operating mode String setup body JSON setup data String Default: {} state body JSON state data String Default: {} 500 Unexpected server error /api/areas/{id}/ GET Get a specific area Parameters Name Located in Description Type id path ID of area to return String Responses 200 The requested area Name Located in Description Type id body Auto generated ID String enclosure body The ID of the enclosure of which this area belongs to String name body Name of the area String type body Area type from the AreaType list String mode body Operating mode String setup body JSON setup data String Default: {} state body JSON state data String Default: {} 404 Area does not exists 500 Unexpected server error PUT Update an existing area with new data {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type id path ID of area to update String enclosure body The ID of the enclosure of which this area belongs to String name body Name of the area String type body Area type from the AreaType list String mode body Operating mode String setup body JSON setup data String Default: {} Responses 200 The updated area Name Located in Description Type id body Auto generated ID String enclosure body The ID of the enclosure of which this area belongs to String name body Name of the area String type body Area type from the AreaType list String mode body Operating mode String setup body JSON setup data String Default: {} state body JSON state data String Default: {} 404 Area does not exists 500 Unexpected server error DELETE Delete an existing area {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type id path ID of area to delete String Responses 200 Delete successfull 404 Area does not exists 500 Unexpected server error /api/audio/hardware/ GET Get a list of supported soundcards Responses 200 List of supported soundcards Name Located in Description Type index body Audio hardware ID Integer name body Audio hardware readable name String /api/audio/files/ GET Get a list of existing audio files Responses 200 Zero or more audio files Name Located in Description Type id body Auto generated ID String name body Artist and song name based on ID3 tag data String filename body The full path of the audio file String duration body Audio file duration in seconds Number filesize body Audio file size in bytes Number POST Upload a new audio file {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type audiofiles body The uploaded audio file {&quot;type&quot;=&amp;gt;&quot;array&quot;, &quot;items&quot;=&amp;gt;{&quot;type&quot;=&amp;gt;&quot;string&quot;}} Responses 200 Audio file is uploaded Name Located in Description Type id body Auto generated ID String name body Artist and song name based on ID3 tag data String filename body The full path of the audio file String duration body Audio file duration in seconds Number filesize body Audio file size in bytes Number 500 Unexpected server error /api/audio/files/{file} GET Get an existing audio file Parameters Name Located in Description Type file path ID of audio file String Responses 200 The requested audio file Name Located in Description Type id body Auto generated ID String name body Artist and song name based on ID3 tag data String filename body The full path of the audio file String duration body Audio file duration in seconds Number filesize body Audio file size in bytes Number 404 Audio file does not exists 500 Unexpected server error DELETE Delete an existing audio file {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type file path ID of audio file String Responses 200 The requested audio file is deleted 404 Audio file does not exists 500 Unexpected server error /api/buttons/hardware/ GET Get a list of supported buttons Responses 200 List of supported hardware Name Located in Description Type hardware body Button hardware type ID String name body Button hardware type name String /api/buttons/ GET Get a list of existing buttons Responses 200 Zero or more buttons Name Located in Description Type id body Auto generated ID String hardware body Button hardware type from ButtonHardware list String name body Name of the button String address body The address of the button String calibration body JSON data String Default: {} value body The current state of the button Number POST Add a new button {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type hardware body Button hardware type from ButtonHardware list String name body Name of the button String address body The address of the button String calibration body JSON data String Default: {} Responses 200 A new created button Name Located in Description Type id body Auto generated ID String hardware body Button hardware type from ButtonHardware list String name body Name of the button String address body The address of the button String calibration body JSON data String Default: {} value body The current state of the button Number 500 Unexpected server error /api/buttons/{id}/ GET Get a specific button Parameters Name Located in Description Type id path ID of button to return String Responses 200 The requested button Name Located in Description Type id body Auto generated ID String hardware body Button hardware type from ButtonHardware list String name body Name of the button String address body The address of the button String calibration body JSON data String Default: {} value body The current state of the button Number 404 Button does not exists 500 Unexpected server error PUT Update an existing button with new data {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type id path ID of button to update String hardware body Button hardware type from ButtonHardware list String name body Name of the button String address body The address of the button String calibration body JSON data String Default: {} Responses 200 The updated button Name Located in Description Type id body Auto generated ID String hardware body Button hardware type from ButtonHardware list String name body Name of the button String address body The address of the button String calibration body JSON data String Default: {} value body The current state of the button Number 404 Button does not exists 500 Unexpected server error DELETE Delete an existing button {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type id path ID of button to delete String Responses 200 Delete successfull 404 Button does not exists 500 Unexpected server error /api/buttons/{id}/history/ GET Get the history for a specific button for a period of 1 day Parameters Name Located in Description Type id path ID of button for which to get the history String Responses 200 Button history for 1 day Name Located in Description Type timestamp body Button measurement unix timestamp Integer value body Button measurement state Number 404 Button does not exists 500 Unexpected server error /api/buttons/{id}/history/{period}/ GET Get the history for a specific button for a period Parameters Name Located in Description Type id path ID of button to return String period path Period String Responses 200 Button history for {period} Name Located in Description Type timestamp body Button measurement unix timestamp Integer value body Button measurement state Number 404 Button does not exists 500 Unexpected server error /api/calendar/ GET Get existing calendars Parameters Name Located in Description Type start query Start date and time for calendar items String end query End date and time for calendar items String Responses 200 Zero or more calendars Name Located in Description Type id body Auto generated ID String summary body Event title String description body Event description String location body Event location String dtstart body Event start date and time String dtend body Event end date and time String all_day body True when the event is an all day event Boolean freq body Event repeat period String interval body Event repeat period value Integer repeatend body Event repeat end date and time String POST Add a new calendar event {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type summary body Event title String description body Event description String location body Event location String dtstart body Event start date and time String dtend body Event end date and time String all_day body True when the event is an all day event Boolean freq body Event repeat period String interval body Event repeat period value Integer repeatend body Event repeat end date and time String Responses 200 A new created calendar Name Located in Description Type id body Auto generated ID String summary body Event title String description body Event description String location body Event location String dtstart body Event start date and time String dtend body Event end date and time String all_day body True when the event is an all day event Boolean freq body Event repeat period String interval body Event repeat period value Integer repeatend body Event repeat end date and time String 500 Unexpected server error /api/calendar/{id}/ GET Get a specific calendar Parameters Name Located in Description Type id path ID of calendar to return String Responses 200 The requested calendar Name Located in Description Type id body Auto generated ID String summary body Event title String description body Event description String location body Event location String dtstart body Event start date and time String dtend body Event end date and time String all_day body True when the event is an all day event Boolean freq body Event repeat period String interval body Event repeat period value Integer repeatend body Event repeat end date and time String 404 Calendar does not exists 500 Unexpected server error PUT Update an existing calendar with new data {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type id path ID of calendar to update String summary body Event title String description body Event description String location body Event location String dtstart body Event start date and time String dtend body Event end date and time String all_day body True when the event is an all day event Boolean freq body Event repeat period String interval body Event repeat period value Integer repeatend body Event repeat end date and time String Responses 200 The updated calendar Name Located in Description Type id body Auto generated ID String summary body Event title String description body Event description String location body Event location String dtstart body Event start date and time String dtend body Event end date and time String all_day body True when the event is an all day event Boolean freq body Event repeat period String interval body Event repeat period value Integer repeatend body Event repeat end date and time String 404 Calendar does not exists 500 Unexpected server error DELETE Delete an existing calendar {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type id path ID of calendar to delete String Responses 200 Delete successfull 404 Calendar does not exists 500 Unexpected server error /api/calendar/download/ GET Download iCal Responses 200 The calendar in iCal format 404 Calendar does not exists 500 Unexpected server error /api/enclosures/ GET Get a list of existing enclosures Responses 200 Zero or more enclosures Name Located in Description Type id body Auto generated ID String name body Name of the enclosure String image body Enclosure image String areas body A list of areas that are in this enclosure Array of doors body A list of doors (button) that are in this enclosure Array of webcams body A list of webcams that are in this enclosure Array of POST Add a new enclosure {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type name body Name of the enclosure String image body Enclosure image String areas body A list of areas that are in this enclosure Array of doors body A list of doors (button) that are in this enclosure Array of webcams body A list of webcams that are in this enclosure Array of Responses 200 A new created enclosure Name Located in Description Type id body Auto generated ID String name body Name of the enclosure String image body Enclosure image String areas body A list of areas that are in this enclosure Array of doors body A list of doors (button) that are in this enclosure Array of webcams body A list of webcams that are in this enclosure Array of 500 Unexpected server error /api/enclosures/{id}/ GET Get a specific enclosure Parameters Name Located in Description Type id path ID of enclosure to return String Responses 200 The requested enclosure Name Located in Description Type id body Auto generated ID String name body Name of the enclosure String image body Enclosure image String areas body A list of areas that are in this enclosure Array of doors body A list of doors (button) that are in this enclosure Array of webcams body A list of webcams that are in this enclosure Array of 404 Enclosure does not exists 500 Unexpected server error PUT Update an existing enclosure with new data {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type id path ID of enclosure to update String name body Name of the enclosure String image body Enclosure image String areas body A list of areas that are in this enclosure Array of doors body A list of doors (button) that are in this enclosure Array of webcams body A list of webcams that are in this enclosure Array of Responses 200 The updated enclosure Name Located in Description Type id body Auto generated ID String name body Name of the enclosure String image body Enclosure image String areas body A list of areas that are in this enclosure Array of doors body A list of doors (button) that are in this enclosure Array of webcams body A list of webcams that are in this enclosure Array of 404 Enclosure does not exists 500 Unexpected server error DELETE Delete an existing enclosure {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type id path ID of enclosure to delete String Responses 200 Delete successfull 404 Enclosure does not exists 500 Unexpected server error /api/{action}/ POST Restart/reboot/shutdown TerrariumPI {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type action path Action to perform String Responses 200 Result of the action Name Located in Description Type message body Holds the return message from the server String Default: Action succeeded /api/logfile/download/ GET Download the logfile {&quot;Basic&quot;=&amp;gt;[]} Responses 200 Get the logfile in plain text /api/playlists/ GET Get a list of existing playlists Responses 200 Zero or more playlists Name Located in Description Type id body Auto generated ID String name body Name of the playlist String volume body Volume for this playlist Number Default: 80 shuffle body Enable shuffle for this playlist Boolean repeat body Enable repeating for this playlist Boolean files body List of audio files Array of POST Add a new playlist {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type id body Auto generated ID String name body Name of the playlist String volume body Volume for this playlist Number Default: 80 shuffle body Enable shuffle for this playlist Boolean repeat body Enable repeating for this playlist Boolean files body List of audio files Array of Responses 200 A new created playlist Name Located in Description Type id body Auto generated ID String name body Name of the playlist String volume body Volume for this playlist Number Default: 80 shuffle body Enable shuffle for this playlist Boolean repeat body Enable repeating for this playlist Boolean files body List of audio files Array of 500 Unexpected server error /api/playlists/{id}/ GET Get a specific playlist Parameters Name Located in Description Type id path ID of playlist to return String Responses 200 The requested playlist Name Located in Description Type id body Auto generated ID String name body Name of the playlist String volume body Volume for this playlist Number Default: 80 shuffle body Enable shuffle for this playlist Boolean repeat body Enable repeating for this playlist Boolean files body List of audio files Array of 404 Playlist does not exists 500 Unexpected server error PUT Update an existing playlist with new data {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type id path ID of playlist to update String id body Auto generated ID String name body Name of the playlist String volume body Volume for this playlist Number Default: 80 shuffle body Enable shuffle for this playlist Boolean repeat body Enable repeating for this playlist Boolean files body List of audio files Array of Responses 200 The updated playlist Name Located in Description Type id body Auto generated ID String name body Name of the playlist String volume body Volume for this playlist Number Default: 80 shuffle body Enable shuffle for this playlist Boolean repeat body Enable repeating for this playlist Boolean files body List of audio files Array of 404 Playlist does not exists 500 Unexpected server error DELETE Delete an existing playlist {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type id path ID of playlist to delete String Responses 200 Delete successfull 404 Playlist does not exists 500 Unexpected server error /api/relays/hardware/ GET Get a list of supported relays Responses 200 List of supported hardware Name Located in Description Type hardware body Relay hardware type ID String name body Relay hardware type name String /api/relays/scan/ POST Scan for new relays {&quot;Basic&quot;=&amp;gt;[]} Responses 200 Found zero or more new relays Name Located in Description Type message body Holds the return message from the server String Default: Action succeeded /api/relays/ GET Get a list of existing relays Responses 200 Zero or more relays Name Located in Description Type id body Auto generated ID String hardware body Relay hardware type from RelayHardware list String name body Name of the relay String address body The address of the relay String wattage body The amount of power in watts the relay uses when on Number Default: 0 flow body The amount of water in liter per minute the relay uses when on Number Default: 0 manual_mode body Is the relay in manual mode Boolean replacement body Last replacement date and time of the attached hardware String Default: 1970-01-01 00:00:00 calibration body JSON data Object value body The current state of the relay Number dimmer body Is the relay a dimmer Boolean POST Add a new relay {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type hardware body Relay hardware type from RelayHardware list String name body Name of the relay String address body The address of the relay String wattage body The amount of power in watts the relay uses when on Number Default: 0 flow body The amount of water in liter per minute the relay uses when on Number Default: 0 calibration body JSON data Object Responses 200 A new created relay Name Located in Description Type id body Auto generated ID String hardware body Relay hardware type from RelayHardware list String name body Name of the relay String address body The address of the relay String wattage body The amount of power in watts the relay uses when on Number Default: 0 flow body The amount of water in liter per minute the relay uses when on Number Default: 0 manual_mode body Is the relay in manual mode Boolean replacement body Last replacement date and time of the attached hardware String Default: 1970-01-01 00:00:00 calibration body JSON data Object value body The current state of the relay Number dimmer body Is the relay a dimmer Boolean 500 Unexpected server error /api/relays/{id}/ GET Get a specific relay Parameters Name Located in Description Type id path ID of relay to return String Responses 200 The requested relay Name Located in Description Type id body Auto generated ID String hardware body Relay hardware type from RelayHardware list String name body Name of the relay String address body The address of the relay String wattage body The amount of power in watts the relay uses when on Number Default: 0 flow body The amount of water in liter per minute the relay uses when on Number Default: 0 manual_mode body Is the relay in manual mode Boolean replacement body Last replacement date and time of the attached hardware String Default: 1970-01-01 00:00:00 calibration body JSON data Object value body The current state of the relay Number dimmer body Is the relay a dimmer Boolean 404 Relay does not exists 500 Unexpected server error PUT Update an existing relay with new data {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type id path ID of relay to update String hardware body Relay hardware type from RelayHardware list String name body Name of the relay String address body The address of the relay String wattage body The amount of power in watts the relay uses when on Number Default: 0 flow body The amount of water in liter per minute the relay uses when on Number Default: 0 calibration body JSON data Object Responses 200 The updated relay Name Located in Description Type id body Auto generated ID String hardware body Relay hardware type from RelayHardware list String name body Name of the relay String address body The address of the relay String wattage body The amount of power in watts the relay uses when on Number Default: 0 flow body The amount of water in liter per minute the relay uses when on Number Default: 0 manual_mode body Is the relay in manual mode Boolean replacement body Last replacement date and time of the attached hardware String Default: 1970-01-01 00:00:00 calibration body JSON data Object value body The current state of the relay Number dimmer body Is the relay a dimmer Boolean 404 Relay does not exists 500 Unexpected server error DELETE Delete an existing relay {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type id path ID of relay to delete String Responses 200 Delete successfull 404 Relay does not exists 500 Unexpected server error /api/relays/{id}/history/ GET Get the history for a specific relay for a period of 1 day Parameters Name Located in Description Type id path ID of relay for which to get the history String Responses 200 Relay history for 1 day Name Located in Description Type timestamp body Relay measurement unix timestamp Integer value body Relay measurement state Number 404 Relay does not exists 500 Unexpected server error /api/relays/{id}/history/{period}/ GET Get the history for a specific relay for a period Parameters Name Located in Description Type id path ID of relay to return String period path Period String Responses 200 Relay history for {period} Name Located in Description Type timestamp body Relay measurement unix timestamp Integer value body Relay measurement state Number 404 Relay does not exists 500 Unexpected server error /api/relays/{id}/export/ GET Get the export for a specific relay for a period of 1 day {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type id path ID of relay for which to get the export String Responses 200 Relay export for 1 day 404 Relay does not exists 500 Unexpected server error /api/relays/{id}/export/{period}/ GET Get the export for a specific relay for a period {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type id path ID of relay to return String period path Period String Responses 200 Relay export for {period} 404 Relay does not exists 500 Unexpected server error /api/relays/{id}/{action}/ POST Change relay {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type id path ID of relay String action path Relay action String Responses 200 Return the new state Name Located in Description Type message body Holds the return message from the server String Default: Action succeeded 404 Relay does not exists 500 Unexpected server error /api/sensors/hardware/ GET Get a list of supported sensors Responses 200 List of supported hardware Name Located in Description Type hardware body Sensor hardware type ID String name body Sensor hardware type name String types body List of supported sensor types Array of /api/sensors/scan/ POST Scan for new sensors Responses 200 Found zero or more new sensors Name Located in Description Type message body Holds the return message from the server String Default: Action succeeded /api/sensors/ GET Get a list of existing sensors Responses 200 Zero or more sensors Name Located in Description Type id body Auto generated ID String hardware body Sensor hardware type from SensorHardware list String type body The sensor measurement type String name body Name of the sensor String address body The address of the sensor String limit_min body The minimum value which is a valid measurement Number Default: 0 limit_max body The maximum value which is a valid measurement Number Default: 100 alarm_min body The minimum value which triggers the alarm Number Default: 0 alarm_max body The maximum value which triggers the alarm Number Default: 100 max_diff body The maximum difference between two measurements that is valid Number Default: 0 exclude_avg body Exclude this sensor from average calculation on the dashboard Boolean calibration body JSON data Object value body The current value of the sensor Number alarm body Is there a high or low alarm Boolean error body Is there a hardware problem with the sensor Boolean POST Add a new sensor {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type hardware body Sensor hardware type from SensorHardware list String type body The sensor measurement type String name body Name of the sensor String address body The address of the sensor String limit_min body The minimum value which is a valid measurement Number Default: 0 limit_max body The maximum value which is a valid measurement Number Default: 100 alarm_min body The minimum value which triggers the alarm Number Default: 0 alarm_max body The maximum value which triggers the alarm Number Default: 100 max_diff body The maximum difference between two measurements that is valid Number Default: 0 exclude_avg body Exclude this sensor from average calculation on the dashboard Boolean calibration body JSON data Object Responses 200 A new created sensor Name Located in Description Type id body Auto generated ID String hardware body Sensor hardware type from SensorHardware list String type body The sensor measurement type String name body Name of the sensor String address body The address of the sensor String limit_min body The minimum value which is a valid measurement Number Default: 0 limit_max body The maximum value which is a valid measurement Number Default: 100 alarm_min body The minimum value which triggers the alarm Number Default: 0 alarm_max body The maximum value which triggers the alarm Number Default: 100 max_diff body The maximum difference between two measurements that is valid Number Default: 0 exclude_avg body Exclude this sensor from average calculation on the dashboard Boolean calibration body JSON data Object value body The current value of the sensor Number alarm body Is there a high or low alarm Boolean error body Is there a hardware problem with the sensor Boolean 500 Unexpected server error /api/sensors/{id}/ GET Get a specific sensor Parameters Name Located in Description Type id path ID of sensor to return String Responses 200 The requested sensor Name Located in Description Type id body Auto generated ID String hardware body Sensor hardware type from SensorHardware list String type body The sensor measurement type String name body Name of the sensor String address body The address of the sensor String limit_min body The minimum value which is a valid measurement Number Default: 0 limit_max body The maximum value which is a valid measurement Number Default: 100 alarm_min body The minimum value which triggers the alarm Number Default: 0 alarm_max body The maximum value which triggers the alarm Number Default: 100 max_diff body The maximum difference between two measurements that is valid Number Default: 0 exclude_avg body Exclude this sensor from average calculation on the dashboard Boolean calibration body JSON data Object value body The current value of the sensor Number alarm body Is there a high or low alarm Boolean error body Is there a hardware problem with the sensor Boolean 404 Sensor does not exists 500 Unexpected server error PUT Update an existing sensor with new data {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type id path ID of sensor to update String hardware body Sensor hardware type from SensorHardware list String type body The sensor measurement type String name body Name of the sensor String address body The address of the sensor String limit_min body The minimum value which is a valid measurement Number Default: 0 limit_max body The maximum value which is a valid measurement Number Default: 100 alarm_min body The minimum value which triggers the alarm Number Default: 0 alarm_max body The maximum value which triggers the alarm Number Default: 100 max_diff body The maximum difference between two measurements that is valid Number Default: 0 exclude_avg body Exclude this sensor from average calculation on the dashboard Boolean calibration body JSON data Object Responses 200 The updated sensor Name Located in Description Type id body Auto generated ID String hardware body Sensor hardware type from SensorHardware list String type body The sensor measurement type String name body Name of the sensor String address body The address of the sensor String limit_min body The minimum value which is a valid measurement Number Default: 0 limit_max body The maximum value which is a valid measurement Number Default: 100 alarm_min body The minimum value which triggers the alarm Number Default: 0 alarm_max body The maximum value which triggers the alarm Number Default: 100 max_diff body The maximum difference between two measurements that is valid Number Default: 0 exclude_avg body Exclude this sensor from average calculation on the dashboard Boolean calibration body JSON data Object value body The current value of the sensor Number alarm body Is there a high or low alarm Boolean error body Is there a hardware problem with the sensor Boolean 404 Sensor does not exists 500 Unexpected server error DELETE Delete an existing sensor {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type id path ID of sensor to delete String Responses 200 Delete successfull 404 Sensor does not exists 500 Unexpected server error /api/sensors/{type}/ GET Get all sensor of {type} Parameters Name Located in Description Type type path A valid sensor type String Responses 200 The requested sensors Name Located in Description Type id body Auto generated ID String hardware body Sensor hardware type from SensorHardware list String type body The sensor measurement type String name body Name of the sensor String address body The address of the sensor String limit_min body The minimum value which is a valid measurement Number Default: 0 limit_max body The maximum value which is a valid measurement Number Default: 100 alarm_min body The minimum value which triggers the alarm Number Default: 0 alarm_max body The maximum value which triggers the alarm Number Default: 100 max_diff body The maximum difference between two measurements that is valid Number Default: 0 exclude_avg body Exclude this sensor from average calculation on the dashboard Boolean calibration body JSON data Object value body The current value of the sensor Number alarm body Is there a high or low alarm Boolean error body Is there a hardware problem with the sensor Boolean 404 Sensor type does not exists 500 Unexpected server error /api/sensors/{filter}/history/ GET Get the history for a specific sensor or sensor type. Parameters Name Located in Description Type filter path Either a sensor ID or sensor type can be used as filter String Responses 200 Sensor history for 1 day Name Located in Description Type timestamp body Sensor measurement unix timestamp Integer value body Sensor measurement value Number alarm_min body Sensor measurement low alarm value Number alarm_max body Sensor measurement high alarm value Number 404 Sensor does not exists 500 Unexpected server error /api/sensors/{filter}/history/{period}/ GET Get the history for a specific sensor or sensor type. Parameters Name Located in Description Type filter path Either a sensor ID or sensor type can be used as filter String period path Period String Responses 200 Sensor history for {period} Name Located in Description Type timestamp body Sensor measurement unix timestamp Integer value body Sensor measurement value Number alarm_min body Sensor measurement low alarm value Number alarm_max body Sensor measurement high alarm value Number 404 Sensor does not exists 500 Unexpected server error /api/sensors/{filter}/export/ GET Get the export for a specific sensor or sensor type. {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type filter path Either a sensor ID or sensor type can be used as filter String Responses 200 Sensor export for 1 day 404 Sensor does not exists 500 Unexpected server error /api/sensors/{filter}/export/{period}/ GET Get the export for a specific sensor or sensor type. {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type filter path Either a sensor ID or sensor type can be used as filter String period path Period String Responses 200 Sensor export for {period} 404 Sensor does not exists 500 Unexpected server error /api/system_status/ GET Get the current state Responses 200 System status Name Located in Description Type is_day body Is the system in day mode Boolean uptime body System uptime in seconds Integer load body System load in percentage and absolute values. It contains the current, last 5 minutes and last 15 minutes load Object cpu_temperature body The current system CPU temperature Integer memory body System memory usage status Object storage body System disk usage status Object /api/settings/ GET Get all settings {&quot;Basic&quot;=&amp;gt;[]} Responses 200 All settings Name Located in Description Type id body Setting ID String value body Setting value String PUT Update multiple settings {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type body body All settings to change in one action {&quot;type&quot;=&amp;gt;&quot;array&quot;, &quot;items&quot;=&amp;gt;{&quot;$ref&quot;=&amp;gt;&quot;#/definitions/Setting&quot;}} Responses 200 All settings Name Located in Description Type message body Holds the return message from the server String Default: Action succeeded 400 Password fields do not match. POST Add a new setting {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type value body Setting value String Responses 200 All settings Name Located in Description Type id body Setting ID String value body Setting value String /api/settings/{id}/ GET Get a setting {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type id path Setting ID String Responses 200 All settings Name Located in Description Type id body Setting ID String value body Setting value String PUT Update a setting {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type id path The setting to update String value body Setting value String Responses 200 All settings Name Located in Description Type message body Holds the return message from the server String Default: Action succeeded 400 Password fields do not match. DELETE Delete a setting {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type id path The setting to delete String Responses 200 All settings Name Located in Description Type message body Holds the return message from the server String Default: Action succeeded 404 Setting does not exists /api/weather/ GET Get weather data Responses 200 Weather data Name Located in Description Type location body The location based on the weather setting data Object sun body The sun rise and set values based on the weather setting data Object is_day body Is it currently day? Boolean indicators body Temperature and other indicators based on locale Object credits body Credits information from the free weather source Object forecast body A seven day weather forecast Array of Object /api/weather/forecast/ GET Get weather temperature forecast Responses 200 Weather forecast data Name Located in Description Type value body Weather forecast temperature in the selected temperature indicator value Number timestamp body Weather forecast unix timestamp Number /api/webcams/hardware/ GET Get a list of supported webcams Responses 200 List of supported hardware Name Located in Description Type hardware body Webcam hardware ID String name body Webcam hardware readable name String /api/webcams/ GET Get a list of existing webcams Responses 200 Zero or more webcams Name Located in Description Type id body Auto generated ID String hardware body Webcam hardware type from WebcamHardware list String name body Name of the webcam String address body The address of the webcam String width body The webcam resolution width in pixels Integer height body The webcam resolution height in pixels Integer rotation body The webcam rotation String awb body The webcam white balance mode String is_live body Is the webcam a live streaming webcam Boolean flash body The relays that works like a flash before taking a picture from the webcam Array of archive body Webcam archiving setting Object motion body Webcam motion settings when archiving is set to motion Object markers body A list of markers for the webcam with live sensor data Array of POST Add a new webcam {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type hardware body Webcam hardware type from WebcamHardware list String name body Name of the webcam String address body The address of the webcam String width body The webcam resolution width in pixels Integer height body The webcam resolution height in pixels Integer rotation body The webcam rotation String awb body The webcam white balance mode String flash body The relays that works like a flash before taking a picture from the webcam Array of archive body Webcam archiving setting Object motion body Webcam motion settings when archiving is set to motion Object markers body A list of markers for the webcam with live sensor data Array of Responses 200 A new created webcam Name Located in Description Type id body Auto generated ID String hardware body Webcam hardware type from WebcamHardware list String name body Name of the webcam String address body The address of the webcam String width body The webcam resolution width in pixels Integer height body The webcam resolution height in pixels Integer rotation body The webcam rotation String awb body The webcam white balance mode String is_live body Is the webcam a live streaming webcam Boolean flash body The relays that works like a flash before taking a picture from the webcam Array of archive body Webcam archiving setting Object motion body Webcam motion settings when archiving is set to motion Object markers body A list of markers for the webcam with live sensor data Array of 500 Unexpected server error /api/webcams/{id}/ GET Get a specific webcam Parameters Name Located in Description Type id path ID of webcam to return String Responses 200 The requested webcam Name Located in Description Type id body Auto generated ID String hardware body Webcam hardware type from WebcamHardware list String name body Name of the webcam String address body The address of the webcam String width body The webcam resolution width in pixels Integer height body The webcam resolution height in pixels Integer rotation body The webcam rotation String awb body The webcam white balance mode String is_live body Is the webcam a live streaming webcam Boolean flash body The relays that works like a flash before taking a picture from the webcam Array of archive body Webcam archiving setting Object motion body Webcam motion settings when archiving is set to motion Object markers body A list of markers for the webcam with live sensor data Array of 404 Webcam does not exists 500 Unexpected server error PUT Update an existing webcam with new data {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type id path ID of webcam to update String hardware body Webcam hardware type from WebcamHardware list String name body Name of the webcam String address body The address of the webcam String width body The webcam resolution width in pixels Integer height body The webcam resolution height in pixels Integer rotation body The webcam rotation String awb body The webcam white balance mode String flash body The relays that works like a flash before taking a picture from the webcam Array of archive body Webcam archiving setting Object motion body Webcam motion settings when archiving is set to motion Object markers body A list of markers for the webcam with live sensor data Array of Responses 200 The updated webcam Name Located in Description Type id body Auto generated ID String hardware body Webcam hardware type from WebcamHardware list String name body Name of the webcam String address body The address of the webcam String width body The webcam resolution width in pixels Integer height body The webcam resolution height in pixels Integer rotation body The webcam rotation String awb body The webcam white balance mode String is_live body Is the webcam a live streaming webcam Boolean flash body The relays that works like a flash before taking a picture from the webcam Array of archive body Webcam archiving setting Object motion body Webcam motion settings when archiving is set to motion Object markers body A list of markers for the webcam with live sensor data Array of 404 Webcam does not exists 500 Unexpected server error DELETE Delete an existing webcam {&quot;Basic&quot;=&amp;gt;[]} Parameters Name Located in Description Type id path ID of webcam to delete String Responses 200 Delete successfull 404 Webcam does not exists 500 Unexpected server error /api/webcams/{id}/archive/{period}/ GET Get a list of archived images for the selected period Parameters Name Located in Description Type id path ID of webcam for which to get the archive String period path The date for which to get archive images. Format %Y/%m/%d String Responses 200 Webcam history for 1 day Name Located in Description Type String 404 Webcam does not exists 500 Unexpected server error "},{"title": "Donate","url": "/TerrariumPI/donate/","categories": "","tags": "","date": "2021-05-05 10:07:10 +0200","snippet" : "If you like to donate me for developing this software, you are free to do so and is highly appreciated.You can donate through: Paypal: Monero: 42wnSZopYj52kwQFM9sNaZRaCmoT3Q9MEFKKsbbgqfD6CpwQM3RwLTp2jLPiB35EX7NEZLSvk2TrMi7WTcxvGps4LrtPPj5 Ether:0x2Fcb59770A31611aad9C25E04a6bA52E7b8E8437Thanks!"},{"title": "FAQ","url": "/TerrariumPI/faq/","categories": "","tags": "","date": "2021-08-17 15:23:36 +0200","snippet" : "Here you can find the most frequently asked question. Cleanup database If TerrariumPI is running for years it happens that the database get rather big and therefore slowing down the system. Also deleting the data will not give back the disk space. So there is a script which can cleanup the database and reclaim disk space by reducing the database.In order to cleanup the database, make sure that TerrariumPI is stopped! Else there is a possibility on database corruption.When you cleanup the database, we need at least the same amount of free space as the size of the database. The script will check this. Make sure you have enough free diskspace. If this is a problem, you can also try to download the database and run this on a desktop/laptop.The cleanup can take up to 10 hours!. So make sure your environment is stable and can survive for that period. Enter the TerrariumPI folder: cd /home/pi/TerrariumPI/ Enable Python3 virtual environment: source venv/bin/activate Go to the folder â€˜contribâ€™: cd contrib Run the command: python db_cleanup.pyThis will start the script. It will first show some information about required disk space and how much data will be kept.123456789101112131415161718This script will cleanup your terrariumpi.db file. We will keep 420 days, 0:00:00 of data from now. If you want to make a backup first, please enter no and make your backup.Database size: 2.04 GB, free diskspace: 5.19 GBWould you like to continue? Enter yes to start. Anything else will abort.yesStarting cleaning up table &#39;SensorHistory&#39;. Deleting data older then 2022-02-20 18:27:17 in batches of 10000 records. This could take some time...Analyzing total rows: 13542131 from 2022-02-20 18:14 till 2023-04-16 03:56. Took 1.43 secondsAnalyzing rows to clean up: 322 from 2022-02-20 18:14 till 2022-02-20 18:27. Took 1.12 secondsRemoving 322 rows (0.00%) of data in 1 steps of 10000 rows.0%....10%....20%....30%....40%....50%....60%....70%....80%....90%....100%Clean up is done in 1.20 secondsStarting cleaning up table &#39;ButtonHistory&#39;. Deleting data older then 2022-02-20 18:27:17 in batches of 10000 records. This could take some time...Analyzing total rows: 23094 from 2022-02-20 19:00 till 2023-04-16 03:00. Took 0.01 secondsAnalyzing rows to clean up: No data, nothing to do!Start reclaiming lost space. This will rebuild the database and give all the delete space back. This will take a lot of timeDone in 10.43 secondsDatabase is now cleaned and should be reduced in size:Database size: 2.04 GB, free diskspace: 172.71 GBRestart TerrariumPI and check if the sensor graphs still working. If it is al working, remove the file ../data/terrariumpi.db.oldWhen this done, you can restart TerrariumPI again. Check if all graphs are working. If that is the case, you can delete the backup database at the location â€˜data/terrariumpi.db.oldâ€™: rm ../data/terrariumpi.db.old Custom logging By default all logging is done in the folder log where the actual log files are written to a temporary memory share. This is done to reduce the write wear on the SD card. A downside is that when the Pi reboots, all log info of that day is gone. During the night, the log file will be archived and that is stored on the SD card. So archived log files will survive reboots.In order to change the default logging of TerrariumPI you only need to create your own custom logging configuration file with the name logging.custom.cfg and place that in the log folder. So start with:cp logging.cfg log/logging.custom.cfgAnd start editing the log/logging.custom.cfg file with an editor. After editing restart TerrariumPI and the new logging will be loaded.Enable debugIn order to enable debug messages add the fileHandlerDebug handler to the handlers in section [logger_root]Syslog (local and remote)In order to enable (remote) syslog logging add the syslogHandler handler to the handlers in section [logger_root]. Then you have to configure to use either the local syslog server or a remote syslog server. By default it uses the local syslog. To use remote change:&#39;/dev/log&#39; to (&#39;hostip&#39;,portnr)Local: args=(&#39;/dev/log&#39;,&#39;local6&#39;)Remote: args=((&#39;192.168.1.1&#39;,514),&#39;local6&#39;)Next you need to tell Syslog which facility it is using. The default is LOCAL6. To enable this, create a file in the folder /etc/rsyslog.d for example:/etc/rsyslog.d/terrariumpi.confAnd add then:local6.* /var/log/terrariumpi.logFinally restart rsyslog and you should receive log messages from TerrariumPI Energenie USB is not found / auto detected Some Energenie USB devices are to new to detect with the current software. In order to make those Energenie USB devices work, you need to manually update a software package and restart TerrariumPI.Upgrade steps can be found hereThis is already done in the Docker image. How to contact There are several ways to contact the developers of TerrariumPI. Here you can see how: Github for feature requests and bugs Try the TerrariumPI Matrix channel Use the email icon in the lower left part of the menu. How to debug TerrariumPI Stop the TerrariumPI service: sudo service terrariumpi stop. Enter the TerrariumPI folder: cd /home/pi/TerrariumPI/ Enable Python3 virtual environment: source venv/bin/activate Manual start TerrariumPI: python terrariumPI.pyThis should start the TerrariumPI in console mode. So all errors should now be visible to the console.When you are done debugging, you can press Ctrl+C once to stop TerrariumPI. How to delete a sensor/relay/button TerrariumPI When you want to delete a sensor/relay/button that has been used for more than 3 months, you should use the manual/debug way to delete the sensor through the GUI. This is due to the time it takes to delete the data from the Sqlite database. If this takes more then 2 minutes, the systemd watchdog will restart TerrariumPI and the delete will not succeed.In order to not have the problem of the 2 minutes watchdog timeout, you have to run TerrariumPI in debug mode. You can stop TerrariumPI as follows.When running in debug mode, you can just go the sensor/relay/button and delete it. Now it does not matter how much time it takes. Just wait until done.If the deleting is done, stop the debug version of TerrariumPI and start normally. How to start/stop/restart and disable/enable TerrariumPI TerrariumPI is using systemd for startup. Here you can find the commands to manually start, stop or restart it. Also there is an option to disable or enable TerrariumPI at boot up.Startrun sudo service terrariumpi start to start TerrariumPIStoprun sudo service terrariumpi stop to stop TerrariumPIRestartrun sudo service terrariumpi restart to restart TerrariumPIEnable startuprun sudo systemctl enable terrariumpi to enable TerrariumPI at startupDisable startuprun sudo systemctl disable terrariumpi to disable TerrariumPI at startup How to use a relay multiple times A much asked question is how can a relay used in 2 or more areas. By default this is not possible, due to the a relay can only be used once policy. This made it a bit easier to make sure that relays stays in the correct state. Even after power failures.But there is a solution. In this FAQ we explain how to setup a relay to used in multiple areas. This can either be a relay or a dimmer. It should work for both.Add original relayFirst add the original relay to TerrariumPI and make sure it works. Enter the power usage and the water usage values. But never use this original relay in any area.Create script relay code Create a scripts folder if not exists: mkdir scripts Copy duplicate_switch.py to the scripts folder: cp contrib/duplicate_switch.py scripts/ Edit the new script to set some settings: nano scripts/duplicate_switch.py Edit the variables RELAY_ID, USERNAME, PASSWORD. The RELAY_ID can be found on the page: http://[TerrariumPI_IP]:8090/api/relays/ When this is all done, you can test if it al works by running the command: scripts/duplicate_switch.py 100 which should toggle on the original relay.Duplicate the relayNow it is easy to duplicate this relay a couple of times. Make sure you are on the scripts folder where the file duplicate_switch.py is placed.Now by running the following command we will create a symlink to the original file. Now you will have 2 files with the same contents and will the same original relay.1ln -s duplicate_switch.py duplicate_switch_2.pyThis can be done multiple times. Make sure you have a unique name for every new symlink.Adding the new relays to TerrariumPINow add the new scripts as new script relay to TerrariumPI. Use as address /home/pi/TerrariumPI/scripts/duplicate_switch.py.But here, do not enter the power and water flow values. Else the amount of used power and water will be counted double. Which is not correct.Now you can use the new script relay in an area. How to use remote data It is possible to use remote data with TerrariumPI. At the moment, only JSON and plain text are supported as content types.Rate limitsIf you use a sensor, relay or any other remote service, make sure that the other side can handle a request every 30 seconds. This is the frequency of the updates.Url formatThe remote data url is a full url to the JSON output appended with a dash â€˜#â€™ and the JSON traversal pathhttp(s)://remote.server.com:portnumber/path_to_json_output#json/traversal/pathExampleRemote source url: https://terrarium.theyosh.nl/api/sensors/e39b7d7931f8db191cedd83f3c80cec4/json output:12345678910111213141516171819{ &quot;id&quot;: &quot;e39b7d7931f8db191cedd83f3c80cec4&quot;, &quot;hardware&quot;: &quot;owfs&quot;, &quot;type&quot;: &quot;temperature&quot;, &quot;name&quot;: &quot;Midden links&quot;, &quot;address&quot;: &quot;2653D18D0100006A&quot;, &quot;limit_min&quot;: 10, &quot;limit_max&quot;: 45, &quot;alarm_min&quot;: 20, &quot;alarm_max&quot;: 30, &quot;max_diff&quot;: 0, &quot;exclude_avg&quot;: false, &quot;calibration&quot;: { &quot;offset&quot;: 0 }, &quot;value&quot;: 23.7188, &quot;alarm&quot;: false, &quot;error&quot;: false}json traversal path: valueConstruct full url by combining the remote source url and the json traversal path joining by a dash â€˜#â€™. Full remote source url: https://terrarium.theyosh.nl/api/sensors/e39b7d7931f8db191cedd83f3c80cec4/#value and that will return the value of â€˜23.7188â€™And for the calibration offset value you need the path #calibration/offset Reset authentication When you loose your password, there is no way to retrieve it. So you need to manually reset it. Use the following steps to clear your existing password, and generate a new one. Stop TerrariumPI (FAQ) Enter the TerrariumPI folder cd /home/pi/TerrariumPI/data Load the database sqlite3 terrariumpi.db Delete admin password delete from Setting where id = &#39;password&#39;; Exit sqlite3 by pressing Ctrl+D Start TerrariumPI (FAQ)Now you should be able to login with chosen username and password password Restoring backup files If you have made regular backups, than you can restore it with the following steps. If the backup has become corrupted, follow these steps first. Shutdown TerrariumPI Remove the old files in data if there are any. rm data/* Place the backup files in the data folder. Place custom logging or webcam archives back in place if needed. Start TerrariumPIThis should start TerrariumPI with the backup-ed data. sqlite3.DatabaseError: database disk image is malformed It can happen that the database gets corrupted. The error message you will get is something like sqlite3.DatabaseError: database disk image is malformedThis can be fixed by replacing it with a backup database. If you do not have backup of that file or the backup is to old, you can try the following steps: Make sure TerrariumPI 4 is not running: sudo service terrariumpi stop Enter the TerrariumPI 4 folder and enable the Python environment: cd /home/pi/TerrariumPI source venv/bin/activate Enter the contrib folder: cd contrib Run the fix_db.py script and answer the questions: ./fix_db.py. This will take some time. When done, the database should be restored. Start TerrariumPI 4: sudo service terrariumpi startA backup of the broken database is left at data/terrariumpi.db.broken. You can delete this database when TerrariumPI is running again. rm data/terrariumpi.db.brokenIf this happens a lot, you could look at the FAQ item: Tune database settings to improve the database storage. Tune database settings Currently the database SQLITE3 settings are setup for speed. And therefore it cannot handle power outages well. If you need for what ever reason a different SQLITE3 setup, you can create a file called data/.database-env with the following contents:1[pragma setting name]=[value]All SQLITE3 pragmas should be supported. Make sure you use the correct pragma name and value. Only the entered values will be overwritten from the default.For example the current defaults are:12345auto_vacuum=NONEcache_size=-10000journal_mode=WALsynchronous=OFFtemp_store=MEMORYIf you need more stability you can use the following settings:1synchronous=FULL What is the default login The default login name is admin with password password. Make sure you change it after installation at the system setting page. Which files to backup If you are running the software for a while, it is handy to backup some files in case of SD card corruption or any other reason that you have to reinstall the software. So here is a list of files that should be saved at a regular basis: data/* - Here is the database and calendar data stored log/logging.custom.cfg (optional) webcam/archive/* (optional) - Here you can find all the archived images of the used webcamsWarningDue to the nature of TerrariumPI, the database can get corrupted during creating a backup. This is due the fact that at least every 30 seconds the database is updated. And that could case that the latest data is not backup-ed correctly. This can be fixed by using the database fix script. After fixing you will probably miss about the last 30 seconds till 30 minutes of data. Which is mostly sensor data. "},{"title": "Categories","url": "/TerrariumPI/categories/","categories": "","tags": "","date": "2021-04-10 23:44:51 +0200","snippet" : ""},{"title": "Tags","url": "/TerrariumPI/tags/","categories": "","tags": "","date": "2021-04-10 23:44:51 +0200","snippet" : ""},{"title": "Denkovi V2","url": "/TerrariumPI/hardware/relay/denkovi-v2/","categories": "Hardware, Relay","tags": "relay, denkovi","date": "2021-08-10 14:44:55 +0200","snippet" : "InformationThe second version of our popular USB 4 Relay Board with several improvements. It comes with MCP2200 chip-set, 4 SPDT Relays each rated with up to 10A, relays states saving in internal EEPROM and improved USB interference resistance. Suitable for home automation applications, hobby projects, industrial automation. The free DRM / DRMv3 software allows to control relays manually, create timers (weekly and calendar) and multivibrators, use date and time for alarms. We have developed and tool for control from command line. We provide various software examples.Denkovi Assembly Electronics ltd.InstallationThis is already included in the Docker image.As the license of Denkovi does not allow to ship their command line tool with my software. Therefore you have to download and install it manually.Make sure you have Java installed:1sudo apt install openjdk-11-jre-headlessDownloadDownload the Denkovi Command line tool from: https://denkovi.com/denkovi-relay-command-line-tool and unpack it into the directory 3rdparty/DenkoviRelayCommandLineTool/.Then either rename the jar file to DenkoviRelayCommandLineTool.jar or make a symlink to it.The software expects the following file to exists: 3rdparty/DenkoviRelayCommandLineTool/DenkoviRelayCommandLineTool.jar from the root TerrariumPI directory.DockerFor docker please put the jar file in the Docker volume /TerrariumPI/3rdparty/DenkoviRelayCommandLineTool. Depending on your setup look in your docker-compose.yaml file. Here also make sure the file is called DenkoviRelayCommandLineTool.jar inside the volume.SetupIn order to use the Denkovi V2 use the following settings:Mandatory Hardware Denkovi Relay v2 (X sockets) Address Enter the relay number 1 - X. Optional you can enter the Serial address of the board if you have multiple relay boards like: 1,0035685Other settings can be found at the relay setup information"},{"title": "1-Wire sensor","url": "/TerrariumPI/hardware/sensor/1-wire-sensor/","categories": "Hardware, Sensor","tags": "sensor, 1-wire, waterproof, temperature, humidity","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationUsing the 1-Wire bus is an easy way to add multiple sensors. This can be temperature or humidity sensors. During the startup of TerrariumPI all the sensors that are connected to the 1-Wire bus will be auto detected.The 1-Wire bus is enabled by the installer and therefore, it will work out of the box. Use physical pin 7 (GPIO 4) for the data wire.DS18B20An easy to use temperature sensor is the DS18B20 sensor Make sure you use a 4.7K resistor when connecting 1 or more DS18B20 sensors.More information â€¦SetupAuto detectThis sensor will be auto detected during startup or added by â€˜Scan sensorsâ€™ in the menu.In order to use the 1-Wire sensor use the following settings:Mandatory Hardware 1-Wire sensor Types humidity, temperature Address Enter the symlink folder name that are available at /sys/bus/w1/devices/Ex: 28-0115b231f3ffOther settings can be found at the sensor setup information"},{"title": "Sequent Microsystems 4 Relay Card","url": "/TerrariumPI/hardware/relay/sequent-microsystems-4-relay-card/","categories": "Hardware, Relay","tags": "relay, i2c, 4relay","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationDrive 8A/240VAC loads and read 3V to 240V, AC or DC, opto-isolated inputs for all your Home or Industrial Automation ProjectsPerfect add-on to your project when you have to control large number of heavy duty AC loads and/or you have to read wide range inputs. Stackable to 8 layers, the card can add up to 32 relays to each Raspberry Pi in a very compact form factor. In addition, you can read up to 32 opto-isolated inputs.Pluggable connectors make the 4-RELAYS card easy to use when multiple cards are stacked up. All relays have Normal Open and Normal Close contacts and can switch up to 8A/240VAC.The optically isolated universal inputs can read AC or DC signals from 3V to 48V. The input connectors have a low voltage port which can read signals between 3V and 24V, and a high voltage port which can read signals between 24V and 48V.More information â€¦SetupIn order to use the Sequent Microsystems 4 Relay Card use the following settings:Mandatory Hardware Sequent Microsystems 4 Relay Card Address Enter the relay number from 1 - 4. Optional add the stack level number. Default 0.1,2Other settings can be found at the relay setup information"},{"title": "Sequent Microsystems 8 Relay Card Ver. 1 - 2","url": "/TerrariumPI/hardware/relay/sequent-microsystems-8-relay-card-ver-1-2/","categories": "Hardware, Relay","tags": "relay, i2c, 8relay","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationPerfect add-on to your project when you have to control large number of loads. Stackable to 8 layers, the card can add up to 64 relays to each Raspberry Pi in a compact form factor.Pluggable connectors make the 8-RELAYS card easy to use when multiple cards are stacked up. All relays have NO and NC contacts and can switch 120VAC/8A or 24VDC/8A.Status LEDs conveniently grouped on one side of the board show when relays are on or off. A power LED shows when power is applied. A reset switch permits shutting down the Raspberry Pi without the use of a keyboard and monitor.More information â€¦SetupIn order to use the Sequent Microsystems 8 Relay Card Ver. 1 - 2 use the following settings:Mandatory Hardware Sequent Microsystems 8 Relay Card Ver. 1 - 2 Address Enter the relay number from 1 - 8. Optional add the stack level number. Default 0.1,2Other settings can be found at the relay setup information"},{"title": "Sequent Microsystems 8 Relay Card Ver. 3","url": "/TerrariumPI/hardware/relay/sequent-microsystems-8-relay-card-ver-3/","categories": "Hardware, Relay","tags": "relay, i2c, 8relay","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationPerfect add-on to your project when you have to control large number of loads. Stackable to 8 layers, the card can add up to 64 relays to each Raspberry Pi in a compact form factor.Pluggable connectors make the 8-RELAYS card easy to use when multiple cards are stacked up. All relays have NO and NC contacts and can switch 120VAC/8A or 24VDC/8A.Status LEDs conveniently grouped on one side of the board show when relays are on or off. A power LED shows when power is applied. A reset switch permits shutting down the Raspberry Pi without the use of a keyboard and monitor.More information â€¦SetupIn order to use the Sequent Microsystems 8 Relay Card Ver. 3 use the following settings:Mandatory Hardware Sequent Microsystems 8 Relay Card Ver. 3 Address Enter the relay number from 1 - 8. Optional add the stack level number. Default 0.1,2Other settings can be found at the relay setup information"},{"title": "AM2302 Sensor","url": "/TerrariumPI/hardware/sensor/am2302-sensor/","categories": "Hardware, Sensor","tags": "sensor, gpio","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThe AM2302 is a wired version of the DHT22, in a large plastic body. It is a basic, low-cost digital temperature and humidity sensor. It uses a capacitive humidity sensor and a thermistor to measure the surrounding air, and spits out a digital signal on the data pin (no analog input pins needed). Its fairly simple to use, but requires careful timing to grab data. The only real downside of this sensor is you can only get new data from it once every 2 seconds, so when using our library, sensor readings can be up to 2 seconds old.Simply connect the red 3-5V power, the yellow wire to your data input pin and the black wire to ground. Although it uses a single-wire to send data it is not Dallas One Wire compatible! If you want multiple sensors, each one must have its own data pin.There is a 5.1K resistor inside the sensor connecting VCC and DATA so you do not need any additional pull-up resistorsremark: From experience, this sensor is not very stable after a few days.SetupIn order to use the AM2302 Sensor use the following settings:Mandatory Hardware AM2302 Sensor Types humidity, temperature Address Enter the physical pin number on which the device is connectedEx: 27 This sensor does support (power management)Other settings can be found at the sensor setup information"},{"title": "AM2320 Sensor","url": "/TerrariumPI/hardware/sensor/am2320-sensor/","categories": "Hardware, Sensor","tags": "sensor, i2c","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThis little sensor looks an awful lot like the popular DHT11/DHT22 temperature and humidity sensors, but unlike classic DHT sensors, it has an I2C interface! Thatâ€™s right, you do not need to use a bit-bang timing-specific protocol to talk to the AM2320, it uses plain-old-I2C. Whew, that makes things a little easier, doesnâ€™t it?But! Weâ€™ll let you know, this sensor is not well documented like our other, fancier I2C temperature &amp;amp; humidity sensors. The data sheet mentions it has 3% humidity accuracy and 0.5C temperature accuracy, but weâ€™re not very trusting of the specifications. So, while this sensor does seem to work, itâ€™s not recommended for anything where you care about any sort of guaranteed accuracy. Temperature is probably correct to 2-3 degrees Celsius. Humidity is probably within 5-10%.AM2320 schemaMore information â€¦SetupIn order to use the AM2320 Sensor use the following settings:Mandatory Hardware AM2320 Sensor Types humidity, temperature Address &amp;lt;I2C Address&amp;gt;,[I2C Bus] where the I2C bus is optionalEx: 0x5cOther settings can be found at the sensor setup information"},{"title": "AMG8833 Grid-Eye IR Thermometer sensor","url": "/TerrariumPI/hardware/sensor/amg8833-grid-eye-ir-thermometer-sensor/","categories": "Hardware, Sensor","tags": "sensor, IR","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThe AMG8833 is a 64-pixel temperature sensor developed by Panasonic under the Grid-EYEÂ® product line. The sensor contains an 8x8 array of infrared thermopiles, which approximate the temperature by measuring the infrared radiation being emitted from emissive bodies. The Grid-EYE communicates via the I2C bus, which also makes it compatible with Raspberry Pi and Arduino right out of the box.The AMG8833 contains an onboard lens that limits the viewing angle of the sensor to 60-degrees, which results in a sensing region useful for objects in the mid-field (as opposed to far-field or near-field). It also operates at 3.3V and 5V, at a sample rate of 1Hz-10Hz, with an approximate temperature resolution of 0.25Â°C over a range of 0Â°C to 80Â°C.The AMG8833 is useful for applications in thermal imaging, heat transfer analyses, human temperature monitoring, heating and air condition management, industrial control, and other applications in non-contact temperature measurement.More information â€¦SetupIn order to use the AMG8833 Grid-Eye IR Thermometer sensor use the following settings:Mandatory Hardware AMG8833 Grid-Eye IR Thermometer sensor Types temperature Address &amp;lt;I2C Address&amp;gt;,[I2C Bus] where the I2C bus is optionalEx: 1,0x3fOther settings can be found at the sensor setup information"},{"title": "BH1750 LUX light sensor","url": "/TerrariumPI/hardware/sensor/bh1750-lux-light-sensor/","categories": "Hardware, Sensor","tags": "sensor, light","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThe BH1750 is a light intensity sensor that can be used to adjust the brightness of display in mobiles and LCD displays. It can also be used to turn the headlights of cars on/off based on the outdoor lighting. The sensor uses I2C communication protocol so that makes it super easy to use with micro controllers. The SCL and SDA pins are for I2C.There is no calculation needed to measure the LUX value because the sensor directly gives the lux value. Actually, it measures the intensity according to the amount of light hitting on it. It operates on voltage range of 2.4V-3.6V and consumes really small current of 0.12mA. The results of the sensor does not depends upon the light source used and the influence of IR radiation is very less. There are very less chances of any error because the variation in measurement is as low as +/-20%.More information â€¦SetupIn order to use the BH1750 LUX light sensor use the following settings:Mandatory Hardware BH1750 LUX light sensor Types light Address &amp;lt;I2C Address&amp;gt;,[I2C Bus] where the I2C bus is optionalEx: 0x3fOther settings can be found at the sensor setup information"},{"title": "BME280 sensor","url": "/TerrariumPI/hardware/sensor/bme280-sensor/","categories": "Hardware, Sensor","tags": "sensor, temperature, humidity, pressure, altitude","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationBosch has stepped up their game with their new BME280 sensor, an environmental sensor with temperature, barometric pressure and humidity! This sensor is great for all sorts of indoor environmental sensing and can even be used in both I2C and SPI!This precision sensor from Bosch is the best low-cost sensing solution for measuring humidity with Â±3% accuracy, barometric pressure with Â±1 hPa absolute accuracy, and temperature with Â±1.0Â°C accuracy. Because pressure changes with altitude, and the pressure measurements are so good, you can also use it as an altimeter with Â±1 meter or better accuracy!The BME280 is the next-generation of sensors from Bosch, and is the upgrade to the BMP085/BMP180/BMP183 - with a low altitude noise of 0.25m and the same fast conversion time. It has the same specifications, but can use either I2C or SPI. For simple easy wiring, go with I2C. If you want to connect a bunch of sensors without worrying about I2C address collisions, go with SPI.More information â€¦SetupIn order to use the BME280 sensor use the following settings:Mandatory Hardware BME280 sensor Types altitude, humidity, pressure, temperature Address &amp;lt;I2C Address&amp;gt;,[I2C Bus] where the I2C bus is optionalEx: 0x3fOther settings can be found at the sensor setup information"},{"title": "Bright-PI","url": "/TerrariumPI/hardware/relay/bright-pi/","categories": "Hardware, Relay","tags": "relay, dimmer, brightpi","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThe Bright-Pi is a small little board based around the Semtech SC620 that powers 4 white LEDs and 8 infrared ones.More information â€¦SetupIn order to use the Bright-PI use the following settings:Mandatory Hardware Bright-PI (dimmer) Address anything will do. This address is not used in code.Other settings can be found at the relay setup information"},{"title": "Chirp sensor","url": "/TerrariumPI/hardware/sensor/chirp-sensor/","categories": "Hardware, Sensor","tags": "sensor, temperature, moisture","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationChirp is a plant watering alarm - as simple as that. You put it into the soil near a plant and it emits a tiny chirp when the soil is dry, reminding you to water the plant. Chirp uses capacitive humidity sensing as opposed to resistive humidity sensing, this means, it does not make an electric contact with the soil, avoiding electrode corrosion and soil electrolysis and resulting in better accuracy and longer battery life.CalibrationTo be able to retrieve the moisture in percent you need to calibrate the sensor. The minimum moist and maximum moist values need to be defined. If these values are not adjusted properly for every individual sensor, the value for moisture might go below 0% and above 100%You can use chirp.py to help calibrating your sensors.1234cd /home/pi/TerrariumPIsource venv/bin/activatecd 3rdparty/chirp-rpipython chirpy.pyLeave the dry sensor in dry air for a while so that the lowest value is recorded.Then put the sensor in water so that it records the highest value.The chirp.py program will automatically print out the highest and lowest value recorded when Ctrl-C is pressed.Use these values for minimum moist value and maximum moist value in the calibration settings.Please note that these values might drift a little with temperature changes. Make the calibration in the environment that you intend to use the sensor.More information â€¦SetupIn order to use the Chirp sensor use the following settings:Mandatory Hardware Chirp sensor Types moisture, temperature Address &amp;lt;I2C Address&amp;gt;,[I2C Bus] where the I2C bus is optionalEx: 0x3fOther settings can be found at the sensor setup information"},{"title": "COZIR CO2 sensor","url": "/TerrariumPI/hardware/sensor/cozir-co2-sensor/","categories": "Hardware, Sensor","tags": "sensor, co2, temperature, humidity","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThe ExplorIRÂ®-W is a small footprint low power COâ‚‚ sensor designed for applications where space is at a premium. The combination of small size, low power and high accuracy makes this sensor suitable for portable, battery powered personal safety equipment.The ExplorIRÂ®-W has a very wide dynamic range and is capable of measuring COâ‚‚ gas concentrations up to 100%, without compromising measurement accuracy or responsiveness.The ExplorIRÂ®-W uses patented NDIR solid-state LED optical technology that delivers consistent and accurate COâ‚‚ measurement performance over the lifetime of the sensor.More information â€¦SetupIn order to use the COZIR CO2 sensor use the following settings:Mandatory Hardware COZIR CO2 sensor Types co2, humidity, temperature Address &amp;lt;I2C Address&amp;gt;,[I2C Bus] where the I2C bus is optionalEx: 0x3fOther settings can be found at the sensor setup information"},{"title": "CCS811 Air Quality sensor","url": "/TerrariumPI/hardware/sensor/ccs811-air-quality-sensor/","categories": "Hardware, Sensor","tags": "sensor, co2","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThe CCS811 Air Quality Breakout is a digital gas sensor solution and comes with an I2C interface that senses a wide range of Total Volatile Organic Compounds (TVOCs), including equivalent carbon dioxide (eCO2) and metal oxide (MOX) levels. VOCs are often categorized as pollutants and/or sensory irritants and can come from a variety of sources like construction materials (paint, carpet, etc.), machines (copiers, processors, etc.), and even people (breathing, smoking, etc.).The sensor offers simple and easy interface through I2C. Libraries, circuit and sample codes are available for Arduino, Raspberry pi, ESP32, etc.This breakout is intended for indoor air quality monitoring in personal devices such as watches and phones. The CCS811 is an ultra-low-power digital gas sensor that integrates a CCS801-bit sensor and MCU with an analog-to-digital converter (ADC ) to detect indoor air quality.More information â€¦SetupIn order to use the CCS811 Air Quality sensor use the following settings:Mandatory Hardware CCS811 Air Quality sensor Types co2 Address &amp;lt;I2C Address&amp;gt;,[I2C Bus] where the I2C bus is optionalEx: 0x3fOther settings can be found at the sensor setup information"},{"title": "DC Dimmer","url": "/TerrariumPI/hardware/relay/dc-dimmer/","categories": "Hardware, Relay","tags": "relay, dimmer, dc","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationDC DimmerSetupIn order to use the DC Dimmer use the following settings:Mandatory Hardware DC Dimmer Address Physical GPIO pin number 1 - 40CalibrationThis is only available for dimmers. Dimmer frequency in Hz Default frequency: 1500 HzOther settings can be found at the relay setup information"},{"title": "DHT11 sensor","url": "/TerrariumPI/hardware/sensor/dht11-sensor/","categories": "Hardware, Sensor","tags": "sensor, temperature, humidity","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThe DHT11 is a basic, ultra low-cost digital temperature and humidity sensor. It uses a capacitive humidity sensor and a thermistor to measure the surrounding air and spits out a digital signal on the data pin (no analog input pins needed). Itâ€™s fairly simple to use but requires careful timing to grab data. The only real downside of this sensor is you can only get new data from it once every 2 seconds, so when using our library, sensor readings can be up to 2 seconds old.Compared to the DHT22, this sensor is less precise, less accurate, and works in a smaller range of temperature/humidity, but its smaller and less expensiveIt needs a 4.7K - 10K resistor, which you will want to use as a pull-up from the data pin to VCC.WarningAs these sensors are cheap, they are not stable for 24/7 duty. After a few days they tend to give problems. Use at your own risk! Using DHT11 / DHT11 on Raspberry Pi 4b #470More information â€¦SetupIn order to use the DHT11 sensor use the following settings:Mandatory Hardware DHT11 sensor Types humidity, temperature Address Enter the physical pin number on which the device is connectedEx: 27 This sensor does support (power management)Other settings can be found at the sensor setup information"},{"title": "DHT22 sensor","url": "/TerrariumPI/hardware/sensor/dht22-sensor/","categories": "Hardware, Sensor","tags": "sensor, temperature, humidity","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThe DHT22 is a basic, low-cost digital temperature and humidity sensor. It uses a capacitive humidity sensor and a thermistor to measure the surrounding air and spits out a digital signal on the data pin (no analog input pins needed). Itâ€™s fairly simple to use but requires careful timing to grab data. The only real downside of this sensor is you can only get new data from it once every 2 seconds, so when using our library, sensor readings can be up to 2 seconds old.Simply connect the first pin on the left to 3-5V power, the second pin to your data input pin, and the rightmost pin to ground. Although it uses a single wire to send data it is not Dallas One Wire compatible! If you want multiple sensors, each one must have its own data pin.It needs a 4.7K - 10K resistor, which you will want to use as a pull-up from the data pin to VCC.WarningAs these sensors are cheap, they are not stable for 24/7 duty. After a few days they tend to give problems. Use at your own risk! Using DHT11 / DHT11 on Raspberry Pi 4b #470More information â€¦SetupIn order to use the DHT22 sensor use the following settings:Mandatory Hardware DHT22 sensor Types humidity, temperature Address Enter the physical pin number on which the device is connectedEx: 27 This sensor does support (power management)Other settings can be found at the sensor setup information"},{"title": "Energenie LAN","url": "/TerrariumPI/hardware/relay/energenie-lan/","categories": "Hardware, Relay","tags": "relay, energenie","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationEG-PM2-LAN / EG-PMS2-WLAN is a power outlet strip with advanced power management features. It is possible to individually switch 4 sockets on or off manually via your local network or Internet, by timer schedule, or by programmable special events (eg: switch on my scanner whenever I start Photoshop, or have my printer switched on only when I really print). With your free personal user account on EnerGenie.com you can manage your EG-PM2-LAN via Internet from all over the world, even with your smartphone.More information â€¦SetupIn order to use the Energenie LAN use the following settings:Mandatory Hardware Energenie LAN Address Enter the full http url and adding â€˜#â€™ and number to speicfy the relay.Ex: http://[Optional_Password]@[Energenie_IP]/#2 will toggle the 2nd relay on the device.Other settings can be found at the relay setup information"},{"title": "Energenie RF","url": "/TerrariumPI/hardware/relay/energenie-rf/","categories": "Hardware, Relay","tags": "relay, energenie","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThis is a bundle of the Energenie Pi-Mote and our 4-way RF extension lead. With the simple Python script available to download on this page you can control each socket individually or all together with your Raspberry Pi. This is perfect for controlling sockets in hard to reach places.See the GPIO Zero documentation for example usage:More information â€¦SetupIn order to use the Energenie RF use the following settings:Mandatory Hardware Energenie RF Address Enter the relay number from 1 - 4.Other settings can be found at the relay setup information"},{"title": "Energenie USB","url": "/TerrariumPI/hardware/relay/energenie-usb/","categories": "Hardware, Relay","tags": "relay, energenie","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationEG-PM2 / EG-PMS2 is a power outlet strip with advanced power management features. It is possible to individually switch 4 sockets on or off manually via your PC, by timer schedule, or by programmable special events (eg: switch on my scanner whenever I start Photoshop, or have my printer switched on only when I really print)More information â€¦Outdated softwareThis is included in the Docker image.In order to support newer devices you need to upgrade the software package sispmctl. The current version on the Raspberry PI is unfortunately outdated. Upgrading is a manual action, which will install a second sispmctl on your system on the location /usr/local/bin/ which my software will automatically detect. So after upgrading sispmctl and restarting TerrariumPI, you should be good to go.Go to https://sourceforge.net/projects/sispmctl/files/sispmctl/ and enter the folder with the highest version number. At time of writing that is 4.9 Install needed libraries: sudo apt install libusb-dev Install sispmctl: 1234567wget https://sourceforge.net/projects/sispmctl/files/sispmctl/sispmctl-4.9/sispmctl-4.9.tar.gz/download -O sispmctl-4.9.tar.gztar zxvf sispmctl-4.9.tar.gzcd sispmctl-4.9/./configuremakesudo make installsudo ldconfig Restart TerrariumPI service (FAQ)The needed permissions to connect to the device through USB are already set.SetupAuto detectThis relay will be auto detected during startup or added by â€˜Scan relaysâ€™ in the menu.In order to use the Energenie USB use the following settings:Mandatory Hardware Energenie USB Address Enter the relay number from 1 - 4. Optional you can enter the Serial address of the board if you have multiple relay boards like: 1,0035685Other settings can be found at the relay setup information"},{"title": "FTDI","url": "/TerrariumPI/hardware/relay/ftdi/","categories": "Hardware, Relay","tags": "relay, ftdi","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThis is Four Channel relay board controlled by computer USB port. The usb relay board is with 4 SPDT relays rated up to 10A each. You may control devices 220V / 120V (up to 4) directly with one such relay unit. It is fully powered by the computer USB port. Suitable for home automation applications, hobby projects, industrial automation. The free software DRM and DRMv3 allows to control relays manually, create timers (weekly and calendar) and multivibrators, use date and time for alarms. We developed also command line tool utility for controlling the relays. We provide software examples in Labview, .NET, Java, Borland C++, Python.More information â€¦SetupAuto detectThis relay will be auto detected during startup or added by â€˜Scan relaysâ€™ in the menu.In order to use the FTDI use the following settings:Mandatory Hardware FTDI devices Address Enter the relay number from 1 - 4. Optional add the serial of the board separated by a comma.Ex: 1,A702JH8HOther settings can be found at the relay setup information"},{"title": "GPIO","url": "/TerrariumPI/hardware/relay/gpio/","categories": "Hardware, Relay","tags": "relay, gpio","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThis 4-channel relay interface board can control various appliances and other equipments with high current. It can be controlled directly by any micro-controller.SetupIn order to use the GPIO use the following settings:Mandatory Hardware GPIO devices Address Enter the physical pin number on which the device is connectedEx: 27Or when used with an IO expander:Ex:pcf8575-9,0x4c,3Other settings can be found at the relay setup information"},{"title": "HC-SR04 ultrasonic ranging sensor","url": "/TerrariumPI/hardware/sensor/hc-sr04-ultrasonic-ranging-sensor/","categories": "Hardware, Sensor","tags": "sensor, distance","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThis is the HC-SR04 ultrasonic distance sensor. This economical sensor provides 2cm to 400cm of non-contact measurement functionality with a ranging accuracy that can reach up to 3mm. Each HC-SR04 module includes an ultrasonic transmitter, a receiver and a control circuit.There are only four pins that you need to worry about on the HC-SR04: VCC (Power), Trig (Trigger), Echo (Receive), and GND (Ground). You will find this sensor very easy to set up and use for your next range-finding project!This sensor has additional control circuitry that can prevent inconsistent â€œbouncyâ€ data depending on the application.For a Raspberry PI it needs resistors on the ECHO port.More information â€¦SetupIn order to use the HC-SR04 ultrasonic ranging sensor use the following settings:Mandatory Hardware HC-SR04 ultrasonic ranging sensor Types distance Address Enter the physical pin number where the trigger and echo pins are connected in that orderEx: 27,23Other settings can be found at the sensor setup information"},{"title": "HC-SR04P ultrasonic ranging sensor","url": "/TerrariumPI/hardware/sensor/hc-sr04p-ultrasonic-ranging-sensor/","categories": "Hardware, Sensor","tags": "sensor, distance","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThis is the HC-SR04 ultrasonic distance sensor. This economical sensor provides 2cm to 400cm of non-contact measurement functionality with a ranging accuracy that can reach up to 3mm. Each HC-SR04 module includes an ultrasonic transmitter, a receiver and a control circuit.There are only four pins that you need to worry about on the HC-SR04: VCC (Power), Trig (Trigger), Echo (Receive), and GND (Ground). You will find this sensor very easy to set up and use for your next range-finding project!This sensor has additional control circuitry that can prevent inconsistent â€œbouncyâ€ data depending on the application.For a Raspberry PI it needs resistors on the ECHO port.More information â€¦SetupIn order to use the HC-SR04P ultrasonic ranging sensor use the following settings:Mandatory Hardware HC-SR04P ultrasonic ranging sensor Types distance Address Enter the physical pin number where the trigger and echo pins are connected in that orderEx: 27,23Other settings can be found at the sensor setup information"},{"title": "Meross power switches","url": "/TerrariumPI/hardware/relay/meross-power-switches/","categories": "Hardware, Relay","tags": "relay, meross","date": "2021-10-24 16:48:31 +0200","snippet" : "Information4 Outlets and 4 USB Ports: Equipped with 4 individually controlled Outlets and 4 groups controlled USB ports. Up to 4.0A for four USB ports. You can charge your cellphone, tablets, and other USB gadgets with a smart power strip.More information â€¦SetupAuto detectThis relay will be auto detected during startup or added by â€˜Scan relaysâ€™ in the menu.In order to use the Meross power switches use the following settings:Mandatory Hardware Meross power switches Address Need Meross Cloud account credentialsOther settings can be found at the relay setup information"},{"title": "MH-Z19 CO2 sensor","url": "/TerrariumPI/hardware/sensor/mh-z19-co2-sensor/","categories": "Hardware, Sensor","tags": "sensor, co2, temperature","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThe MH-Z19 is an indoor CO2 sensor. It is just a sensor, which means that you need to have separate system to read and control the data measured by the MH-Z19. This can for example be a wemos or nodemcu device that you need to have in place to control the MH-Z19 sensor. When you have this setup in place, you are able to send data from this sensor to your home automation or smart home platform.Features High sensitivity, high resolution. Output modes: UART and PWM wave. Anti-water vapor interference.No poisoning. Temperature compensation, excellent linear output. Low power consumption,good stability and long lifespan. It is widely used in the HVAC refrigeration and indoor air quality monitoring.More information â€¦SetupIn order to use the MH-Z19 CO2 sensor use the following settings:Mandatory Hardware MH-Z19 CO2 sensor Types co2, temperature Address Serial address and connect to GPIO pin 8 (TX) and 10 (RX). Ex: /dev/ttyS0Other settings can be found at the sensor setup information"},{"title": "MH-Z19b CO2 sensor","url": "/TerrariumPI/hardware/sensor/mh-z19b-co2-sensor/","categories": "Hardware, Sensor","tags": "sensor, co2, temperature","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThe MH-Z19 is an indoor CO2 sensor. It is just a sensor, which means that you need to have separate system to read and control the data measured by the MH-Z19. This can for example be a wemos or nodemcu device that you need to have in place to control the MH-Z19 sensor. When you have this setup in place, you are able to send data from this sensor to your home automation or smart home platform.Features High sensitivity, high resolution. Output modes: UART and PWM wave. Anti-water vapor interference.No poisoning. Temperature compensation, excellent linear output. Low power consumption,good stability and long lifespan. It is widely used in the HVAC refrigeration and indoor air quality monitoring.More information â€¦SetupIn order to use the MH-Z19b CO2 sensor use the following settings:Mandatory Hardware MH-Z19b CO2 sensor Types co2, temperature Address Serial address and connect to GPIO pin 8 (TX) and 10 (RX). Ex: /dev/ttyS0Other settings can be found at the sensor setup information"},{"title": "MiFlora bluetooth sensor","url": "/TerrariumPI/hardware/sensor/miflora-bluetooth-sensor/","categories": "Hardware, Sensor","tags": "sensor, temperature, fertility, light, moisture","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThe Xiaomi Mi Flora Plant sensor is a perfect tool to test the soil conditions of fruits, flowers, vegetables and shrubs. So it is a very good device to be used by gardeners, vegetable and fruit growers, and all those who grow trees and grasses. When connected with Xiaomi Smart Home, you can even monitor the plant conditions from your phone screen. The Xiaomi Mi Flora Plant sensor has a high sensor accuracy and easy operation so you can take good care of your plants, fruits and flowers.Features pH tester can measure different soil. Light monitor measuring range is 0 â€“ 100000 lm and the measuring accuracy is 100 lm. It can measure different soil conditions: Moisture / light / pH / humidity / temperature / nutrient Simply insert the meter into the soil, switch to the setting you want to measure and read the scale Professional testing instruments, make planting more environmental protection, security, etc. Smart APP control, including support of the Bluetooth 4.1 version Built-in 1 x DC 3V CR2032 button battery (included) Quick and simple installationMore information â€¦SetupAuto detectThis sensor will be auto detected during startup or added by â€˜Scan sensorsâ€™ in the menu.In order to use the MiFlora bluetooth sensor use the following settings:Mandatory Hardware MiFlora bluetooth sensor Types fertility, light, moisture, temperature Address Bluetooth MAC address. Ex: c2:7c:9e:66:e3:52Other settings can be found at the sensor setup information"},{"title": "MiTemperature bluetooth sensor","url": "/TerrariumPI/hardware/sensor/mitemperature-bluetooth-sensor/","categories": "Hardware, Sensor","tags": "sensor, temperature, humidity","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThis Bluetooth Temperature Humidity Sensor is a smart sensor with Bluetooth connectivity by using the free Mi Home App which continuously displays your home or greenhouse indoor environment (temperature and humidity).Features Compact design. Constantly monitors and displays humidity (air moisture) in Celsius, temperature and battery life. Suitable for indoor environments. Bluetooth connectivity and monitoring with Mi Home App. Magnetic wall mount and battery included. Low power consumption. Ideal for your home, greenhouse and more. User Manual in EnglishWarning: Not all MiTemp devices are the same. It can happen that a device will not work. Then the firmware is different and canâ€™t be fixedMore information â€¦SetupAuto detectThis sensor will be auto detected during startup or added by â€˜Scan sensorsâ€™ in the menu.In order to use the MiTemperature bluetooth sensor use the following settings:Mandatory Hardware MiTemperature bluetooth sensor Types humidity, temperature Address Bluetooth MAC address. Ex: c2:7c:9e:66:e3:52Other settings can be found at the sensor setup information"},{"title": "MLX90614 IR Thermometer sensor","url": "/TerrariumPI/hardware/sensor/mlx90614-ir-thermometer-sensor/","categories": "Hardware, Sensor","tags": "sensor, temperature","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationMLX90614 sensor is manufactured by Melexis Microelectronics Integrated system, it has two devices embedded in it, one is the infrared thermopile detector (sensing unit) and the other is a signal conditioning DSP device (computational unit). It works based on Stefan-Boltzmann law which states that all objects emits IR energy and the intensity of this energy will be directly proportional to the temperature of that object. The sensing unit in the sensor measures how much IR energy is emitted by a targeted object and the computational unit converts it into temperature value using a 17-bit in-built ADC and outputs the data through I2C communication protocol. The sensor measures both the object temperature and ambient temperature to calibrate the object temperature value. The features of MLX90614 sensor is given below, for more details refer the MLX90614 data-sheet.Features Operating Voltage: 3.6V to 5V Object Temperature Range: -70Â°C to 382.2Â°C Ambient Temperature Range: -40Â°C to 125Â°C Resolution/Accuracy: 0.02Â°CMore information â€¦SetupIn order to use the MLX90614 IR Thermometer sensor use the following settings:Mandatory Hardware MLX90614 IR Thermometer sensor Types temperature Address &amp;lt;I2C Address&amp;gt;,[I2C Bus] where the I2C bus is optional, followed by either ,o for object or ,a for ambient temperatureEx: 0x3f,1,oOther settings can be found at the sensor setup information"},{"title": "Meross MS100","url": "/TerrariumPI/hardware/sensor/meross-ms100/","categories": "Hardware, Sensor","tags": "sensor, temperature, humidity","date": "2021-10-24 16:48:31 +0200","snippet" : "Information Monitor temperature and humidity via the Meross app anywhere anytime, such as babyâ€™s room, refrigerators, basement, etc. Get instant alerts when the temperature and humidity exceed your preset values. Compact size (1.57 x 1.57 x 0.55 in.), thread for fixation, with wide range connection (100 ft typically). When Temperature or Relative Humidity reaches a particular value, trigger other devices on/off automatically. To analyze how the data affects your life, view and extract the history data. Meross hub is required for the connection.More information â€¦SetupAuto detectThis sensor will be auto detected during startup or added by â€˜Scan sensorsâ€™ in the menu.In order to use the Meross MS100 use the following settings:Mandatory Hardware Meross MS100 Types humidity, temperature Address Need Meross Cloud account credentialsOther settings can be found at the sensor setup information"},{"title": "NextEVO Universal AC MAINS Dimmer (MPDMv4.1)","url": "/TerrariumPI/hardware/relay/nextevo-universal-ac-mains-dimmer-mpdmv4-1/","categories": "Hardware, Relay","tags": "relay, dimmer, ac mains","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationA MAINS Power Dimmer/Switch with integrated Phase detection and ZCD (Zero Crossing Detection) processing. It is Triac driven and intended to be used for lighting control. Tested and working ok with standard lightbulb (incandescent lamps or the new Halogen ECO). For LED or fluorescent lights you need to check first that they are dimmable units.Designed and tested for EU MAINS 240V/50Hz but working also OK on US 110/60hz.More information â€¦SetupIn order to use the NextEVO Universal AC MAINS Dimmer (MPDMv4.1) use the following settings:Mandatory Hardware NextEVO Universal AC MAINS Dimmer (MPDMv4.1) Address Physical GPIO pin number 1 - 40CalibrationThis is only available for dimmers. Dimmer frequency in Hz Default frequency: 5000 HzOther settings can be found at the relay setup information"},{"title": "PCA9685 dimmer","url": "/TerrariumPI/hardware/relay/pca9685-dimmer/","categories": "Hardware, Relay","tags": "relay, dimmer, i2c, PCA9685","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationYou want to make a cool robot, maybe a hexapod walker, or maybe just a piece of art with a lot of moving parts. Or maybe you want to drive a lot of LEDs with precise PWM output. Then you realize that your micro-controller has a limited number of PWM outputs! What now? You could give up OR you could just get this handy PWM and Servo driver breakout.When we saw this chip, we quickly realized what an excellent add-on this would be. Using only two pins, control 16 free-running PWM outputs! You can even chain up 62 breakouts to control up to 992 PWM outputs (which we would really like to see since it would be glorious)More information â€¦SetupIn order to use the PCA9685 dimmer use the following settings:Mandatory Hardware PCA9685 dimmer Address &amp;lt;I2C Address&amp;gt;,[I2C Bus] where the I2C bus is optionalEx: 1,0x40CalibrationThis is only available for dimmers. Dimmer frequency in Hz Default frequency: 5000 HzOther settings can be found at the relay setup information"},{"title": "Remote dimmer","url": "/TerrariumPI/hardware/relay/remote-dimmer/","categories": "Hardware, Relay","tags": "relay, dimmer, remote","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThis is a remote dimmer that works with GET and POST (not yet) actions on a HTTP server. It uses the default remote data formatSetupIn order to use the Remote dimmer use the following settings:Mandatory Hardware Remote dimmer (API) Address http(s)://some.domain.com/path/location/script.phpOther settings can be found at the relay setup information"},{"title": "Remote relay","url": "/TerrariumPI/hardware/relay/remote-relay/","categories": "Hardware, Relay","tags": "relay, remote","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThis is a remote dimmer that works with GET and POST (not yet) actions on a HTTP server. It uses the default remote data formatSetupIn order to use the Remote relay use the following settings:Mandatory Hardware Remote power switch (API) Address http(s)://some.domain.com/path/location/script.phpOther settings can be found at the relay setup information"},{"title": "Script dimmer","url": "/TerrariumPI/hardware/relay/script-dimmer/","categories": "Hardware, Relay","tags": "relay, dimmer, script","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThis is a script dimmer which can be used to support a not supported dimmer. TerrariumPI will execute this script with no parameters when it tries to read the current dimmer state. And when you change the dimmer, the script will get an extra parameter which is a int from 0 - 100. Where 0 is off and 100 is fully on.When for what reason the readout is not possible, return the value â€˜-1â€™ when requested. This will tell TerrariumPI to keep the last existing value.An example can be found in the contrib folder.Python scriptsIn order to use the Python virtual environment with all its libraries, make sure you have the correct shebang line:1#!/usr/bin/env pythonDockerWhen using docker, you can place them in the scripts volume that you have defined in the docker-compose.yaml file. And then you can use the following address: /TerrariumPI/scripts/[name_of_script].[extension]SetupIn order to use the Script dimmer use the following settings:Mandatory Hardware Script dimmer Address /home/user/location/executable/scriptOther settings can be found at the relay setup information"},{"title": "Script relay","url": "/TerrariumPI/hardware/relay/script-relay/","categories": "Hardware, Relay","tags": "relay, script","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThis is a script relay which can be used to support a not supported relay. TerrariumPI will execute this script with no parameters when it tries to read the current relay state. And when you change the dimmer in the GUI, the script will get an extra parameter which is a int from 0 - 100. Where 0 is off and 100 is fully on.A single on/off relay will get the value 100 for on and 0 for off.When for what reason the readout is not possible, return the value â€˜-1â€™ when requested. This will tell TerrariumPI to keep the last existing value.And make sure your script is executable. You can use the same Python libraries that are installed. See the requirements.txt for installed libraries.An example can be found in the contrib folder.Python scriptsIn order to use the Python virtual environment with all its libraries, make sure you have the correct shebang line:1#!/usr/bin/env pythonDockerWhen using docker, you can place them in the scripts volume that you have defined in the docker-compose.yaml file. And then you can use the following address: /TerrariumPI/scripts/[name_of_script].[extension]SetupIn order to use the Script relay use the following settings:Mandatory Hardware Script relay Address /home/user/location/executable/scriptOther settings can be found at the relay setup information"},{"title": "Sonoff D1 Dimmer (Tasmota)","url": "/TerrariumPI/hardware/relay/sonoff-d1-dimmer-tasmota/","categories": "Hardware, Relay","tags": "relay, dimmer, wifi, sonoff, tasmota","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationTotal local control with quick setup and updates. Control using MQTT, Web UI, HTTP or serial. Automate using timers, rules or scripts. Integration with home automation solutions. Incredibly expandable and flexible.It needs to be flashed with Tasmota firmware!More information â€¦SetupIn order to use the Sonoff D1 Dimmer (Tasmota) use the following settings:Mandatory Hardware Sonoff D1 Dimmer (Tasmota) Address Enter the hostname or IP address.Other settings can be found at the relay setup information"},{"title": "Sonoff (Tasmota)","url": "/TerrariumPI/hardware/relay/sonoff-tasmota/","categories": "Hardware, Relay","tags": "relay, wifi, sonoff, tasmota","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationTotal local control with quick setup and updates. Control using MQTT, Web UI, HTTP or serial. Automate using timers, rules or scripts. Integration with home automation solutions. Incredibly expandable and flexible.It needs to be flashed with Tasmota firmware!More information â€¦SetupIn order to use the Sonoff (Tasmota) use the following settings:Mandatory Hardware Sonoff (Tasmota) Address Enter the hostname or IP address and optional a relay number separated by a dash.Ex: http://[PASSWORD]@[HOST]#[POWER_SWITCH_NR]Other settings can be found at the relay setup information"},{"title": "Kasa Smart","url": "/TerrariumPI/hardware/relay/kasa-smart/","categories": "Hardware, Relay","tags": "relay, kasa","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationMore information â€¦SetupAuto detectThis relay will be auto detected during startup or added by â€˜Scan relaysâ€™ in the menu.In order to use the Kasa Smart use the following settings:Mandatory Hardware Kasa Smart Address Enter the hostname or IP address and optional a relay number separated by a comma.Ex: 192.168.1.15,1Other settings can be found at the relay setup information"},{"title": "WEMO Smart plug","url": "/TerrariumPI/hardware/relay/wemo-smart-plug/","categories": "Hardware, Relay","tags": "relay, wifi, wemo","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationWemo uses your WiFi network for wireless control of lamps, heaters, fans and more. Plug it into an outlet and then plug a device into the Mini. Now you can use the free Wemo App, Amazon Alexa, Google Assistant and Apple Home app or Siri to control your lights and appliances from the couch, coffee shop or CaribbeanMore information â€¦SetupIn order to use the WEMO Smart plug use the following settings:Mandatory Hardware WEMO Smart plug Address Enter the hostname or IP addressOther settings can be found at the relay setup information"},{"title": "One-Wire File System (OWFS)","url": "/TerrariumPI/hardware/sensor/one-wire-file-system-owfs/","categories": "Hardware, Sensor","tags": "sensor, 1-wire, temperature, humidity","date": "2021-10-28 23:27:35 +0200","snippet" : "InformationI2C to 1-Wire host adapter for your Raspberry Pi. This device is compatible with all variants of Raspberry Pi including the new Raspberry Pi 2. If you have anything other than an early Raspberry Pi model A or B (i.e. the models with the 26pin GPIO header) we would suggest you look at the RPI2v2 instead of this module.This module provides an easy way to connect 1-Wire devices to your Raspberry Pi without using up one of the USB ports. It is based around a DS2482-100 I2C to 1-Wire IC.Connection to your 1-Wire network is either by the RJ45 socket or the screw terminals. The RJ45 socket is wired to the same standard as all our modules to allow the easy assembly of a network using standard ethernet cables. It includes +5V on pin 2 for any modules that require it.It is available as an assembled module, kit of parts or bare PCB. Please note that if you buy the kit or PCB that there are three surface mount ICs on the board so it is not really suitable for anyone inexperienced at soldering.DS18B20An easy to use temperature sensor is the DS18B20 sensorMore information â€¦SetupAuto detectThis sensor will be auto detected during startup or added by â€˜Scan sensorsâ€™ in the menu.In order to use the One-Wire File System (OWFS) use the following settings:Mandatory Hardware One-Wire File System (OWFS) Types humidity, temperature Address Enter the sensors address Ex: 280115b231f3ffOther settings can be found at the sensor setup information"},{"title": "Remote Sensor","url": "/TerrariumPI/hardware/sensor/remote-sensor/","categories": "Hardware, Sensor","tags": "sensor, remote, json, temperature, humidity, fertility, ph, uva, moisture, uvb, altitude, co2, distance, uvi, pressure, light","date": "2021-10-28 23:27:35 +0200","snippet" : "InformationWith the remote sensor you can use an external source for measurements. This needs to be a JSON source. And the remote source needs to be able to serve the data once every 30 seconds. So make sure you will not hit any rate limits on the remote source.By using JSON path traversal in the url after the # sign, you can specify which value to use from the JSON data.More information â€¦SetupIn order to use the Remote Sensor use the following settings:Mandatory Hardware Remote Sensor Types altitude, co2, distance, fertility, humidity, light, moisture, ph, pressure, temperature, uva, uvb, uvi Address Enter the full url and json path traversal. More information at remote hardware.Other settings can be found at the sensor setup information"},{"title": "Script Sensor","url": "/TerrariumPI/hardware/sensor/script-sensor/","categories": "Hardware, Sensor","tags": "sensor, script, temperature, humidity, fertility, ph, uva, moisture, uvb, altitude, co2, distance, uvi, pressure, light","date": "2021-10-28 23:27:35 +0200","snippet" : "InformationWith a script sensor you can make your own script/program that does a measurement and give back the current value.For temperature, it needs to return the value in Celsius degrees.You can use decimal/float values. But make sure you have only a numeric value output. No â€˜%â€™ of â€˜Câ€™ indicators.Python scriptsIn order to use the Python virtual environment with all its libraries, make sure you have the correct shebang line:1#!/usr/bin/env pythonDockerWhen using docker, you can place them in the scripts volume that you have defined in the docker-compose.yaml file. And then you can use the following address: /TerrariumPI/scripts/[name_of_script].[extension]More information â€¦SetupIn order to use the Script Sensor use the following settings:Mandatory Hardware Script Sensor Types altitude, co2, distance, fertility, humidity, light, moisture, ph, pressure, temperature, uva, uvb, uvi Address Enter the full path to the script.Other settings can be found at the sensor setup information"},{"title": "SEN0161 PH Probe sensor (analog)","url": "/TerrariumPI/hardware/sensor/sen0161-ph-probe-sensor-analog/","categories": "Hardware, Sensor","tags": "sensor, ph, analog","date": "2021-10-29 09:51:49 +0200","snippet" : "InformationNeed to measure water quality and other parameters but havenâ€™t got any low cost pH meter? Find it difficult to use with Arduino? Here comes an analog pH meter, specially designed for Arduino controllers and has built-in simple, convenient and practical connection and features. It has an LED which works as the Power Indicator, a BNC connector and PH2.0 sensor interface. To use it, just connect the pH sensor with BNC connector, and plug the PH2.0 interface into the analog input port of any Arduino controller. If pre-programmed, you will get the pH value easily. Comes in compact plastic box with foams for better mobile storage.Attention: In order to ensure the accuracy of the pH probe, you need to use the standard solution to calibrate it regularly.Generally, the period is about half a year. If you measure the dirty aqueous solution, you need to increase the frequency of calibration.More information â€¦SetupIn order to use the SEN0161 PH Probe sensor (analog) use the following settings:Mandatory Hardware SEN0161 PH Probe sensor (analog) Types ph Address Analog and enter port number Ex: 1Other settings can be found at the sensor setup information"},{"title": "Sensirion SHT2X sensor","url": "/TerrariumPI/hardware/sensor/sensirion-sht2x-sensor/","categories": "Hardware, Sensor","tags": "sensor, temperature, humidity","date": "2021-10-29 09:51:49 +0200","snippet" : "InformationThe SHT21 is a low cost humidity and temperature sensor. Its an I2C device so again is very simple to connect to any arduinoThe digital SHT2x humidity sensor series is used in high volumes in a wide variety of applications and has today become the de facto industry standard. The SHT2x series consists of a low-cost version with the SHT20 humidity sensor, a standard version with the SHT21 humidity sensor, and a high-end version with the SHT25 humidity sensor. The open cavity mold package â€“ which encapsulates the complete chip except for the humidity sensor area â€“ protects the capacitive humidity sensor against external impact and facilitates excellent long-term stability.The SHT2x provides calibrated, linearized sensor signals in digital, I2C format. The SHT2x humidity sensor series contains a capacitive-type humidity sensor, a band-gap temperature sensor, and specialized analog and digital integrated circuits ,the resolution of the SHT2x humidity sensor can be changed on command (8/12 bit up to 12/14 bit for RH/T) and a checksum helps to improve communication reliabilityMore information â€¦SetupIn order to use the Sensirion SHT2X sensor use the following settings:Mandatory Hardware Sensirion SHT2X sensor Types humidity, temperature Address &amp;lt;I2C Address&amp;gt;,[I2C Bus] where the I2C bus is optionalEx: 0x3fOther settings can be found at the sensor setup information"},{"title": "Sensirion SHT3X sensor","url": "/TerrariumPI/hardware/sensor/sensirion-sht3x-sensor/","categories": "Hardware, Sensor","tags": "sensor, temperature, humidity","date": "2021-10-29 09:51:49 +0200","snippet" : "InformationSHT31 is the next generation of Sensirionâ€™s temperature and humidity sensors. It builds on a new CMOSensÂ® sensor chip that is at the heart of Sensirionâ€™s new humidity and temperature platform.Features Fully calibrated, linearized, and temperature compensated digital output Wide supply voltage range, from 2.4 V to 5.5 V I2C Interface with communication speeds up to 1 MHz and two user selectable addressesMore information â€¦SetupIn order to use the Sensirion SHT3X sensor use the following settings:Mandatory Hardware Sensirion SHT3X sensor Types humidity, temperature Address &amp;lt;I2C Address&amp;gt;,[I2C Bus] where the I2C bus is optionalEx: 0x44Other settings can be found at the sensor setup information"},{"title": "SI7021 sensor","url": "/TerrariumPI/hardware/sensor/si7021-sensor/","categories": "Hardware, Sensor","tags": "sensor, temperature, humidity","date": "2021-10-29 09:51:49 +0200","snippet" : "InformationThe Si7021 I2C Humidity and Temperature Sensor is a monolithic CMOS IC integrating humidity and temperature sensor elements, an analog-to-digital converter, signal processing, calibration data, and an I2C Interface. The Si7021 offers an accurate, low-power, factory-calibrated digital solution ideal for measuring humidity, dew-point, and temperature, in applications ranging from HVAC/R and asset tracking to industrial and consumer platforms.Features Precision Relative Humidity Sensor Â± 3% RH (max), 0â€“80% RH High Accuracy Temperature Sensor Â±0.4 Â°C (max), â€“10 to 85 Â°C 0 to 100% RH operating range Up to â€“40 to +125 Â°C operating range Wide operating voltage â€“ (1.9 to 3.6 V) Low Power Consumption â€“ 150 Î¼A active currentMore information â€¦SetupIn order to use the SI7021 sensor use the following settings:Mandatory Hardware SI7021 sensor Types humidity, temperature Address &amp;lt;I2C Address&amp;gt;,[I2C Bus] where the I2C bus is optionalEx: 0x40Other settings can be found at the sensor setup information"},{"title": "VEML6075 UVA and UVB light sensor","url": "/TerrariumPI/hardware/sensor/veml6075-uva-and-uvb-light-sensor/","categories": "Hardware, Sensor","tags": "sensor, uva, uvb, uvi","date": "2021-10-29 09:51:49 +0200","snippet" : "InformationThis is a UV sensor module based on Vishay VEML6075 sensor, adopting individual UVA and UVB channel solution with 16-bit resolution. It can convert solar UV light intensity to digital data to provide an accurate measure of the signal strength.VEML6075 UV sensor can give a reliable performance of UV radiation measurement under long time solar UV exposure. Furthermore, the sensor provides excellent temperature compensation capability within -40â„ƒ to +85â„ƒ. VEML6075 features, low power consumption, and its minimum power can be as low as 800nA in shut-down mode. The operating voltage of the sensor ranges from 3.3V to 5V. It adopts IIC protocol, which can work well with any micro-controller that supports IIC.Compatible with Arduino and Raspberry Pi, this sensor can be used in portable electronic product, wearable device, weather station, flame detecting and so on.Features Operating Voltage: 3.3V~5V Operating Current: 700uA Shut-down Mode: 10uA UV Chip: VEML6075 Output: digital output Response Wavelength: UVB (Î»0.5) within 315nm to 340nm; UVA (Î»0.5) within 350nm to 375nm. Interface: PH2.0-4P IIC Address: 0x10 Dimension: 22Ã—30mm/0.87Ã—1.18â€ Mount Hole Size: 3mm Mount Hole Pitch: 15mm Operating Temperature: -40â„ƒ~+85â„ƒto get more accurate measurement, the sensor should direct to ultraviolet light source.More information â€¦SetupIn order to use the VEML6075 UVA and UVB light sensor use the following settings:Mandatory Hardware VEML6075 UVA and UVB light sensor Types uva, uvb, uvi Address &amp;lt;I2C Address&amp;gt;,[I2C Bus] where the I2C bus is optionalEx: 0x44Other settings can be found at the sensor setup information"},{"title": "Magnetic (door) button","url": "/TerrariumPI/hardware/button/magnetic-door-button/","categories": "Hardware, Button","tags": "button, magnetic, door","date": "2021-10-29 11:56:27 +0200","snippet" : "InformationThis simple door switch is based on a magnet and a reed switch. The magnet and the reed switch are both encased in ABS plastic with handy mounting holes. These sensors are commonly seen in consumer alarm systems and make an ideal addition to any Arduino or Raspberry Pi based alarm system.The reed switch is simply a magnetic activated switch, as long as a magnet is close to it the reed switch will remain closed. Once the magnet is removed, the switch opens, breaking the circuit. The reed switch can handle a maximum of 100mA and a maximum of 200VDC.Each half of the sensor can be mounted with screws or the included adhesive backing.Features Normally open reed switch Rated current: 100 mA max Sensor Dimensions: 27.75 x 14.4 x 8.5mm Mounting Holes: 18.2mm / 0.72â€³ Rated voltage: 200 VDC max Distance: 15mm max Magnet Dimensions: 27.75 x 14.4 x 8.5mm Wire Length: 330mm / 13â€³More information â€¦SetupIn order to use the Magnetic (door) button use the following settings:Mandatory Hardware Magnetic (door) button Address Enter the physical pin number on which the device is connectedEx: 27Or when used with an IO expander use format: pcf857[4/5]-[IO-expander-port],[I2C_address],[I2C_buss] where I2C_buss is optionalEx:pcf8575-9,0x4c,3Other settings can be found at the button setup information"},{"title": "Motion sensor","url": "/TerrariumPI/hardware/button/motion-sensor/","categories": "Hardware, Button","tags": "button, motion","date": "2021-10-29 11:56:27 +0200","snippet" : "InformationDue to its design, the PIR motion sensor module is very easy to use because it already has the components installed. Raspberry Pi motion detectors in home automation and/or outdoor applications (as a classic outdoor motion detector) are easier than ever to implement.This Arduino/Raspberry Pi motion sensor responds and moves, with the â€œstrengthâ€ of movement controlled by an adjustable resistor (potentiometer). So you can set the motion sensor very sensitive, or try to avoid â€œnoiseâ€. As soon as something moves, a signal is sent that can be received and responded by the Raspberry Pi.More information â€¦SetupIn order to use the Motion sensor use the following settings:Mandatory Hardware Motion sensor Address Enter the physical pin number on which the device is connectedEx: 27Or when used with an IO expander use format: pcf857[4/5]-[IO-expander-port],[I2C_address],[I2C_buss] where I2C_buss is optionalEx:pcf8575-9,0x4c,3Other settings can be found at the button setup information"},{"title": "Qwiic Relay","url": "/TerrariumPI/hardware/relay/qwiic-relay/","categories": "Hardware, Relay","tags": "relay, i2c","date": "2021-10-31 15:18:57 +0100","snippet" : "InformationQwiic Relays are available in different configurations: Single relay Quad relay Dual Solid State relay Quad Solid State relayThese relays are addressable through I2C and can be controlled by any micro-controller with I2C support.This allows to control various appliances.More information â€¦SetupIn order to use the Qwiic Relay use the following settings:Mandatory Hardware Qwiic Relay Address &amp;lt;I2C Address&amp;gt;,[I2C Bus] where the I2C bus is optionalEx: 1,0x3fOther settings can be found at the relay setup information"},{"title": "Raspberry PI camera","url": "/TerrariumPI/hardware/webcam/raspberry-pi-camera/","categories": "Hardware, Webcam","tags": "webcam, live, picture","date": "2021-12-04 21:31:47 +0100","snippet" : "InformationYou can use the official Raspberry PI camera module to setup a webcam.Using as a still picture webcam, the maximum resolution is: 3280 x 2464 pixelsWebcam type: Still pictureMore information â€¦SetupIn order to use the Raspberry PI camera use the following settings:Mandatory Hardware Raspberry PI camera Address Fixed to rpicamOther settings can be found at the webcam setup information"},{"title": "USB camera","url": "/TerrariumPI/hardware/webcam/usb-camera/","categories": "Hardware, Webcam","tags": "webcam, live, picture","date": "2021-12-04 21:31:47 +0100","snippet" : "InformationUse any USB webcam that is supported by Linux.ControlsAs this is a Video4Linux device, you can use v4l2-ctl tools to control the focus, white balance and other options. This is not possible with the TerrariumPI software. A good website with more information and how to use it.Webcam type: Still pictureSetupIn order to use the USB camera use the following settings:Mandatory Hardware USB camera Address Enter the device pathEx: /dev/video0Other settings can be found at the webcam setup information"},{"title": "Sequent Microsystems 4 Relay Card Ver. 4","url": "/TerrariumPI/hardware/relay/sequent-microsystems-4-relay-card-ver-4/","categories": "Hardware, Relay","tags": "relay, i2c, 4relay","date": "2021-12-06 22:00:41 +0100","snippet" : "InformationPerfect add-on to your project when you have to control large number of loads. Stackable to 8 layers, the card can add up to 64 relays to each Raspberry Pi in a compact form factor.Pluggable connectors make the 8-RELAYS card easy to use when multiple cards are stacked up. All relays have NO and NC contacts and can switch 120VAC/8A or 24VDC/8A.Status LEDs conveniently grouped on one side of the board show when relays are on or off. A power LED shows when power is applied. A reset switch permits shutting down the Raspberry Pi without the use of a keyboard and monitor.More information â€¦SetupIn order to use the Sequent Microsystems 4 Relay Card Ver. 4 use the following settings:Mandatory Hardware Sequent Microsystems 4 Relay Card Ver. 4 Address Enter the relay number from 1 - 4. Optional add the stack level number. Default 0.1,2Other settings can be found at the relay setup information"},{"title": "Sequent Microsystems 8 Relay Card Ver. 4","url": "/TerrariumPI/hardware/relay/sequent-microsystems-8-relay-card-ver-4/","categories": "Hardware, Relay","tags": "relay, i2c, 8relay","date": "2021-12-06 22:00:41 +0100","snippet" : "InformationPerfect add-on to your project when you have to control large number of loads. Stackable to 8 layers, the card can add up to 64 relays to each Raspberry Pi in a compact form factor.Pluggable connectors make the 8-RELAYS card easy to use when multiple cards are stacked up. All relays have NO and NC contacts and can switch 120VAC/8A or 24VDC/8A.Status LEDs conveniently grouped on one side of the board show when relays are on or off. A power LED shows when power is applied. A reset switch permits shutting down the Raspberry Pi without the use of a keyboard and monitor.More information â€¦SetupIn order to use the Sequent Microsystems 8 Relay Card Ver. 4 use the following settings:Mandatory Hardware Sequent Microsystems 8 Relay Card Ver. 4 Address Enter the relay number from 1 - 8. Optional add the stack level number. Default 0.1,2Other settings can be found at the relay setup information"},{"title": "AtlasScientific I2C sensor","url": "/TerrariumPI/hardware/sensor/atlasscientific-i2c-sensor/","categories": "Hardware, Sensor","tags": "sensor, temperature, humidity, conductivity, ph, co2, pressure, i2c","date": "2023-10-08 02:03:03 +0200","snippet" : "InformationAtlas Scientific LLC provides embedded systems scientific equipment, specializing in chemicals, sensors, electronic and hardware components and kits.The company offers pH systems, ORP systems, dissolved oxygen systems, data loggers, FLO-30 flow meters, Arduino Rapid Development Shields, digital field-ready temperature sensors with data logger, field-ready temperature sensors, color detector sensors, serial ports, and debuggers.The range also includes chemicals such as calibration solutions, pH sensors, redox sensors, dissolved oxygen sensors and conductivity sensors.More information â€¦SetupIn order to use the AtlasScientific I2C sensor use the following settings:Mandatory Hardware AtlasScientific I2C sensor Types co2, conductivity, humidity, ph, pressure, temperature Address &amp;lt;I2C Address&amp;gt;,[I2C Bus] where the I2C bus is optionalEx: 0x3fOther settings can be found at the sensor setup information"},{"title": "LYWSD03MMC bluetooth sensor","url": "/TerrariumPI/hardware/sensor/lywsd03mmc-bluetooth-sensor/","categories": "Hardware, Sensor","tags": "sensor, temperature, humidity","date": "2021-12-25 13:27:31 +0100","snippet" : "InformationThis Bluetooth Temperature Humidity Sensor is a smart sensor with Bluetooth connectivity by using a free app which continuously displays your home or greenhouse indoor environment (temperature and humidity).Features Compact design. Constantly monitors and displays humidity (air moisture), temperature in Celsius or Fahrenheit, and battery life. Displays a happy face when conditions are right, and a displeased face when wrong. Suitable for indoor environments. Bluetooth connectivity and monitoring via BTLE. Adhesive mount and battery included. Low power consumption. Ideal for your home, greenhouse and more. User Manual in JapaneseWarning: Sometimes firmwares can be updated by the manufacturer via the app, which may cause this device to not communicate with TerrariumPI anymore. TerrariumPI doesnâ€™t need any app setup for this device, it will work out of the box.Some command line tools support more detailed features for this sensor like configuring the zones for the emoticon, changing display temperature between Celsius and Fahrenheit, and other more complex interactions.This is sometimes advertised as a â€œMijaâ€ or a â€œMi Tempâ€ device, but the page will usually mention â€œLYWSD03MMCâ€ specifically if itâ€™s one of these.More information â€¦SetupAuto detectThis sensor will be auto detected during startup or added by â€˜Scan sensorsâ€™ in the menu.In order to use the LYWSD03MMC bluetooth sensor use the following settings:Mandatory Hardware LYWSD03MMC bluetooth sensor Types humidity, temperature Address Bluetooth MAC address. Ex: a4:c1:38:66:e3:52Other settings can be found at the sensor setup information"},{"title": "BME680 sensor","url": "/TerrariumPI/hardware/sensor/bme680-sensor/","categories": "Hardware, Sensor","tags": "sensor, temperature, humidity, pressure, altitude","date": "2022-04-01 18:01:46 +0200","snippet" : "InformationThe BME680 is the first gas sensor that integrates high-linearity and high-accuracy gas, pressure, humidity and temperature sensors. It is especially developed for mobile applications and wearables where size and low power consumption are critical requirements. The BME680 guarantees - depending on the specific operating mode - optimized consumption, long-term stability and high EMC robustness. In order to measure air quality for personal wellbeing the gas sensor within the BME680 can detect a broad range of gases such as volatile organic compounds (VOC).More information â€¦SetupIn order to use the BME680 sensor use the following settings:Mandatory Hardware BME680 sensor Types altitude, humidity, pressure, temperature Address &amp;lt;I2C Address&amp;gt;,[I2C Bus] where the I2C bus is optionalEx: 0x3f,3Other settings can be found at the sensor setup information"},{"title": "HD30A 4 Channel Electromagnetic I2C Relay 12V 30A","url": "/TerrariumPI/hardware/relay/hd30a-4-channel-electromagnetic-i2c-relay-12v-30a/","categories": "Hardware, Relay","tags": "relay, HD30A","date": "2023-10-08 02:03:03 +0200","snippet" : "InformationHD30A 4CH/8CH Channel Electromagnetic relay modules with I2C controlling interface HD30A 4CH/8CH Channel electromagnetic relay boards has been designed foreasy inductive and resistive high current load switching via I2C communication protocol. For wiring this board is needed only 4 wires - 2 wires with data lines SCL (serial clock) and SDA (serial data) and 2 wires with power supply VCC and GND. On board is special I2C slave address switch, which help to select board slave address. Total available eight slave addresses, therefor on one I2C line can be connected 8 relays modules. That mean user can control up to 64 relays separately. Please note, canâ€™t be connected two board with the same addresses on the I2C line. All I2C slave addresses should be different. For the all available I2C slave addresses watch table below.This HD30A 4CH/8CH channel I2C electromagnetic relay modules are fully compatible with any microcontroller (AVR, PIC, ARM, STM32), popular platform of Arduino and Raspberry, Wi-Fi ESP8266 and ESP32, and with other microcontrollers witch was I2C interface. I2C communication speed is up to 100kHz. Module power supply is 12.0V DC with integrated linear voltage regulators 3.3V and 5.0V. Power supply current should be at least 1000mA @ 12V.In this module are used high quality electromagnetic relays Rayex/ZETTLER. These relays have SPDT switching terminals and can switch load current up to 30 Amps. Switching load voltage up to 240 Volts. For safe switching load wires connection are used quality screw terminals KF-128-3P. Each relay is indicated with led (color red)HD30A 4CH/8CH Channel Electromagnetic relaySetupIn order to use the HD30A 4 Channel Electromagnetic I2C Relay 12V 30A use the following settings:Mandatory Hardware GPIO Address Enter the IO Expender type, the relay number (starting at 1), and then the I2C address with optional I2C bus number: pcf8574-1,0x4c,3Other settings can be found at the relay setup information"},{"title": "Honeywell HumidIcon HIH8000 sensor","url": "/TerrariumPI/hardware/sensor/honeywell-humidicon-hih8000-sensor/","categories": "Hardware, Sensor","tags": "sensor, temperature, humidity","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationHoneywell HumidIconâ„¢ Digital Humidity/Temperature Sensors, HIH8000 Series, are digital output-type relative humidity (RH) and temperature sensors combined in the same package. These sensors provide an accuracy level of Â±2.0 %RH and a temperature accuracy level of Â±0.5 Â°C.Features Industry-leading long-term stability True temperature-compensated digital I2C or SPI output Industry-leading reliability Energy efficiency Lowest total cost solution Ultra-small package size and options Other accuracies available: Â±1.7 %RH (HIH9000 Series), Â±3.0 %RH (HIH7000 Series), Â±4.0 %RH (HIH6100 Series), and Â±4.5 %RH (HIH6000 Series)More information â€¦SetupIn order to use the Honeywell HumidIcon HIH8000 sensor use the following settings:Mandatory Hardware Honeywell HumidIcon HIH8000 sensor Types humidity, temperature Address &amp;lt;I2C Address&amp;gt;,[I2C Bus] where the I2C bus is optionalEx: 0x3fOther settings can be found at the sensor setup information"},{"title": "HTU21D sensor","url": "/TerrariumPI/hardware/sensor/htu21d-sensor/","categories": "Hardware, Sensor","tags": "sensor, temperature, humidity","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThe HTU21D is a low-cost, easy to use, highly accurate, digital humidity and temperature sensor. This sensor is ideal for environmental sensing and data logging and perfect for a weather stations or humidor control systems. All you need is two lines for I2C communication and youâ€™ll have relative humidity readings and very accurate temperature readings as a bonus!There are only four pins that need to be hooked up in order to start using this sensor in a project. One for VCC, one for GND, and two data lines for I2C communication. This breakout board has built in 4.7k pull up resistors for I2C communications. If youâ€™re hooking up multiple I2C devices on the same bus, you may want to disable these resistors.Note: Full drops of water can damage the sensor. We recommend wrapping the board in Teflon/irrigation tape for extreme conditions where water droplets may find their way onto the sensor.More information â€¦SetupIn order to use the HTU21D sensor use the following settings:Mandatory Hardware HTU21D sensor Types humidity, temperature Address &amp;lt;I2C Address&amp;gt;,[I2C Bus] where the I2C bus is optionalEx: 0x3fOther settings can be found at the sensor setup information"},{"title": "IRF520 Dimmer","url": "/TerrariumPI/hardware/relay/irf520-dimmer/","categories": "Hardware, Relay","tags": "relay, dimmer, irf520, mosfet","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThis little module is a breakout board for the IFR520 MOSFET transistor. The module is designed to switch heavy DC loads from a single digital pin of your micro-controller. Its main purpose is to provide a low cost way to drive a DC motor for robotics applications, but the module can be used to control most high current DC loads. Screw terminals are provided to interface to your load and external power source. An LED indicator provides a visual indication of when your load is being switched.More information â€¦SetupIn order to use the IRF520 Dimmer use the following settings:Mandatory Hardware IRF520 Dimmer Address Physical GPIO pin number 1 - 40CalibrationThis is only available for dimmers. Dimmer frequency in Hz Default frequency: 1000 HzOther settings can be found at the relay setup information"},{"title": "JSN-SR04T ultrasonic ranging sensor","url": "/TerrariumPI/hardware/sensor/jsn-sr04t-ultrasonic-ranging-sensor/","categories": "Hardware, Sensor","tags": "sensor, distance","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThis water proof ultrasonic sensor has good performance with almost the same usage as the HC-S04 module.Features Small size, easy to use Low voltage, low power consumption High accuracy Strong anti-jamming Integrated with wire enclosed waterproof probe, suitable for wet, harsh measurement environmentsFor a Raspberry PI it needs resistors on the ECHO port.More information â€¦SetupIn order to use the JSN-SR04T ultrasonic ranging sensor use the following settings:Mandatory Hardware JSN-SR04T ultrasonic ranging sensor Types distance Address Enter the physical pin number where the trigger and echo pins are connected in that orderEx: 27,23Other settings can be found at the sensor setup information"},{"title": "K30 CO2 sensor","url": "/TerrariumPI/hardware/sensor/k30-co2-sensor/","categories": "Hardware, Sensor","tags": "sensor, co2","date": "2021-10-24 16:48:31 +0200","snippet" : "InformationThe K30 10% (100,000 ppm) carbon dioxide sensor module is a maintenance-free transmitter module intended to monitor high levels of CO2 found in storage tanks or biological applications. It is an accurate, low-cost solution for OEMs products like CO2 safety alarms or leak detectors.Features Built on tested K30 Sensor platform Simple to install, pre-calibrated and ready-to-use Proven reliability, low cost Maintenance free in normal applications Flexible analog and digital outputsMore information â€¦SetupIn order to use the K30 CO2 sensor use the following settings:Mandatory Hardware K30 CO2 sensor Types co2 Address Serial address and connect to GPIO pin 8 (TX) and 10 (RX). Ex: /dev/ttyS0Other settings can be found at the sensor setup information"},{"title": "Light sensor","url": "/TerrariumPI/hardware/button/light-sensor/","categories": "Hardware, Button","tags": "button, ldr, light","date": "2021-10-29 11:56:27 +0200","snippet" : "InformationLDR is a sensor that lets electrons flow through it when it is exposed to enough light. When there is enough light, the electrons start flowing into the capacitor. The capacitor will start charging, and when the voltage across the capacitor goes above 2.1 V, the input pin of the GPIO will read HIGH. At that point, the program will set the output pin to LOW, which will turn the LED OFF. On the other hand, when there is not enough light out, the electrons stop flowing through the LDR, and the capacitor starts discharging. When the voltage across the capacitor drops below 2.1 V, the input pin reads LOW.It is possible to use different capacitors. The value can be entered in the calibration part of the button. A lower value means faster response.More information â€¦SetupIn order to use the Light sensor use the following settings:Mandatory Hardware Light sensor Address Enter the physical pin number on which the device is connectedEx: 27CalibrationThis is only available for light sensors. Capacitor value in ÂµF Enter the value of the capacitorOther settings can be found at the button setup information"},{"title": "Live HLS Stream","url": "/TerrariumPI/hardware/webcam/live-hls-stream/","categories": "Hardware, Webcam","tags": "webcam, live, remote, streaming","date": "2021-12-04 21:31:47 +0100","snippet" : "InformationIf you have already a live stream running which is of the format HLS, you can use that as a webcam source. Just enter the full url to the m3u8 master playlist.Multi bitrate streams are not supported at the moment.Webcam type: Live streamingMore information â€¦SetupIn order to use the Live HLS Stream use the following settings:Mandatory Hardware Live HLS Stream Address A HLS live stream master playlistEx: https://stream.server.com/camera/live.m3u8Other settings can be found at the webcam setup information"},{"title": "Local file webcam","url": "/TerrariumPI/hardware/webcam/local-file-webcam/","categories": "Hardware, Webcam","tags": "webcam, live, picture","date": "2021-12-04 21:31:47 +0100","snippet" : "InformationIf you have already a system in place that creates images from a webcam on disk, you can use those images here for a webcam.Webcam type: Still pictureSetupIn order to use the Local file webcam use the following settings:Mandatory Hardware Local file webcam Address A webcam that reads a local image file. Prefix with local://Ex: local:///opt/webcam/picture.jpgOther settings can be found at the webcam setup information"},{"title": "I2C 4Channels LED AC dimmer","url": "/TerrariumPI/hardware/relay/i2c-4channels-led-ac-dimmer/","categories": "Hardware, Relay","tags": "relay, dimmer, i2c, ac mains","date": "2022-06-26 18:42:01 +0200","snippet" : "InformationOnly 4 wires are needed to control this board !With this module, you can control the intensity of incandescent lamps, LED dimmable bulbs, power heating elements or fan speed controlled through a micro controller or Arduino/Raspberry boards.Compatible with any Arduino, Raspberry or micro controller. Dimming method - leading edge Working voltage - 110 or 240 VAC Current per channel - up to 3A Compatible with 50Hz and 60Hz AC Line AC Line autodetect function PCB dimensions - 140mm x 60mm Distance between holes: vertical 51mm, horizontal 131mm Mounting holes diameter: 3.2mm 100kHz I2C bus interface I2C bus pull up switch on board I2C device address select switch on board Can be connected up to 8 devices on I2C bus (8 devices x 4 = 32 channels!!!) 50HZ LED - show detected AC 50HZ Line 60HZ LED - show detected AC 60HZ Line BOTH LED Flashing - AC Line not detectedMore information â€¦SetupIn order to use the I2C 4Channels LED AC dimmer use the following settings:Mandatory Hardware I2C 4Channels LED AC dimmer Address &amp;lt;relay_number&amp;gt;,&amp;lt;I2C Address&amp;gt;,[I2C Bus] where the I2C bus is optionalEx: 1,0x70Other settings can be found at the relay setup information"},{"title": "I2C Multiplexer","url": "/TerrariumPI/hardware/i2c-multiplexer/","categories": "Hardware, I2C","tags": "pca9548, i2c, multiplexer","date": "2023-10-08 02:03:03 +0200","snippet" : "With this I2C multiplexer you can add multiple I2C buses that can hold multiple sensors and or relays. This makes it also possible to use multiple sensors with the same I2C address, but connecting them to different buses.In order to use this multiplexer, you have to connect it to the first I2C bus, which is normally GPIO pin 3 and 5 and then add an extra config line to /boot/config.txt. Put the following line below the line: dtparam=i2c_arm=on:dtoverlay=i2c-mux,pca9548,addr=0x70 (addr defaults to 0x70 so can be omitted if using that address).After rebooting, you should have up to 8 new I2C devices at the location: /dev/i2c-*. You can then use the I2C address as normal but you need to add the I2C bus.This should work for pca9542 (2 channel), pca9545 (4 channel), and pca9548 (8 channel) devices.More info: #705 and thanks to @Dragonfly-terra"},{"title": "IO Expander","url": "/TerrariumPI/hardware/io-expander/","categories": "Hardware, Button, I2C","tags": "button, expander","date": "2022-04-04 21:40:57 +0200","snippet" : "With the IO expander pcf8574 and pcf8575 you can add more GPIO relays and buttons to TerrariumPI. This IO expander does only support on/off actions. So it is not possible to use this IO expander with a DHT sensor. You cannot read out the extra GPIO ports.AddressingIn order to use this IO expander, enter the following address in the GPIO relay or button address field.pcf857&amp;lt;4/5&amp;gt;-&amp;lt;IO expander port&amp;gt;,&amp;lt;I2C Address&amp;gt;,[I2C Bus number]Either use pcf8574 or pcf8575 to select the used IO expander.&amp;lt;IO expander port&amp;gt; is mandatory and is a number from 0 till max ports - 1.&amp;lt;I2C Address&amp;gt; is mandatory and specified here.PCF8574This is a 8 ports IO expander. The yellow on the image.PCF8575This is a 16 ports IO expander. The right blue board on the image."},{"title": "LED-Warrior18","url": "/TerrariumPI/hardware/relay/led-warrior18/","categories": "Hardware, Relay","tags": "relay, dimmer, LED-Warrior18, LED","date": "2022-08-01 16:28:11 +0200","snippet" : "InformationThe LED-Warrior18 is a LED driver with I2C interface and two separate channels that can be controlled independently.Due to the I2C interface it can be controlled with all common I2C hosts (e.g. Arduino, ESP32 or Raspberry Pi). The power supply of the LED-Warrior18 is done via the I2C interface. The output side can be operated with a voltage between 5.5 and 40V DC and max. 4A per channel.The LED-Warrior18 can be equipped with screw terminals on the output side as well as with a 1x4 pin header for the I2C interface (screw terminals and pin header not included).All further information about the product can be found on the product page.Software and sample programs for the LED-Warrior18 can be downloaded from our Github repository.Technical Details - LED-Warrior18 I2C to dual PWM LED driver PWM output at 730 Hz 2 x 16 bit PWM ranging from 0.001% to 100% 8 Bit data to log mapping Synch mode for controlling multiple units Default power on status programmable Programmable period length for higher frequency/lower resolution Minimal external circuitry 5 V supply Measurement: 35mm x 25mmMore information â€¦SetupIn order to use the LED-Warrior18 use the following settings:Mandatory Hardware LED-Warrior18 Address &amp;lt;relay_number&amp;gt;,&amp;lt;I2C Address&amp;gt;,[I2C Bus] where the I2C bus is optionalEx: 1,0x70CalibrationThis is only available for dimmers. Dimmer frequency in Hz Default frequency: 65535 HzOther settings can be found at the relay setup information"},{"title": "Remote Button","url": "/TerrariumPI/hardware/button/remote-button/","categories": "Hardware, Button","tags": "button, remote, json, temperature, humidity, fertility, ph, uva, moisture, uvb, altitude, co2, distance, uvi, pressure, light","date": "2023-10-08 02:03:03 +0200","snippet" : "InformationWith the remote button you can use an external source for button actions or door usage. This needs to be a JSON source. As this is a button sensor, which is normally polled about 10 times a second, there is an extra timeout in requesting the data from the remote source. So these remote buttons will react slower than physical buttons.By using JSON path traversal in the url after the # sign, you can specify which value to use from the JSON data.The value 0 will be threated as off or door closed. Any other numeric value above 0 will threated as pressed or door open. If you cannot control the remote source there is an option to inverse the value in the calibration part.CalibrationAt the calibration section you can set the timeout between checks in seconds and if the remote value needs to be reversed.More information â€¦SetupIn order to use the Remote Button use the following settings:Mandatory Hardware Remote Button Address Enter the full url and json path traversal. More information at remote hardware.Other settings can be found at the button setup information"},{"title": "Remote file webcam","url": "/TerrariumPI/hardware/webcam/remote-file-webcam/","categories": "Hardware, Webcam","tags": "webcam, live, picture, remote","date": "2021-12-04 21:31:47 +0100","snippet" : "InformationAny remote webcam that can produce a JPG image on a url can be used here.Webcam type: Still pictureSetupIn order to use the Remote file webcam use the following settings:Mandatory Hardware Remote file webcam Address Enter the full url to the webcam imageEx: http://axis.local.lan/jpg/1/image.jpgOther settings can be found at the webcam setup information"},{"title": "Live Raspberry PI camera","url": "/TerrariumPI/hardware/webcam/live-raspberry-pi-camera/","categories": "Hardware, Webcam","tags": "webcam, live, local, streaming","date": "2021-12-04 21:31:47 +0100","snippet" : "InformationYou can use the official Raspberry PI camera module to setup a webcam.Using as a live streaming webcam, the maximum resolution is: 1920 x 1080 pixels.WarningYou can only have one live streaming webcam. So when you add this type of webcam you cannot add another of this type. Also this will eliminate the use of the USB live webcam as that is using the same hardware chip on the Raspberry PI.Webcam type: Live streamingMore information â€¦SetupIn order to use the Live Raspberry PI camera use the following settings:Mandatory Hardware Live Raspberry PI camera Address Fixed to rpicamOther settings can be found at the webcam setup information"},{"title": "Sensirion SHT4X sensor","url": "/TerrariumPI/hardware/sensor/sensirion-sht4x-sensor/","categories": "Hardware, Sensor","tags": "sensor, temperature, humidity","date": "2022-04-08 14:42:37 +0200","snippet" : "InformationSensirion Temperature/Humidity sensors are some of the finest &amp;amp; highest-accuracy devices you can get. And finally, we have some that have a true I2C interface for easy reading. The SHT40 sensor is the fourth generation (started at the SHT10 and worked its way up to the top!). The SHT40 has an excellent Â±1.8% typical relative humidity accuracy from 25 to 75% and Â±0.2 Â°C typical accuracy from 0 to 75 Â°C.Unlike some earlier SHT sensors, this sensor has a true I2C interface for easy interfacing with only two wires (plus power and ground!). Thanks to the voltage regulator and level shifting circuitry weâ€™ve included on the breakout It is also is 3V or 5V compliant, so you can power and communicate with it using any micro controller or microcomputer.Features Relative humidity accuracy: up to Â±1.8 %RH Temperature accuracy: up to Â±0.2 Â°C Breakout supply voltage: 3.3 to 5V Average bare sensor current: 0.4 Î¼A (at meas. rate 1 Hz) Idle bare sensor current: 80 nA I2C fast mode plus, CRC checksum Operating range: 0..100 %RH, -40..125 Â°C Fully functional in condensing environment Variable power heater NIST traceability for sensor JEDEC JESD47 qualification for sensor Mature technology from global market leader Sensirion I2C address 0x44More information â€¦SetupIn order to use the Sensirion SHT4X sensor use the following settings:Mandatory Hardware Sensirion SHT4X sensor Types humidity, temperature Address &amp;lt;I2C Address&amp;gt;,[I2C Bus] where the I2C bus is optionalEx: 0x44Other settings can be found at the sensor setup information"},{"title": "RTSP camera","url": "/TerrariumPI/hardware/webcam/rtsp-camera/","categories": "Hardware, Webcam","tags": "webcam, live, picture","date": "2022-04-08 17:25:26 +0200","snippet" : "InformationAny RTSP camera can be used. There will be an image taken every 30 seconds.Webcam type: Still pictureSetupIn order to use the RTSP camera use the following settings:Mandatory Hardware RTSP camera Address Enter the device rtsp urlEx: rtsp://server.lan/streamOther settings can be found at the webcam setup information"},{"title": "Sensirion SHT3XD sensor","url": "/TerrariumPI/hardware/sensor/sensirion-sht3xd-sensor/","categories": "Hardware, Sensor","tags": "sensor, temperature, humidity","date": "2022-05-05 10:09:22 +0200","snippet" : "InformationThe SHT3x-DIS has increased intelligence, reliability and improved accuracy specifications compared to its predecessor. Its functionality includes enhanced signal processing, two distinctive and user selectable I2C addresses and communication speeds of up to 1 MHz. The DFN package has a footprint of 2.5 x 2.5 mm2 while keeping a height of 0.9 mm.This allows for integration of the SHT3x-DIS into a great variety of applications.Features Fully calibrated, linearized, and temperature compensated digital output Wide supply voltage range, from 2.4 V to 5.5 V I2C Interface with communication speeds up to 1 MHz and two user selectable addressesSetupIn order to use the Sensirion SHT3XD sensor use the following settings:Mandatory Hardware Sensirion SHT3XD sensor Types humidity, temperature Address &amp;lt;I2C Address&amp;gt;,[I2C Bus] where the I2C bus is optionalEx: 0x44Other settings can be found at the sensor setup information"},{"title": "Shelly","url": "/TerrariumPI/hardware/relay/shelly/","categories": "Hardware, Relay","tags": "relay, wifi, shelly","date": "2023-01-05 22:26:29 +0100","snippet" : "InformationWiFi-operated smart relay, 1 channel 16AControl a wide range of home appliances and office equipment (lights, power lines, security systems, heaters, radiators, sockets, LED strips, etc.) from anywhere. Dry contacts Extremely fast processor â€“ ESP32, Improved API interface Enhanced safety Enhanced security - MQTT and WSS support, TLS and custom certificates support Designed to fit in most standard electrical boxes and switches Easy control through the Shelly app, various protocols, and platforms, as well as voice assistantsMore information â€¦SetupIn order to use the Shelly use the following settings:Mandatory Hardware Shelly Address Enter the hostname or IP address and optional a relay number separated by a dash.Ex: http://[PASSWORD]@[HOST]#[POWER_SWITCH_NR]Other settings can be found at the relay setup information"},{"title": "Live USB camera","url": "/TerrariumPI/hardware/webcam/live-usb-camera/","categories": "Hardware, Webcam","tags": "webcam, live, usb, streaming","date": "2023-05-12 21:52:02 +0200","snippet" : "InformationUse any USB webcam that is supported by Linux.WarningYou can only have one live streaming webcam. So when you add this type of webcam you cannot add another of this type. Also this will eliminate the use of the RPI live webcam as that is using the same hardware chip on the Raspberry PI.ControlsAs this is a Video4Linux device, you can use v4l2-ctl tools to control the focus, white balance and other options. This is not possible with the TerrariumPI software. A good website with more information and how to use it.Webcam type: Live streamingSetupIn order to use the Live USB camera use the following settings:Mandatory Hardware Live USB camera Address Enter the device pathEx: /dev/video0Other settings can be found at the webcam setup information"},{"title": "Live RTSP camera","url": "/TerrariumPI/hardware/webcam/live-rtsp-camera/","categories": "Hardware, Webcam","tags": "webcam, live, streaming, rtsp","date": "2023-08-03 21:13:47 +0200","snippet" : "InformationAny RTSP camera can be used. It will try to transcode through the video GPU to a HLS live streamWebcam type: Live streamingSetupIn order to use the Live RTSP camera use the following settings:Mandatory Hardware Live RTSP camera Address Enter the device rtsp urlEx: rtsp://server.lan/streamOther settings can be found at the webcam setup information"},{"title": "YL-69 sensor (digital)","url": "/TerrariumPI/hardware/sensor/yl-69-sensor-digital/","categories": "Hardware, Sensor","tags": "sensor, moisture","date": "2023-10-08 02:03:03 +0200","snippet" : "InformationSoil moisture module is most sensitive to the ambient humidity is generally used to detect the moisture content of the soil. Module to reach the threshold value is set in the soil moisture, DO port output high, when the the soil humidity exceeds a set threshold value, the module D0 output low.The digital output D0 can be connected directly with the micro-controller to detect high and low by the micro-controller to detect soil moisture.The digital outputs DO shop relay module can directly drive the buzzer module, which can form a soil moisture alarm equipment.Analog output AO and AD module connected through the AD converter, you can get more precise values of soil moisture.This sensor can operate longer, when Power management. is used for this sensor.Features Brand new and high quality This is a simple water sensor, which can be used to detect soil moisture Dual output mode, analog output is accurate A fixed bolt hole for easy installation With power indicator (red) and digital switching output indicator (green) LM393 comparator chip, stableSpecifications VCC: 3.3V-5V GND: GND DO: digital output interface(0 and 1) AO: analog output interface Panel PCB Dimension: 3 x 1.5 cm Soil Probe Dimension: 6 x 2 cmMore information â€¦SetupIn order to use the YL-69 sensor (digital) use the following settings:Mandatory Hardware YL-69 sensor (digital) Types moisture Address Enter the physical pin number on which the device is connectedEx: 27 This sensor does support (power management)Other settings can be found at the sensor setup information"},{"title": "Cleanup database","url": "/TerrariumPI/faq/cleanup-database/","categories": "Website, FAQ","tags": "database, cleanup, space","date": "2022-12-08 20:12:13 +0100","snippet" : "If TerrariumPI is running for years it happens that the database get rather big and therefore slowing down the system. Also deleting the data will not give back the disk space. So there is a script which can cleanup the database and reclaim disk space by reducing the database.In order to cleanup the database, make sure that TerrariumPI is stopped! Else there is a possibility on database corruption.When you cleanup the database, we need at least the same amount of free space as the size of the database. The script will check this. Make sure you have enough free diskspace. If this is a problem, you can also try to download the database and run this on a desktop/laptop.The cleanup can take up to 10 hours!. So make sure your environment is stable and can survive for that period. Enter the TerrariumPI folder: cd /home/pi/TerrariumPI/ Enable Python3 virtual environment: source venv/bin/activate Go to the folder â€˜contribâ€™: cd contrib Run the command: python db_cleanup.pyThis will start the script. It will first show some information about required disk space and how much data will be kept.123456789101112131415161718This script will cleanup your terrariumpi.db file. We will keep 420 days, 0:00:00 of data from now. If you want to make a backup first, please enter no and make your backup.Database size: 2.04 GB, free diskspace: 5.19 GBWould you like to continue? Enter yes to start. Anything else will abort.yesStarting cleaning up table &#39;SensorHistory&#39;. Deleting data older then 2022-02-20 18:27:17 in batches of 10000 records. This could take some time...Analyzing total rows: 13542131 from 2022-02-20 18:14 till 2023-04-16 03:56. Took 1.43 secondsAnalyzing rows to clean up: 322 from 2022-02-20 18:14 till 2022-02-20 18:27. Took 1.12 secondsRemoving 322 rows (0.00%) of data in 1 steps of 10000 rows.0%....10%....20%....30%....40%....50%....60%....70%....80%....90%....100%Clean up is done in 1.20 secondsStarting cleaning up table &#39;ButtonHistory&#39;. Deleting data older then 2022-02-20 18:27:17 in batches of 10000 records. This could take some time...Analyzing total rows: 23094 from 2022-02-20 19:00 till 2023-04-16 03:00. Took 0.01 secondsAnalyzing rows to clean up: No data, nothing to do!Start reclaiming lost space. This will rebuild the database and give all the delete space back. This will take a lot of timeDone in 10.43 secondsDatabase is now cleaned and should be reduced in size:Database size: 2.04 GB, free diskspace: 172.71 GBRestart TerrariumPI and check if the sensor graphs still working. If it is al working, remove the file ../data/terrariumpi.db.oldWhen this done, you can restart TerrariumPI again. Check if all graphs are working. If that is the case, you can delete the backup database at the location â€˜data/terrariumpi.db.oldâ€™: rm ../data/terrariumpi.db.old"},{"title": "Custom logging","url": "/TerrariumPI/faq/custom-logging/","categories": "Website, FAQ","tags": "logging","date": "2021-08-17 15:23:36 +0200","snippet" : "By default all logging is done in the folder log where the actual log files are written to a temporary memory share. This is done to reduce the write wear on the SD card. A downside is that when the Pi reboots, all log info of that day is gone. During the night, the log file will be archived and that is stored on the SD card. So archived log files will survive reboots.In order to change the default logging of TerrariumPI you only need to create your own custom logging configuration file with the name logging.custom.cfg and place that in the log folder. So start with:cp logging.cfg log/logging.custom.cfgAnd start editing the log/logging.custom.cfg file with an editor. After editing restart TerrariumPI and the new logging will be loaded.Enable debugIn order to enable debug messages add the fileHandlerDebug handler to the handlers in section [logger_root]Syslog (local and remote)In order to enable (remote) syslog logging add the syslogHandler handler to the handlers in section [logger_root]. Then you have to configure to use either the local syslog server or a remote syslog server. By default it uses the local syslog. To use remote change:&#39;/dev/log&#39; to (&#39;hostip&#39;,portnr)Local: args=(&#39;/dev/log&#39;,&#39;local6&#39;)Remote: args=((&#39;192.168.1.1&#39;,514),&#39;local6&#39;)Next you need to tell Syslog which facility it is using. The default is LOCAL6. To enable this, create a file in the folder /etc/rsyslog.d for example:/etc/rsyslog.d/terrariumpi.confAnd add then:local6.* /var/log/terrariumpi.logFinally restart rsyslog and you should receive log messages from TerrariumPI"},{"title": "Energenie USB is not found / auto detected","url": "/TerrariumPI/faq/energenie-usb-is-not-found-auto-detected/","categories": "Website, FAQ","tags": "energenie, relay","date": "2021-10-12 21:45:05 +0200","snippet" : "Some Energenie USB devices are to new to detect with the current software. In order to make those Energenie USB devices work, you need to manually update a software package and restart TerrariumPI.Upgrade steps can be found hereThis is already done in the Docker image."},{"title": "How to contact","url": "/TerrariumPI/faq/how-to-contact/","categories": "Website, FAQ","tags": "contact, bugs, features, chat","date": "2021-12-02 13:55:37 +0100","snippet" : "There are several ways to contact the developers of TerrariumPI. Here you can see how: Github for feature requests and bugs Try the TerrariumPI Matrix channel Use the email icon in the lower left part of the menu."},{"title": "How to debug TerrariumPI","url": "/TerrariumPI/faq/how-to-debug-terrariumpi/","categories": "Website, FAQ","tags": "debug","date": "2021-08-17 15:23:36 +0200","snippet" : " Stop the TerrariumPI service: sudo service terrariumpi stop. Enter the TerrariumPI folder: cd /home/pi/TerrariumPI/ Enable Python3 virtual environment: source venv/bin/activate Manual start TerrariumPI: python terrariumPI.pyThis should start the TerrariumPI in console mode. So all errors should now be visible to the console.When you are done debugging, you can press Ctrl+C once to stop TerrariumPI."},{"title": "How to delete a sensor/relay/button TerrariumPI","url": "/TerrariumPI/faq/how-to-delete-a-sensor-relay-button-terrariumpi/","categories": "Website, FAQ","tags": "delete, manual","date": "2023-10-08 02:03:03 +0200","snippet" : "When you want to delete a sensor/relay/button that has been used for more than 3 months, you should use the manual/debug way to delete the sensor through the GUI. This is due to the time it takes to delete the data from the Sqlite database. If this takes more then 2 minutes, the systemd watchdog will restart TerrariumPI and the delete will not succeed.In order to not have the problem of the 2 minutes watchdog timeout, you have to run TerrariumPI in debug mode. You can stop TerrariumPI as follows.When running in debug mode, you can just go the sensor/relay/button and delete it. Now it does not matter how much time it takes. Just wait until done.If the deleting is done, stop the debug version of TerrariumPI and start normally."},{"title": "How to start/stop/restart and disable/enable TerrariumPI","url": "/TerrariumPI/faq/how-to-start-stop-restart-and-disable-enable-terrariumpi/","categories": "Website, FAQ","tags": "systemd, service","date": "2021-08-17 23:10:22 +0200","snippet" : "TerrariumPI is using systemd for startup. Here you can find the commands to manually start, stop or restart it. Also there is an option to disable or enable TerrariumPI at boot up.Startrun sudo service terrariumpi start to start TerrariumPIStoprun sudo service terrariumpi stop to stop TerrariumPIRestartrun sudo service terrariumpi restart to restart TerrariumPIEnable startuprun sudo systemctl enable terrariumpi to enable TerrariumPI at startupDisable startuprun sudo systemctl disable terrariumpi to disable TerrariumPI at startup"},{"title": "How to use a relay multiple times","url": "/TerrariumPI/faq/how-to-use-a-relay-multiple-times/","categories": "Website, FAQ","tags": "relay, duplicate","date": "2023-08-31 20:25:42 +0200","snippet" : "A much asked question is how can a relay used in 2 or more areas. By default this is not possible, due to the a relay can only be used once policy. This made it a bit easier to make sure that relays stays in the correct state. Even after power failures.But there is a solution. In this FAQ we explain how to setup a relay to used in multiple areas. This can either be a relay or a dimmer. It should work for both.Add original relayFirst add the original relay to TerrariumPI and make sure it works. Enter the power usage and the water usage values. But never use this original relay in any area.Create script relay code Create a scripts folder if not exists: mkdir scripts Copy duplicate_switch.py to the scripts folder: cp contrib/duplicate_switch.py scripts/ Edit the new script to set some settings: nano scripts/duplicate_switch.py Edit the variables RELAY_ID, USERNAME, PASSWORD. The RELAY_ID can be found on the page: http://[TerrariumPI_IP]:8090/api/relays/ When this is all done, you can test if it al works by running the command: scripts/duplicate_switch.py 100 which should toggle on the original relay.Duplicate the relayNow it is easy to duplicate this relay a couple of times. Make sure you are on the scripts folder where the file duplicate_switch.py is placed.Now by running the following command we will create a symlink to the original file. Now you will have 2 files with the same contents and will the same original relay.1ln -s duplicate_switch.py duplicate_switch_2.pyThis can be done multiple times. Make sure you have a unique name for every new symlink.Adding the new relays to TerrariumPINow add the new scripts as new script relay to TerrariumPI. Use as address /home/pi/TerrariumPI/scripts/duplicate_switch.py.But here, do not enter the power and water flow values. Else the amount of used power and water will be counted double. Which is not correct.Now you can use the new script relay in an area."},{"title": "How to use remote data","url": "/TerrariumPI/faq/how-to-use-remote-data/","categories": "Website, FAQ","tags": "remote, API","date": "2021-08-26 13:19:23 +0200","snippet" : "It is possible to use remote data with TerrariumPI. At the moment, only JSON and plain text are supported as content types.Rate limitsIf you use a sensor, relay or any other remote service, make sure that the other side can handle a request every 30 seconds. This is the frequency of the updates.Url formatThe remote data url is a full url to the JSON output appended with a dash â€˜#â€™ and the JSON traversal pathhttp(s)://remote.server.com:portnumber/path_to_json_output#json/traversal/pathExampleRemote source url: https://terrarium.theyosh.nl/api/sensors/e39b7d7931f8db191cedd83f3c80cec4/json output:12345678910111213141516171819{ &quot;id&quot;: &quot;e39b7d7931f8db191cedd83f3c80cec4&quot;, &quot;hardware&quot;: &quot;owfs&quot;, &quot;type&quot;: &quot;temperature&quot;, &quot;name&quot;: &quot;Midden links&quot;, &quot;address&quot;: &quot;2653D18D0100006A&quot;, &quot;limit_min&quot;: 10, &quot;limit_max&quot;: 45, &quot;alarm_min&quot;: 20, &quot;alarm_max&quot;: 30, &quot;max_diff&quot;: 0, &quot;exclude_avg&quot;: false, &quot;calibration&quot;: { &quot;offset&quot;: 0 }, &quot;value&quot;: 23.7188, &quot;alarm&quot;: false, &quot;error&quot;: false}json traversal path: valueConstruct full url by combining the remote source url and the json traversal path joining by a dash â€˜#â€™. Full remote source url: https://terrarium.theyosh.nl/api/sensors/e39b7d7931f8db191cedd83f3c80cec4/#value and that will return the value of â€˜23.7188â€™And for the calibration offset value you need the path #calibration/offset"},{"title": "Reset authentication","url": "/TerrariumPI/faq/reset-authentication/","categories": "Website, FAQ","tags": "authentication","date": "2021-10-08 13:23:38 +0200","snippet" : "When you loose your password, there is no way to retrieve it. So you need to manually reset it. Use the following steps to clear your existing password, and generate a new one. Stop TerrariumPI (FAQ) Enter the TerrariumPI folder cd /home/pi/TerrariumPI/data Load the database sqlite3 terrariumpi.db Delete admin password delete from Setting where id = &#39;password&#39;; Exit sqlite3 by pressing Ctrl+D Start TerrariumPI (FAQ)Now you should be able to login with chosen username and password password"},{"title": "Restoring backup files","url": "/TerrariumPI/faq/restoring-backup-files/","categories": "Website, FAQ","tags": "backup","date": "2023-04-15 21:04:05 +0200","snippet" : "If you have made regular backups, than you can restore it with the following steps. If the backup has become corrupted, follow these steps first. Shutdown TerrariumPI Remove the old files in data if there are any. rm data/* Place the backup files in the data folder. Place custom logging or webcam archives back in place if needed. Start TerrariumPIThis should start TerrariumPI with the backup-ed data."},{"title": "Tune database settings","url": "/TerrariumPI/faq/tune-database-settings/","categories": "Website, FAQ","tags": "database, stability","date": "2022-10-08 14:44:05 +0200","snippet" : "Currently the database SQLITE3 settings are setup for speed. And therefore it cannot handle power outages well. If you need for what ever reason a different SQLITE3 setup, you can create a file called data/.database-env with the following contents:1[pragma setting name]=[value]All SQLITE3 pragmas should be supported. Make sure you use the correct pragma name and value. Only the entered values will be overwritten from the default.For example the current defaults are:12345auto_vacuum=NONEcache_size=-10000journal_mode=WALsynchronous=OFFtemp_store=MEMORYIf you need more stability you can use the following settings:1synchronous=FULL"},{"title": "What is the default login","url": "/TerrariumPI/faq/what-is-the-default-login/","categories": "Website, FAQ","tags": "login, authentication","date": "2021-08-17 15:23:36 +0200","snippet" : "The default login name is admin with password password. Make sure you change it after installation at the system setting page."},{"title": "Which files to backup","url": "/TerrariumPI/faq/which-files-to-backup/","categories": "Website, FAQ","tags": "backup","date": "2021-08-17 15:23:36 +0200","snippet" : "If you are running the software for a while, it is handy to backup some files in case of SD card corruption or any other reason that you have to reinstall the software. So here is a list of files that should be saved at a regular basis: data/* - Here is the database and calendar data stored log/logging.custom.cfg (optional) webcam/archive/* (optional) - Here you can find all the archived images of the used webcamsWarningDue to the nature of TerrariumPI, the database can get corrupted during creating a backup. This is due the fact that at least every 30 seconds the database is updated. And that could case that the latest data is not backup-ed correctly. This can be fixed by using the database fix script. After fixing you will probably miss about the last 30 seconds till 30 minutes of data. Which is mostly sensor data."},{"title": "sqlite3.DatabaseError: database disk image is malformed","url": "/TerrariumPI/faq/sqlite3-databaseerror-database-disk-image-is-malformed/","categories": "Website, FAQ","tags": "database, malformed","date": "2022-04-04 21:40:57 +0200","snippet" : "It can happen that the database gets corrupted. The error message you will get is something like sqlite3.DatabaseError: database disk image is malformedThis can be fixed by replacing it with a backup database. If you do not have backup of that file or the backup is to old, you can try the following steps: Make sure TerrariumPI 4 is not running: sudo service terrariumpi stop Enter the TerrariumPI 4 folder and enable the Python environment: cd /home/pi/TerrariumPI source venv/bin/activate Enter the contrib folder: cd contrib Run the fix_db.py script and answer the questions: ./fix_db.py. This will take some time. When done, the database should be restored. Start TerrariumPI 4: sudo service terrariumpi startA backup of the broken database is left at data/terrariumpi.db.broken. You can delete this database when TerrariumPI is running again. rm data/terrariumpi.db.brokenIf this happens a lot, you could look at the FAQ item: Tune database settings to improve the database storage."}]