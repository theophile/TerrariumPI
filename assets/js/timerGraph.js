function showTimerGraph(){const e={labels:null,datasets:[]};let t=new Date;t=`${t.getFullYear()}-${t.getMonth()<9?"0":""}${t.getMonth()+1}-${t.getDate()}T`;const a=Date.parse(t+jQuery("input#begin_time").val()+":00");let n=Date.parse(t+jQuery("input#end_time").val()+":00"),r=jQuery("input#on_duration").val(),l=jQuery("input#off_duration").val(),i=jQuery("input#running_time").val(),o=jQuery("input#settle_time").val();if(a&&n){a==n&&(n+=864e5),r=""==r||0==r?(n-a)/6e4:r,l=""==l?0:l,r*=6e4,l*=6e4;const t={label:"Operating window",borderColor:"rgb(0,0,255)",backgroundColor:"rgba(0,0,255,0.5)",order:3,data:[{x:new Date(a-18e5),y:0},{x:new Date(a),y:3},{x:new Date(n),y:0},{x:new Date(n+18e5),y:0}]},s={label:"Timer period",data:[{x:new Date(a-18e5),y:0}],borderColor:"rgb(0,255,0)",backgroundColor:"rgba(0,255,0,0.5)",order:2},d={label:"Running",data:[{x:new Date(a-18e5),y:0}],borderColor:"rgb(255,0,0)",backgroundColor:"rgba(255,0,0,0.5)",order:1};let u=a;for(;new Date(u+r)<=new Date(n);){let e=u+r;s.data.push({x:new Date(u),y:2}),s.data.push({x:new Date(u+r),y:0}),s.data.push({x:new Date(u+r+l),y:0}),settle_duration=""==o?0:o;let t=""==i||0==i||0==settle_duration?(e-u)/1e3:i;t*=1e3,settle_duration*=1e3;let a=u;for(;new Date(a+t)<=new Date(e);)d.data.push({x:new Date(a),y:1}),d.data.push({x:new Date(a+t),y:0}),d.data.push({x:new Date(a+t+settle_duration),y:0}),a+=t+settle_duration;u+=r+l}d.data.push({x:new Date(n+18e5),y:0}),s.data.push({x:new Date(n+18e5),y:0}),e.datasets.push(t),e.datasets.push(s),e.datasets.push(d);const p={type:"line",data:e,options:{responsive:!0,plugins:{zoom:{pan:{enabled:!0},zoom:{wheel:{enabled:!0},pinch:{enabled:!0},mode:"xy"}},title:{display:!0,text:"TerrariumPI Timer display"}},scales:{x:{type:"time",title:{display:!0,text:"Time of the day"}},y:{ticks:{stepSize:1,display:!1}}}}};null===timerGraph?timerGraph=new Chart(document.getElementById("timeGraph"),p):(timerGraph.data=e,timerGraph.update())}}Chart.defaults.elements.line.borderWidth=3,Chart.defaults.elements.line.fill=!0,Chart.defaults.elements.line.stepped=!0,Chart.defaults.elements.point.radius=0;let timerGraph=null;jQuery(function(){showTimerGraph(),jQuery("input").on("change",showTimerGraph)});