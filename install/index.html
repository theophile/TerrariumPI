<!doctype html><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"><meta name="generator" content="Jekyll v4.3.2"/><meta property="og:title" content="Install"/><meta property="og:locale" content="en"/><meta name="description" content="Here we will install Raspberry PI and TerrariumPI software step by step."/><meta property="og:description" content="Here we will install Raspberry PI and TerrariumPI software step by step."/><link rel="canonical" href="https://theyosh.github.io/TerrariumPI/install/"/><meta property="og:url" content="https://theyosh.github.io/TerrariumPI/install/"/><meta property="og:site_name" content="TerrariumPI"/><meta property="og:image" content="https://theyosh.github.io/TerrariumPI/assets/img/Installation.webp"/><meta property="og:image:height" content="auto"/><meta property="og:image:width" content="100%"/><meta property="og:image:alt" content="Installation header image"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2021-05-05T10:07:10+02:00"/><meta name="twitter:card" content="summary_large_image"/><meta property="twitter:image" content="https://theyosh.github.io/TerrariumPI/assets/img/Installation.webp"/><meta name="twitter:image:alt" content="Installation header image"/><meta property="twitter:title" content="Install"/><meta name="twitter:site" content="@false"/> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-12-08T22:32:13+01:00","datePublished":"2021-05-05T10:07:10+02:00","description":"Here we will install Raspberry PI and TerrariumPI software step by step.","headline":"Install","image":{"width":"100%","height":"auto","src":"/assets/img/Installation.webp","alt":"Installation header image","url":"https://theyosh.github.io/TerrariumPI/assets/img/Installation.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://theyosh.github.io/TerrariumPI/install/"},"url":"https://theyosh.github.io/TerrariumPI/install/"}</script><title>Install | TerrariumPI</title><link rel="apple-touch-icon" sizes="180x180" href="/TerrariumPI/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/TerrariumPI/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/TerrariumPI/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/TerrariumPI/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/TerrariumPI/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="TerrariumPI"><meta name="application-name" content="TerrariumPI"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/TerrariumPI/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css"><link rel="stylesheet" href="/TerrariumPI/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.0/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script type="text/javascript">class ModeToggle{static get MODE_KEY(){return"mode"}static get MODE_ATTR(){return"data-mode"}static get DARK_MODE(){return"dark"}static get LIGHT_MODE(){return"light"}static get ID(){return"mode-toggle"}constructor(){this.hasMode&&(this.isDarkMode?this.isSysDarkPrefer||this.setDark():this.isSysDarkPrefer&&this.setLight());let e=this;this.sysDarkPrefers.addEventListener("change",()=>{e.hasMode&&(e.isDarkMode?e.isSysDarkPrefer||e.setDark():e.isSysDarkPrefer&&e.setLight(),e.clearMode()),e.notify()})}get sysDarkPrefers(){return window.matchMedia("(prefers-color-scheme: dark)")}get isSysDarkPrefer(){return this.sysDarkPrefers.matches}get isDarkMode(){return this.mode===ModeToggle.DARK_MODE}get isLightMode(){return this.mode===ModeToggle.LIGHT_MODE}get hasMode(){return null!=this.mode}get mode(){return sessionStorage.getItem(ModeToggle.MODE_KEY)}get modeStatus(){return this.isDarkMode||!this.hasMode&&this.isSysDarkPrefer?ModeToggle.DARK_MODE:ModeToggle.LIGHT_MODE}setDark(){document.documentElement.setAttribute(ModeToggle.MODE_ATTR,ModeToggle.DARK_MODE),sessionStorage.setItem(ModeToggle.MODE_KEY,ModeToggle.DARK_MODE)}setLight(){document.documentElement.setAttribute(ModeToggle.MODE_ATTR,ModeToggle.LIGHT_MODE),sessionStorage.setItem(ModeToggle.MODE_KEY,ModeToggle.LIGHT_MODE)}clearMode(){document.documentElement.removeAttribute(ModeToggle.MODE_ATTR),sessionStorage.removeItem(ModeToggle.MODE_KEY)}notify(){window.postMessage({direction:ModeToggle.ID,message:this.modeStatus},"*")}flipMode(){this.hasMode?this.isSysDarkPrefer?this.isLightMode?this.clearMode():this.setLight():this.isDarkMode?this.clearMode():this.setDark():this.isSysDarkPrefer?this.setLight():this.setDark(),this.notify()}}const modeToggle=new ModeToggle;</script> <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.0/dist/jquery.min.js"></script> <noscript> <img src="//stats.theyosh.nl?idsite=279&amp;rec=1" style="border:0" alt=""/> </noscript> <script type="text/javascript">var _paq=_paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var e="//stats.theyosh.nl";_paq.push(["setTrackerUrl",e+"/piwik.php"]),_paq.push(["setSiteId","279"]);var a=document,t=a.createElement("script"),p=a.getElementsByTagName("script")[0];t.type="text/javascript",t.async=!0,t.defer=!0,t.src=e+"/piwik.js",p.parentNode.insertBefore(t,p)}();</script> </head><body><div id="sidebar" class="d-flex flex-column align-items-end"> <div class="profile-wrapper"> <a href="/TerrariumPI/" id="avatar" class="rounded-circle"> <img src="/TerrariumPI/assets/img/profile_image.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"> </a><div class="site-title"> <a href="/TerrariumPI/">TerrariumPI</a> </div> <div class="site-subtitle fst-italic">Reptile enclosure automation</div> </div> <ul class="nav flex-column flex-grow-1 w-100 ps-0"> <li class="nav-item"> <a href="/TerrariumPI/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a> </li> <li class="nav-item"> <a href="/TerrariumPI/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a> </li> <li class="nav-item"> <a href="/TerrariumPI/features/" class="nav-link"> <i class="fa-fw fas fa-info"></i> <span>FEATURES</span> </a> </li> <li class="nav-item"> <a href="/TerrariumPI/hardware/" class="nav-link"> <i class="fa-fw fas fa-microchip"></i> <span>HARDWARE</span> </a> </li> <li class="nav-item active"> <a href="/TerrariumPI/install/" class="nav-link"> <i class="fa-fw fas fa-tools"></i> <span>INSTALL</span> </a> </li> <li class="nav-item"> <a href="/TerrariumPI/setup/" class="nav-link"> <i class="fa-fw fas fa-cogs"></i> <span>SETUP</span> </a> </li> <li class="nav-item"> <a href="/TerrariumPI/scenarios/" class="nav-link"> <i class="fa-fw fas fa-mountain"></i> <span>SCENARIOS</span> </a> </li> <li class="nav-item"> <a href="/TerrariumPI/notifications/" class="nav-link"> <i class="fa-fw fas fa-bell"></i> <span>NOTIFICATIONS</span> </a> </li> <li class="nav-item"> <a href="/TerrariumPI/translations/" class="nav-link"> <i class="fa-fw fas fa-globe"></i> <span>TRANSLATIONS</span> </a> </li> <li class="nav-item"> <a href="/TerrariumPI/api/" class="nav-link"> <i class="fa-fw fas fa-file-alt"></i> <span>API</span> </a> </li> <li class="nav-item"> <a href="/TerrariumPI/donate/" class="nav-link"> <i class="fa-fw fas fa-donate"></i> <span>DONATE</span> </a> </li> <li class="nav-item"> <a href="/TerrariumPI/faq/" class="nav-link"> <i class="fa-fw fas fa-question"></i> <span>FAQ</span> </a> </li> <li class="nav-item"> <a href="/TerrariumPI/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a> </li> <li class="nav-item"> <a href="/TerrariumPI/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a> </li> </ul> <div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/theyosh" aria-label="github" target="_blank" rel="noopener noreferrer noopener noreferrer" class="external"> <i class="fab fa-github"></i> </a> <a href="javascript:location.href%20=%20'mailto:'%20+%20['terrariumpi','theyosh.nl'].join('@')" aria-label="email"> <i class="fas fa-envelope"></i> </a> <a href="/TerrariumPI/feed.xml" aria-label="rss"> <i class="fas fa-rss"></i> </a> <a href="https://mastodon.theyosh.nl/@theyosh" aria-label="mastodon" target="_blank" rel="noopener noreferrer me noopener noreferrer" class="external"> <i class="fab fa-mastodon"></i> </a> <a href="https://www.linkedin.com/in/theyosh" aria-label="linkedin" target="_blank" rel="noopener noreferrer noopener noreferrer" class="external"> <i class="fab fa-linkedin"></i> </a> </div> </div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container px-xxl-5"> <div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100"> <span id="breadcrumb"> <span> <a href="/TerrariumPI/"> Home </a> </span> <span>Install</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Install</div> <i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel">Cancel</span> <span class="align-items-center" style="margin-left:0.2rem"> <select name="language"> <option value="">Select language </option></select> </span> </div></div> <script>function getFlagEmoji(e){const a=e.toUpperCase().split("").map(e=>127397+e.charCodeAt());return String.fromCodePoint(...a)}jQuery(function(){let e=[{name:"Dutch",key:"NL"},{name:"German",key:"DE"},{name:"English",key:"GB"},{name:"French",key:"FR"},{name:"Italian",key:"IT"},{name:"Japanese",key:"JA",flag:"JP"},{name:"Norwegian",key:"NO"},{name:"Polish",key:"PL"},{name:"Portuguese",key:"PT"},{name:"Spanish",key:"ES"}],a=jQuery('select[name="language"]');jQuery.each(e,function(e,t){a.append(jQuery("<option>").val(t.key.toLowerCase()).text(getFlagEmoji(t.flag||t.key)+" "+t.name))});const t=new URLSearchParams(window.location.search);t.has("_x_tr_tl")&&a.val(t.get("_x_tr_tl")),a.on("change",function(){""!=this.value&&("gb"==this.value?location.href="https://theyosh.github.io/TerrariumPI"+location.pathname:location.href="https://translate.google.com/translate?hl=en&sl=en&tl="+this.value+"&u=https%3A%2F%2Ftheyosh.github.io"+location.pathname.replace(/\//g,"%2F"))})});</script><div class="row"> <div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pe-xl-4"><div class="post px-1 px-md-2"> <h1 class="dynamic-title"> Install</h1> <div class="post-content"> <h1 data-toc-skip>Install</h1> <div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1620202030" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom"> May 5, 2021 </em> </span> <span> Updated <em class="" data-ts="1670535133" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom"> Dec 8, 2022 </em> </span><div class="mt-3 mb-3"> <a href="/TerrariumPI/assets/img/Installation.webp" class="popup img-link preview-img shimmer"><img src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%201200%20630'%3E%3C/svg%3E" data-src="/TerrariumPI/assets/img/Installation.webp" alt="Installation header image" width="1200" height="630" class="lazyload" data-proofer-ignore></a><figcaption class="text-center pt-2 pb-2">Installation header image</figcaption> </div> <div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/theyosh" target="_blank" rel="noopener noreferrer" class="external">TheYOSH</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1236 words"> <em>6 min</em> read</span> </div> </div> </div> <div class="post-content"> <p>Here we will install Raspberry PI and TerrariumPI software step by step.</p> <h1 id="raspberry-pi">Raspberry PI</h1> <p><a href="/TerrariumPI/assets/img/RaspberryPI_Logo.webp" class="popup img-link right"><img data-src="/TerrariumPI/assets/img/RaspberryPI_Logo.webp" alt="Raspberry PI Logo" width="100" class="lazyload" data-proofer-ignore></a> In order to run TerrariumPI you first need a working Raspberry PI with the ‘<a href="https://www.raspberrypi.com/software/operating-systems/#raspberry-pi-os-legacy" target="_blank" rel="noopener noreferrer" class="external">Raspberry Pi OS Lite (Legacy)</a>’ image. Make sure you are using the <strong>Legacy</strong> version! This is Debian Buster. This is very important, as the Desktop and/or the new OS version will not work well with the GPIO pins and Raspberry PI cameras.</p> <p>Also <strong>64bit is not supported</strong> due to missing mmal code which is needed for the webcams.</p> <h2 id="creating-sd-card"> <span class="me-2">Creating SD Card</span><a href="#creating-sd-card" class="anchor text-muted"><i class="fas fa-hashtag"></i></a> </h2> <p><a href="/TerrariumPI/assets/img/RPI_Imager.webp" class="popup img-link right"><img data-src="/TerrariumPI/assets/img/RPI_Imager.webp" alt="Raspberry PI Imager" width="200" class="lazyload" data-proofer-ignore></a> Download and instal the <a href="https://www.raspberrypi.org/software/" target="_blank" rel="noopener noreferrer" class="external">Raspberry Pi Imager</a> to prepare your SD card. Make sure you have a SD card of at least 4GB of size. Bigger is better :) Make sure you select <strong>Raspberry Pi OS Lite (legacy)</strong> from the other Raspberry Pi OS images.</p> <p><a href="/TerrariumPI/assets/img/RPI_Imager_settings.webp" class="popup img-link left"><img data-src="/TerrariumPI/assets/img/RPI_Imager_settings.webp" alt="Raspberry PI Imager settings icon" width="50" class="lazyload" data-proofer-ignore></a>In order to enable SSH, Wifi and other settings, click on the settings icon in the lower right corner. Here you enter your Wifi settings, pi password etc. Use this to install the Raspberry PI headless. Add the SD card in the Raspberry PI and withing a minute you should have a running Raspberry PI.</p> <h1 id="terrariumpi">TerrariumPI</h1> <p>When the Raspberry PI is up and running, you should be able to SSH to it. On Linux and Mac you can use the terminal. For Windows, you can use Putty.</p> <div class="language-console highlighter-rouge"> <div class="code-header"> <span data-label-text="Console"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button> </div> <div class="highlight"><code><table class="rouge-table"><tbody><tr> <td class="rouge-gutter gl"><pre class="lineno">1
</pre></td> <td class="rouge-code"><pre><span class="go">ssh pi@[raspberrypi]
</span></pre></td> </tr></tbody></table></code></div> </div> <p><strong>Disclaimer:</strong> If you have TerrariumPI 3 running on this Raspberry PI, then you can <a href="#backup">read here</a> how to stop and make a backup.</p> <h2 id="docker"> <span class="me-2">Docker</span><a href="#docker" class="anchor text-muted"><i class="fas fa-hashtag"></i></a> </h2> <p><a href="/TerrariumPI/assets/img/DockerLogo.webp" class="popup img-link right"><img data-src="/TerrariumPI/assets/img/DockerLogo.webp" alt="Docker Logo" width="200" class="lazyload" data-proofer-ignore></a> As from version 4.1 there is a <a href="https://hub.docker.com/r/theyosh/terrariumpi" target="_blank" rel="noopener noreferrer" class="external">Docker image</a> that can be used to run TerrariumPI. When you run it in Docker, you can skip the rest of the page. Only the migration could be followed if you want to restore your current relay history.</p> <p>Install docker according to: <a href="https://docs.docker.com/engine/install/debian/" target="_blank" rel="noopener noreferrer" class="external">https://docs.docker.com/engine/install/debian/</a> Just follow the installation steps. And to run the docker commands as a normal user, <a href="https://docs.docker.com/engine/install/linux-postinstall/" target="_blank" rel="noopener noreferrer" class="external">follow these steps</a></p> <p>Then you need to setup a <code class="language-plaintext highlighter-rouge">docker-compose.yaml</code> file. There is an example <code class="language-plaintext highlighter-rouge">docker-compose.yaml.example</code> in the <code class="language-plaintext highlighter-rouge">contrib</code> folder which can be used as a starting point:</p> <div class="language-yaml highlighter-rouge"> <div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button> </div> <div class="highlight"><code><table class="rouge-table"><tbody><tr> <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre></td> <td class="rouge-code"><pre><span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3.7"</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">terrariumpi</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">theyosh/terrariumpi:latest</span> <span class="c1"># Or use a specific version</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">/opt/terrariumpi/logs:/TerrariumPI/log</span>
      <span class="pi">-</span> <span class="s">/opt/terrariumpi/data:/TerrariumPI/data</span>
      <span class="pi">-</span> <span class="s">/opt/terrariumpi/media:/TerrariumPI/media</span>
      <span class="pi">-</span> <span class="s">/opt/terrariumpi/scripts:/TerrariumPI/scripts</span>
      <span class="pi">-</span> <span class="s">/opt/terrariumpi/webcam-archive:/TerrariumPI/webcam/archive</span>
      <span class="pi">-</span> <span class="s">/opt/terrariumpi/DenkoviRelayCommandLineTool:/TerrariumPI/3rdparty/DenkoviRelayCommandLineTool</span>
      <span class="pi">-</span> <span class="s">/boot/config.txt:/boot/config.txt</span>
      <span class="pi">-</span> <span class="s">/boot/cmdline.txt:/boot/cmdline.txt</span>
      <span class="pi">-</span> <span class="s">/etc/modules:/etc/modules</span>
      <span class="pi">-</span> <span class="s">/dev:/dev</span>
    <span class="na">network_mode</span><span class="pi">:</span> <span class="s">host</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
    <span class="na">privileged</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">cap_add</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">NET_ADMIN</span>
    <span class="na">stop_grace_period</span><span class="pi">:</span> <span class="s">1m</span>
    <span class="na">stop_signal</span><span class="pi">:</span> <span class="s">SIGINT</span>
    <span class="na">init</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">TZ</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Europe/Amsterdam"</span> <span class="c1"># timezone list can be found here https://en.wikipedia.org/wiki/List_of_tz_database_time_zones</span>
      <span class="na">ENABLE_I2C</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
      <span class="na">ENABLE_1_WIRE</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
      <span class="na">ENABLE_CAMERA</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
      <span class="na">ENABLE_SERIAL</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
      <span class="na">ENABLE_CO2_SENSORS</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
      <span class="na">AUTO_REBOOT</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
</pre></td> </tr></tbody></table></code></div> </div> <p>The only real setting is the <code class="language-plaintext highlighter-rouge">TZ</code> value. Make sure it is set to your local/home time zone. <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones" target="_blank" rel="noopener noreferrer" class="external">A valid list can be found here</a>.</p> <p>We run the container with <strong><a href="https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities" target="_blank" rel="noopener noreferrer" class="external">privileged</a></strong> enabled. This is less secure, but needed in order to be able to handle all the hardware that is connected to the Raspberry PI.</p> <p>The network mode needs to be at <code class="language-plaintext highlighter-rouge">host</code>. Else bluetooth with not work, and you can’t use bluetooth sensors.</p> <p>then you can run <code class="language-plaintext highlighter-rouge">docker compose up -d</code> to start the docker image. It could be that it needs a reboot. After that, you should be able to access TerrariumPI on the url <code class="language-plaintext highlighter-rouge">http://[raspberrypi]:8090</code>. <a href="/TerrariumPI/setup/">Continue with the setup</a></p> <h2 id="manual"> <span class="me-2">Manual</span><a href="#manual" class="anchor text-muted"><i class="fas fa-hashtag"></i></a> </h2> <h3 id="prerequisites"> <span class="me-2">Prerequisites</span><a href="#prerequisites" class="anchor text-muted"><i class="fas fa-hashtag"></i></a> </h3> <p>First we need to install Git. This is used to download the software from Github.com</p> <div class="language-console highlighter-rouge"> <div class="code-header"> <span data-label-text="Console"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button> </div> <div class="highlight"><code><table class="rouge-table"><tbody><tr> <td class="rouge-gutter gl"><pre class="lineno">1
</pre></td> <td class="rouge-code"><pre><span class="go">sudo apt -y install git
</span></pre></td> </tr></tbody></table></code></div> </div> <h3 id="download"> <span class="me-2">Download</span><a href="#download" class="anchor text-muted"><i class="fas fa-hashtag"></i></a> </h3> <p>After Git is installed, we can download the TerrariumPI source code. We will only download the latest version.</p> <p>If you want to do some development or testing, omit the part <code class="language-plaintext highlighter-rouge">--depth 1</code>. Then you will get the full repository with all the branches.</p> <div class="language-console highlighter-rouge"> <div class="code-header"> <span data-label-text="Console"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button> </div> <div class="highlight"><code><table class="rouge-table"><tbody><tr> <td class="rouge-gutter gl"><pre class="lineno">1
</pre></td> <td class="rouge-code"><pre><span class="go">git clone --branch main --depth 1 https://github.com/theyosh/TerrariumPI.git
</span></pre></td> </tr></tbody></table></code></div> </div> <h3 id="installation"> <span class="me-2">Installation</span><a href="#installation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a> </h3> <p>And the final step is to start the installer. This will guide you through the installation process.</p> <p>The first time you run the installer, it will also update the Raspberry PI OS to the latest version. This can take some more time.</p> <p>Make sure you select the <strong>correct timezone</strong>. This is your home timezone. If you do not select the correct timezone during installation, you could get strange time schedules when running TerrariumPI.</p> <div class="language-console highlighter-rouge"> <div class="code-header"> <span data-label-text="Console"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button> </div> <div class="highlight"><code><table class="rouge-table"><tbody><tr> <td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td> <td class="rouge-code"><pre><span class="go">cd TerrariumPI
sudo ./install.sh
</span></pre></td> </tr></tbody></table></code></div> </div> <video muted="" controls="" style="max-width:100%"> <source src="/TerrariumPI/assets/video/TerrariumPI_Install.mp4" type="video/mp4"></source> </video><p>After the installation is done, reboot once and you should be able to access TerrariumPI on the url <code class="language-plaintext highlighter-rouge">http://[raspberrypi]:8090</code>. <a href="/TerrariumPI/setup/">Continue with the setup</a></p> <h1 id="migration-from-v3-to-v4">Migration from V3 to V4</h1> <p>There is <strong>no real migration</strong> from version 3 to version 4. The changes are to big. So that means you have to install TerrariumPI v4 as it was a new PI. These migrations steps will only copy the <em>existing relay history data</em> from V3 to V4 so that the total power and water usages is still there. And the total costs are still correct. This is all what will be migrated.</p> <p>If you do <strong>not care</strong> about your relay history, you can just skip this migration. This is the <strong>only</strong> data that will be migrated!</p> <h2 id="backup"> <span class="me-2">Backup</span><a href="#backup" class="anchor text-muted"><i class="fas fa-hashtag"></i></a> </h2> <p>So make sure you have <strong>stopped</strong> the old TerrariumPI. And rename the folder <code class="language-plaintext highlighter-rouge">TerrariumPI</code> to <code class="language-plaintext highlighter-rouge">TerrariumPI.old</code>. This way you have a backup of your existing working setup.</p> <ol> <li><p>Stop TerrariumPI 3. <a href="https://github.com/theyosh/TerrariumPI/wiki/FAQ#how-to-stop-terrariumpi" target="_blank" rel="noopener noreferrer" class="external">Wiki</a></p></li> <li><p>Make a backup of existing version. <code class="language-plaintext highlighter-rouge">mv /home/pi/TerrariumPI /home/pi/TerrariumPI.old</code></p></li> </ol> <h2 id="first-setup"> <span class="me-2">First setup</span><a href="#first-setup" class="anchor text-muted"><i class="fas fa-hashtag"></i></a> </h2> <p>Now, install TerrariumPI v4 as <a href="#terrariumpi">described here</a>. And then you need to set it up as you want. So that means adding at least all the relays you want to use/migrate. When that is done, shutdown TerrariumPI 4 and continue with the last migrations step.</p> <h2 id="migrate"> <span class="me-2">Migrate</span><a href="#migrate" class="anchor text-muted"><i class="fas fa-hashtag"></i></a> </h2> <ol> <li>First make sure you have an backup of files of the old V3 version:<ul> <li>settings.cfg</li> <li>history.db</li> </ul> </li> <li><p>Stop the TerrariumPI service before start migrating. <code class="language-plaintext highlighter-rouge">sudo service terrariumpi stop</code></p></li> <li><p>Enter the new TerrariumPI V4 directory. <code class="language-plaintext highlighter-rouge">cd /home/pi/TerrariumPI</code></p></li> <li><p>Enter the Python3 virtual environment. <code class="language-plaintext highlighter-rouge">source venv/bin/activate</code></p></li> <li><p>Enter the <code class="language-plaintext highlighter-rouge">contrib</code> folder where the file <code class="language-plaintext highlighter-rouge">copy_relay_history.py</code> is located.</p></li> <li>Run the script <code class="language-plaintext highlighter-rouge">copy_relay_history.py</code> with the following parameters in this order:<ul> <li>full path to OLD config (<code class="language-plaintext highlighter-rouge">settings.cfg</code>)</li> <li>full path to OLD database (<code class="language-plaintext highlighter-rouge">history.db</code>)</li> <li>full path to NEW database (<code class="language-plaintext highlighter-rouge">terrariumpi.db</code>)</li> </ul> </li> <li>Answer the questions asked by the script. This should match your old and new relays, in order to copy the historical data.</li> </ol> <div class="language-console highlighter-rouge"> <div class="code-header"> <span data-label-text="Console"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button> </div> <div class="highlight"><code><table class="rouge-table"><tbody><tr> <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td> <td class="rouge-code"><pre><span class="go">Found 7 out of 8 are found. Below is a summary of the founded relays that can converted.

</span><span class="gp">Relay 'Waterton verwarming' of type 'ftdi' at address '4,A500WMST'. Old ID: 7506c0e9ca0288be148b9617d959e7a6 =&gt;</span><span class="w"> </span>New ID: 91e8236ba878587c218b5a9a941a1d48
<span class="gp">Relay 'Mister' of type 'eg-pm-lan' at address 'http://cvaVMnTiMYS35Be@192.168.5.150#</span>2<span class="s1">'. Old ID: 30f7595d5a055dc5b2a31127c93c9606 =&gt; New ID: 75588e78194b941b937b404db134422e
</span><span class="gp">Relay 'Verwarmingmat' of type 'ftdi' at address '1,A500WMST'. Old ID: 137488ac23a2b0b516daa315641a178c =&gt;</span><span class="w"> </span><span class="s1">New ID: 477dd5dad0da139f8b48225acd3901d3
</span><span class="gp">Relay 'UV Lamp' of type 'ftdi' at address '2,A500WMST'. Old ID: 4a2151d5834fe888820c831e9a6d8e8b =&gt;</span><span class="w"> </span><span class="s1">New ID: 97c45c98476b1807a4bfa7bb4d249b14
</span><span class="gp">Relay 'Sproeier' of type 'ftdi' at address '3,A500WMST'. Old ID: 01ec0c8f3c4fd952c1b2aef8a4e9ec0d =&gt;</span><span class="w"> </span><span class="s1">New ID: beb111bdacda89f8bf13cc749ecd26c0
</span><span class="gp">Relay 'Dripper plant' of type 'eg-pm-lan' at address 'http://cvaVMnTiMYS35Be@192.168.5.150#</span><span class="s1">1'</span><span class="nb">.</span> Old ID: c867377cd5b6e1d4be580c1fa865ee82 <span class="o">=&gt;</span> New ID: f53904eaedfac445e6cdae611612441f
<span class="gp">Relay 'Heat lamp' of type 'nextevo-dimmer' at address '32'. Old ID: 574e22d2b2d6e54ecd5a3db8e6bb50b9 =&gt;</span><span class="w"> </span>New ID: 0e0cf978ca6bdb8eb994c186434a628e
<span class="go">
The following relays could not be found:
Relay 'wemotest' of type 'wemo' at address '192.168.5.55'.

If you are happy with this setup, you can continue with the conversion. This will take a lot of time....
Enter 'yes' to continue. Anything else will abort.:
</span></pre></td> </tr></tbody></table></code></div> </div> <p>Enter yes and wait. After the migration is done, you will see a message and you can then start the TerrariumPI service. <code class="language-plaintext highlighter-rouge">sudo service terrariumpi start</code></p> </div> <div class="post-tail-wrapper text-muted"><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"> <div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noopener noreferrer" class="external"> CC BY 4.0 </a> by the author.</div> <div class="share-wrapper"> <span class="share-label text-muted me-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Install%20-%20TerrariumPI&amp;url=https%3A%2F%2Ftheyosh.github.io%2FTerrariumPI%2Finstall%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" target="_blank" rel="noopener noopener noreferrer" aria-label="Twitter" class="external"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Install%20-%20TerrariumPI&amp;u=https%3A%2F%2Ftheyosh.github.io%2FTerrariumPI%2Finstall%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" target="_blank" rel="noopener noopener noreferrer" aria-label="Facebook" class="external"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Install%20-%20TerrariumPI&amp;url=https%3A%2F%2Ftheyosh.github.io%2FTerrariumPI%2Finstall%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" target="_blank" rel="noopener noopener noreferrer" aria-label="Telegram" class="external"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ftheyosh.github.io%2FTerrariumPI%2Finstall%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" target="_blank" rel="noopener noopener noreferrer" aria-label="Linkedin" class="external"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span> </div> </div></div> </div> </div></div> <div id="panel-wrapper" class="col-xl-3 ps-2 text-muted"> <div class="access"> <div id="access-lastmod" class="post"> <div class="panel-heading">Recent Update</div> <ul class="post-content list-unstyled ps-0 pb-1 ms-1 mt-2"> <li class="text-truncate lh-lg"> <a href="/TerrariumPI/posts/2023/06/02/release-terrariumpi-v-4-6-3/">Release TerrariumPI v 4.6.3</a> </li> <li class="text-truncate lh-lg"> <a href="/TerrariumPI/posts/2017/10/25/terrariumpi-on-reddit/">TerrariumPI on Reddit</a> </li> <li class="text-truncate lh-lg"> <a href="/TerrariumPI/posts/2017/11/21/terrariumpi-on-hack-a-day/">TerrariumPI on Hack a Day</a> </li> <li class="text-truncate lh-lg"> <a href="/TerrariumPI/posts/2017/11/24/terrariumpi-on-raspberry-pi-weekly-newsletter/">TerrariumPI on Raspberry PI Weekly Newsletter</a> </li> <li class="text-truncate lh-lg"> <a href="/TerrariumPI/posts/2019/12/31/terrariumpi-on-reptile-haven/">TerrariumPI on Reptile Haven</a> </li> </ul> </div> <div id="access-tags"> <div class="panel-heading">Trending Tags</div> <div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/TerrariumPI/tags/sensor/">sensor</a> <a class="post-tag btn btn-outline-primary" href="/TerrariumPI/tags/relay/">relay</a> <a class="post-tag btn btn-outline-primary" href="/TerrariumPI/tags/temperature/">temperature</a> <a class="post-tag btn btn-outline-primary" href="/TerrariumPI/tags/humidity/">humidity</a> <a class="post-tag btn btn-outline-primary" href="/TerrariumPI/tags/release/">release</a> <a class="post-tag btn btn-outline-primary" href="/TerrariumPI/tags/i2c/">i2c</a> <a class="post-tag btn btn-outline-primary" href="/TerrariumPI/tags/dimmer/">dimmer</a> <a class="post-tag btn btn-outline-primary" href="/TerrariumPI/tags/co2/">co2</a> <a class="post-tag btn btn-outline-primary" href="/TerrariumPI/tags/live/">live</a> <a class="post-tag btn btn-outline-primary" href="/TerrariumPI/tags/webcam/">webcam</a> </div> </div> </div> <div id="toc-wrapper" class="ps-0 pe-4 mb-5"> <div class="panel-heading ps-3 pt-2 mb-2">Contents</div> <nav id="toc"></nav> </div> </div> </div> <div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-3 pe-xl-4 mt-5"> <div id="related-posts" class="mb-2 mb-sm-4"> <h3 class="pt-2 mb-4 ms-1" data-toc-skip> Further Reading</h3> <div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"> <div class="col"> <a href="/TerrariumPI/posts/2023/09/10/release-terrariumpi-v-4-7-0/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1694343600" data-df="ll"> Sep 10, 2023 </em><h4 class="pt-0 my-2" data-toc-skip>Release TerrariumPI v 4.7.0</h4> <div class="text-muted small"><p> Release 4.7.0 - Finalizing the software With this new release we have added some new features, fixed some nasty small bugs, and finished some left over code and functionality. We also bump the ve...</p></div> </div></a> </div> <div class="col"> <a href="/TerrariumPI/posts/2023/06/02/release-terrariumpi-v-4-6-3/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1685703600" data-df="ll"> Jun 2, 2023 </em><h4 class="pt-0 my-2" data-toc-skip>Release TerrariumPI v 4.6.3</h4> <div class="text-muted small"><p> Release 4.6.3 - Summer is here release A new, sort of maintenance, release. But it contains just a bit more 😉 The major update is a feature request from may 2019 that should now be added. You can...</p></div> </div></a> </div> <div class="col"> <a href="/TerrariumPI/posts/2023/03/25/release-terrariumpi-v-4-6-2/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1679742000" data-df="ll"> Mar 25, 2023 </em><h4 class="pt-0 my-2" data-toc-skip>Release TerrariumPI v 4.6.2</h4> <div class="text-muted small"><p> Release 4.6.2 - Spring release This is a maintenance release which fixes a lot of audio player and playlist issues. So tht should now work again. Than we have fixed the IO expanders pcf857(4/5). ...</p></div> </div></a> </div> </div> </div> <div class="post-navigation d-flex justify-content-between"> <a href="/TerrariumPI/hardware/" class="btn btn-outline-primary" prompt="Older"><p>Hardware</p></a> <a href="/TerrariumPI/setup/" class="btn btn-outline-primary" prompt="Newer"><p>Setup</p></a> </div> </div></div> <div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 post-content"> <div id="search-hints"><div id="access-tags"> <div class="panel-heading">Trending Tags</div> <div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/TerrariumPI/tags/sensor/">sensor</a> <a class="post-tag btn btn-outline-primary" href="/TerrariumPI/tags/relay/">relay</a> <a class="post-tag btn btn-outline-primary" href="/TerrariumPI/tags/temperature/">temperature</a> <a class="post-tag btn btn-outline-primary" href="/TerrariumPI/tags/humidity/">humidity</a> <a class="post-tag btn btn-outline-primary" href="/TerrariumPI/tags/release/">release</a> <a class="post-tag btn btn-outline-primary" href="/TerrariumPI/tags/i2c/">i2c</a> <a class="post-tag btn btn-outline-primary" href="/TerrariumPI/tags/dimmer/">dimmer</a> <a class="post-tag btn btn-outline-primary" href="/TerrariumPI/tags/co2/">co2</a> <a class="post-tag btn btn-outline-primary" href="/TerrariumPI/tags/live/">live</a> <a class="post-tag btn btn-outline-primary" href="/TerrariumPI/tags/webcam/">webcam</a> </div> </div></div> <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div> </div></div> </div></div><footer><div class="container px-lg-4"><div class="d-flex justify-content-center align-items-center text-muted mx-md-3"> <p>Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener noopener noreferrer" class="external">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener noopener noreferrer" class="external">Chirpy</a> theme.</p> <p>© 2023 <a href="https://github.com/theyosh" target="_blank" rel="noopener noreferrer" class="external">TheYOSH</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p> </div></div></footer><div id="mask"></div><button id="back-to-top" aria-label="back-to-top" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false"> <div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close"></button> </div> <div class="toast-body text-center pt-0"> <p class="px-2 mb-3">A new version of content is available.</p> <button type="button" class="btn btn-primary" aria-label="Update"> Update </button> </div> </div><script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.0/dist/jquery.min.js,npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.7/dayjs.min.js,npm/dayjs@1.11.7/locale/en.min.js,npm/dayjs@1.11.7/plugin/relativeTime.min.js,npm/dayjs@1.11.7/plugin/localizedFormat.min.js,npm/tocbot@4.21.0/dist/tocbot.min.js"></script> <script defer src="/TerrariumPI/assets/js/dist/post.min.js"></script> <script defer src="/TerrariumPI/app.js"></script> <script>SimpleJekyllSearch({searchInput:document.getElementById("search-input"),resultsContainer:document.getElementById("search-results"),json:"/TerrariumPI/assets/js/data/search.json",searchResultTemplate:'<div class="px-1 px-sm-2 px-lg-4 px-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>',noResultsText:'<p class="mt-5"></p>',templateMiddleware:function(e,s){return"categories"===e?""===s?`${s}`:`<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${s}</div>`:"tags"===e?""===s?`${s}`:`<div><i class="fa fa-tag fa-fw"></i>${s}</div>`:void 0}});</script>